import{A as ys,_ as Dt,U as wn,r as L,D as u,W as Ht,B as Gt,E as Qe,F as f,Q as vs}from"./index-Dh7Embt7.js";import{S as Ye}from"./separator-CZswFia8.js";import{T as si}from"./TableOfContents-C4zsYeWE.js";import{B as xs}from"./book-open-BvhPXFHT.js";import{H as Sn}from"./heart-Bp_PcTdn.js";import{C as Xe}from"./circle-check-big-0M4RoK03.js";import{C as As}from"./circle-x-mfbjf11W.js";import{Z as En,a as kn}from"./zoom-out-D1iP3jaq.js";import"./list-DGbcJCbp.js";import"./chevron-right-BDgNP7vN.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Tn=ys("download",_n);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],ze=ys("link",Cn),Wt={title:{en:"Science & Miracles",fr:"Science & Miracles",es:"Ciencia y Milagros",de:"Wissenschaft & Wunder"},subtitle:{en:"An exploration of phenomena that challenge natural explanation.",fr:"Une exploration des phénomènes qui défient l'explication naturelle.",es:"Una exploración de fenómenos que desafían la explicación natural.",de:"Eine Untersuchung von Phänomenen, die natürliche Erklärungen herausfordern."},quote:{text:{en:"Faith and reason are like two wings on which the human spirit rises to the contemplation of truth.",fr:"La foi et la raison sont comme les deux ailes sur lesquelles l'esprit humain s'élève vers la contemplation de la vérité.",es:"La fe y la razón son como las dos alas con las cuales el espíritu humano se eleva hacia la contemplación de la verdad.",de:"Glaube und Vernunft sind wie die beiden Flügel, mit denen sich der menschliche Geist zur Betrachtung der Wahrheit erhebt."},source:{en:"St. John Paul II, Fides et Ratio (1998)",fr:"Saint Jean-Paul II, Fides et Ratio (1998)",es:"San Juan Pablo II, Fides et Ratio (1998)",de:"Hl. Johannes Paul II., Fides et Ratio (1998)"}},selector:{title1:{en:"The Shroud of Turin",fr:"Le Linceul de Turin",es:"La Sábana Santa de Turín",de:"Das Turiner Grabtuch"},title2:{en:"Marian Apparitions",fr:"Apparitions Mariales",es:"Apariciones Marianas",de:"Marienerscheinungen"},title3:{en:"Eucharistic Miracles",fr:"Miracles Eucharistiques",es:"Milagros Eucarísticos",de:"Eucharistische Wunder"},prompt:{en:"Select a subject to explore its evidence.",fr:"Sélectionnez un sujet pour explorer ses preuves.",es:"Seleccione un tema para explorar su evidencia.",de:"Wählen Sie ein Thema, um dessen Beweise zu erkunden."}},shroud:{h2:{en:"The Shroud of Turin",fr:"Le Linceul de Turin",es:"La Sábana Santa de Turín",de:"Das Turiner Grabtuch"},p1:{en:"The Shroud of Turin is one of the most studied and controversial religious artifacts in history. It is a linen burial cloth that bears the image of a crucified man, matching the wounds described in the Gospels. Many believe it to be the actual burial cloth of Jesus Christ.",fr:"Le Linceul de Turin est l'un des artefacts religieux les plus étudiés et controversés de l'histoire. C'est un drap funéraire en lin qui porte l'image d'un homme crucifié, correspondant aux blessures décrites dans les Évangiles. Beaucoup pensent qu'il s'agit du véritable linceul de Jésus-Christ.",es:"La Sábana Santa de Turín es uno de los artefactos religiosos más estudiados y controvertidos de la historia. Es una tela de lino funeraria que lleva la imagen de un hombre crucificado, coincidiendo con las heridas descritas en los Evangelios. Muchos creen que es la verdadera tela funeraria de Jesucristo.",de:"Das Turiner Grabtuch ist eines der meistuntersuchten und umstrittensten religiösen Artefakte der Geschichte. Es ist ein leinenes Grabtuch, das das Bild eines gekreuzigten Mannes trägt, das den in den Evangelien beschriebenen Wunden entspricht. Viele glauben, dass es das tatsächliche Grabtuch Jesu Christi ist."},q1:{text:{en:"The Shroud remains the most analyzed artifact in human history.",fr:"Le Linceul reste l'artefact le plus analysé de l'histoire humaine.",es:"La Sábana Santa sigue siendo el artefacto más analizado de la historia humana.",de:"Das Grabtuch bleibt das am meisten analysierte Artefakt der Menschheitsgeschichte."},source:{en:"Dr. John Jackson, physicist",fr:"Dr John Jackson, physicien",es:"Dr. John Jackson, físico",de:"Dr. John Jackson, Physiker"}},p2:{en:"While the Church has not dogmatically declared the Shroud to be authentic, it encourages veneration and scientific study, acknowledging its profound spiritual impact.",fr:"Bien que l'Église n'ait pas dogmatiquement déclaré le Linceul authentique, elle encourage sa vénération et son étude scientifique, reconnaissant son profond impact spirituel.",es:"Aunque la Iglesia no ha declarado dogmáticamente que la Sábana Santa sea auténtica, fomenta su veneración y estudio científico, reconociendo su profundo impacto espiritual.",de:"Während die Kirche das Grabtuch nicht dogmatisch als authentisch erklärt hat, ermutigt sie zur Verehrung und wissenschaftlichen Untersuchung und erkennt seinen tiefen spirituellen Einfluss an."},desc:{h3:{en:"I. Description of the Shroud",fr:"I. Description du Linceul",es:"I. Descripción de la Sábana Santa",de:"I. Beschreibung des Grabtuchs"},li1:{en:"<strong>Dimensions:</strong> approx. 4.4 meters long by 1.1 meters wide",fr:"<strong>Dimensions :</strong> env. 4,4 mètres de long sur 1,1 mètre de large",es:"<strong>Dimensiones:</strong> aprox. 4,4 metros de largo por 1,1 metros de ancho",de:"<strong>Maße:</strong> ca. 4,4 Meter lang und 1,1 Meter breit"},li2:{en:"<strong>Material:</strong> fine linen, herringbone weave",fr:"<strong>Matériau :</strong> lin fin, tissage en chevrons",es:"<strong>Material:</strong> lino fino, tejido de espiga",de:"<strong>Material:</strong> feines Leinen, Fischgrätmuster"},li3:{en:"<strong>Image:</strong> front and back imprint of a bearded, crucified man",fr:"<strong>Image :</strong> empreinte frontale et dorsale d'un homme barbu crucifié",es:"<strong>Imagen:</strong> impronta frontal y dorsal de un hombre barbudo crucificado",de:"<strong>Bild:</strong> Vorder- und Rückansicht eines bärtigen, gekreuzigten Mannes"},li4:{en:"<strong>Wounds correspond to:</strong> Crown of thorns, Scourging (over 100 lash marks), Pierced wrists and feet, Side wound, Blood flow consistent with crucifixion",fr:"<strong>Blessures correspondant à :</strong> Couronne d'épines, Flagellation (plus de 100 marques de coups), Poignets et pieds percés, Plaie au côté, Écoulement sanguin compatible avec la crucifixion",es:"<strong>Las heridas corresponden a:</strong> Corona de espinas, Flagelación (más de 100 marcas de azotes), Muñecas y pies perforados, Herida en el costado, Flujo de sangre consistente con la crucifixión",de:"<strong>Wunden entsprechen:</strong> Dornenkrone, Geißelung (über 100 Peitschenhiebe), Durchbohrte Handgelenke und Füße, Seitenwunde, Blutfluss im Einklang mit einer Kreuzigung"}},sci:{h3:{en:"II. Scientific Properties of the Image",fr:"II. Propriétés Scientifiques de l'Image",es:"II. Propiedades Científicas de la Imagen",de:"II. Wissenschaftliche Eigenschaften des Bildes"},A:{h4:{en:"A. Unique Image Formation",fr:"A. Formation Unique de l'Image",es:"A. Formación Única de la Imagen",de:"A. Einzigartige Bildentstehung"},li1:{en:"No paint, pigment, or dye found in the fibers",fr:"Aucune peinture, pigment ou teinture trouvé dans les fibres",es:"No se encontró pintura, pigmento ni tinte en las fibras",de:"Keine Farbe, Pigmente oder Farbstoffe in den Fasern gefunden"},li2:{en:"Image is not absorbed but rests on the topmost fibrils",fr:"L'image n'est pas absorbée mais repose sur les fibrilles supérieures",es:"La imagen no se absorbe, sino que descansa en las fibrillas superiores",de:"Das Bild wird nicht absorbiert, sondern liegt auf den obersten Fibrillen"},li3:{en:"Contains 3D spatial information (detected by NASA’s VP-8 Image Analyzer)",fr:"Contient des informations spatiales 3D (détectées par l'analyseur d'images VP-8 de la NASA)",es:"Contiene información espacial 3D (detectada por el Analizador de Imágenes VP-8 de la NASA)",de:"Enthält räumliche 3D-Informationen (erkannt durch NASAs VP-8 Bildanalysator)"},li4:{en:"No directionality, unlike brushstrokes or natural contact images",fr:"Pas de directionnalité, contrairement aux coups de pinceau ou aux images de contact naturelles",es:"Sin direccionalidad, a diferencia de las pinceladas o imágenes de contacto natural",de:"Keine Richtungsabhängigkeit, im Gegensatz zu Pinselstrichen oder natürlichen Kontaktbildern"},li5:{en:"Negative image properties: the image is more anatomically accurate in photographic negatives",fr:"Propriétés d'image négative : l'image est plus anatomiquement précise dans les négatifs photographiques",es:"Propiedades de imagen negativa: la imagen es más anatómicamente precisa en negativos fotográficos",de:"Eigenschaften eines Negativbildes: Das Bild ist in fotografischen Negativen anatomisch genauer"},li6:{en:"Image depth limited to surface of outer linen fibrils — image does not penetrate through the cloth",fr:"Profondeur de l'image limitée à la surface des fibrilles de lin extérieures — l'image ne pénètre pas à travers le tissu",es:"Profundidad de la imagen limitada a la superficie de las fibrillas externas de lino — la imagen no penetra a través de la tela",de:"Bildtiefe beschränkt auf die Oberfläche der äußeren Leinenfibrillen — das Bild dringt nicht durch den Stoff"},li7:{en:"Image has no capillary action (as would be expected from application by brush or fluid)",fr:"L'image n'a pas d'action capillaire (comme on pourrait s'y attendre d'une application au pinceau ou par fluide)",es:"La imagen no tiene acción capilar (como se esperaría de una aplicación con pincel o fluido)",de:"Das Bild hat keine Kapillarwirkung (wie bei Anwendung mit Pinsel oder Flüssigkeit zu erwarten wäre)"},q:{text:{en:"We could find no chemical or physical method that could account for the image.",fr:"Nous n'avons trouvé aucune méthode chimique ou physique qui pourrait expliquer l'image.",es:"No pudimos encontrar ningún método químico o físico que pudiera explicar la imagen.",de:"Wir konnten keine chemische oder physikalische Methode finden, die das Bild erklären könnte."},source:{en:"STURP (Shroud of Turin Research Project), 1981",fr:"STURP (Projet de Recherche sur le Linceul de Turin), 1981",es:"STURP (Proyecto de Investigación de la Sábana Santa de Turín), 1981",de:"STURP (Turiner Grabtuch Forschungsprojekt), 1981"}}},B:{h4:{en:"B. Blood Evidence",fr:"B. Preuves du Sang",es:"B. Evidencia de Sangre",de:"B. Blutbeweise"},li1:{en:"Type AB human blood identified on the cloth",fr:"Sang humain de type AB identifié sur le tissu",es:"Sangre humana tipo AB identificada en la tela",de:"Menschliches Blut der Gruppe AB auf dem Tuch identifiziert"},li2:{en:"High bilirubin levels indicate trauma before death",fr:"Des niveaux élevés de bilirubine indiquent un traumatisme avant la mort",es:"Altos niveles de bilirrubina indican trauma antes de la muerte",de:"Hohe Bilirubinwerte weisen auf ein Trauma vor dem Tod hin"},li3:{en:"Presence of albumin and hemoglobin confirmed",fr:"Présence d'albumine et d'hémoglobine confirmée",es:"Presencia de albúmina y hemoglobina confirmada",de:"Vorhandensein von Albumin und Hämoglobin bestätigt"},li4:{en:"Spectroscopic tests match real blood decomposition markers",fr:"Les tests spectroscopiques correspondent aux marqueurs de décomposition du sang réel",es:"Las pruebas espectroscópicas coinciden con marcadores de descomposición de sangre real",de:"Spektroskopische Tests stimmen mit Markern echter Blutzersetzung überein"},li5:{en:"No image under bloodstains, suggesting the blood was transferred before the image formed, which contradicts known artistic techniques",fr:"Pas d'image sous les taches de sang, suggérant que le sang a été transféré avant que l'image ne se forme, ce qui contredit les techniques artistiques connues",es:"No hay imagen bajo las manchas de sangre, lo que sugiere que la sangre se transfirió antes de que se formara la imagen, contradiciendo técnicas artísticas conocidas",de:"Kein Bild unter Blutflecken, was darauf hindeutet, dass das Blut vor der Bildentstehung übertragen wurde, was bekannten künstlerischen Techniken widerspricht"},q:{text:{en:"The blood is real, human, and shows signs of hemolysis typical of severe injury.",fr:"Le sang est réel, humain, et montre des signes d'hémolyse typiques d'une blessure grave.",es:"La sangre es real, humana, y muestra signos de hemólisis típicos de lesiones graves.",de:"Das Blut ist echt, menschlich und zeigt Anzeichen von Hämolyse, die typisch für schwere Verletzungen sind."},source:{en:"Dr. Alan Adler, chemist",fr:"Dr Alan Adler, chimiste",es:"Dr. Alan Adler, químico",de:"Dr. Alan Adler, Chemiker"}}}},c14:{h3:{en:"III. Radiocarbon Dating Controversy (1988)",fr:"III. Controverse de la Datation au Carbone 14 (1988)",es:"III. Controversia de la Datación por Radiocarbono (1988)",de:"III. Radiokarbon-Datierungskontroverse (1988)"},p1:{en:"A carbon-14 test dated the cloth to 1260–1390 AD. However, serious criticisms emerged:",fr:"Un test au carbone 14 a daté le tissu de 1260–1390 ap. J.-C. Cependant, de sérieuses critiques ont émergé :",es:"Una prueba de carbono-14 dató la tela entre 1260–1390 d.C. Sin embargo, surgieron serias críticas:",de:"Ein Radiokarbon-Test datierte das Tuch auf 1260–1390 n. Chr. Es tauchten jedoch ernsthafte Kritikpunkte auf:"},li1:{en:"Sampling area may have been from a medieval repair",fr:"La zone d'échantillonnage pourrait provenir d'une réparation médiévale",es:"El área de muestreo podría haber sido de una reparación medieval",de:"Der Probenbereich könnte von einer mittelalterlichen Reparatur stammen"},li2:{en:"Textile experts noted different weave and dye in tested area",fr:"Les experts textiles ont noté un tissage et une teinture différents dans la zone testée",es:"Expertos textiles notaron un tejido y tinte diferentes en el área probada",de:"Textilexperten bemerkten unterschiedliche Webart und Färbung im getesteten Bereich"},li3:{en:"Peer-reviewed studies in the 2000s questioned the reliability of the 1988 test",fr:"Des études évaluées par des pairs dans les années 2000 ont remis en question la fiabilité du test de 1988",es:"Estudios revisados por pares en la década de 2000 cuestionaron la fiabilidad de la prueba de 1988",de:"Peer-Review-Studien in den 2000er Jahren stellten die Zuverlässigkeit des Tests von 1988 in Frage"},li4:{en:"Chemical composition (vanillin loss) inconsistent with a medieval origin",fr:"Composition chimique (perte de vanilline) incompatible avec une origine médiévale",es:"Composición química (pérdida de vainillina) inconsistente con un origen medieval",de:"Chemische Zusammensetzung (Vanillinverlust) inkonsistent mit einem mittelalterlichen Ursprung"},q:{text:{en:"The 1988 dating does not reflect the age of the main Shroud cloth.",fr:"La datation de 1988 ne reflète pas l'âge du tissu principal du Linceul.",es:"La datación de 1988 no refleja la edad de la tela principal de la Sábana Santa.",de:"Die Datierung von 1988 spiegelt nicht das Alter des Haupttuches des Grabtuchs wider."},source:{en:"Raymond Rogers, chemist, 2005",fr:"Raymond Rogers, chimiste, 2005",es:"Raymond Rogers, químico, 2005",de:"Raymond Rogers, Chemiker, 2005"}}},history:{h3:{en:"IV. Historical Testimony and Provenance",fr:"IV. Témoignage Historique et Provenance",es:"IV. Testimonio Histórico y Procedencia",de:"IV. Historisches Zeugnis und Provenienz"},li1:{en:"Documented presence in France in the 14th century (Lirey)",fr:"Présence documentée en France au XIVe siècle (Lirey)",es:"Presencia documentada en Francia en el siglo XIV (Lirey)",de:"Dokumentierte Präsenz in Frankreich im 14. Jahrhundert (Lirey)"},li2:{en:"Possibly identified with the Image of Edessa or Mandylion, venerated in the East from the 6th century",fr:"Possiblement identifié avec l'Image d'Édesse ou Mandylion, vénérée en Orient dès le VIe siècle",es:"Posiblemente identificado con la Imagen de Edesa o Mandylion, venerada en Oriente desde el siglo VI",de:"Möglicherweise identifiziert mit dem Bild von Edessa oder Mandylion, das im Osten ab dem 6. Jahrhundert verehrt wurde"},li3:{en:"Pilgrims and popes have revered the cloth for centuries",fr:"Pèlerins et papes ont vénéré le tissu pendant des siècles",es:"Peregrinos y papas han venerado la tela durante siglos",de:"Pilger und Päpste verehren das Tuch seit Jahrhunderten"}},anomalies:{h3:{en:"V. Scientific Anomalies Still Unexplained",fr:"V. Anomalies Scientifiques Toujours Inexpliquées",es:"V. Anomalías Científicas Aún Inexplicadas",de:"V. Unerklärte Wissenschaftliche Anomalien"},p1:{en:"Despite decades of testing, several features remain unexplained:",fr:"Malgré des décennies de tests, plusieurs caractéristiques restent inexpliquées :",es:"A pesar de décadas de pruebas, varias características permanecen sin explicación:",de:"Trotz jahrzehntelanger Tests bleiben mehrere Merkmale unerklärt:"},li1:{en:"How the image was formed without pigment, pressure, or heat",fr:"Comment l'image s'est formée sans pigment, pression ou chaleur",es:"Cómo se formó la imagen sin pigmento, presión o calor",de:"Wie das Bild ohne Pigment, Druck oder Hitze entstand"},li2:{en:"Why the image encodes three-dimensional spatial data",fr:"Pourquoi l'image encode des données spatiales tridimensionnelles",es:"Por qué la imagen codifica datos espaciales tridimensionales",de:"Warum das Bild dreidimensionale räumliche Daten kodiert"},li3:{en:"Why no known artistic or technological method can reproduce the image at the microscopic level",fr:"Pourquoi aucune méthode artistique ou technologique connue ne peut reproduire l'image au niveau microscopique",es:"Por qué ningún método artístico o tecnológico conocido puede reproducir la imagen a nivel microscópico",de:"Warum keine bekannte künstlerische oder technologische Methode das Bild auf mikroskopischer Ebene reproduzieren kann"},li4:{en:"Why there is no distortion from body contact (e.g., nose or cheeks), suggesting a non-contact imaging process",fr:"Pourquoi il n'y a pas de distorsion due au contact corporel (ex: nez ou joues), suggérant un processus d'imagerie sans contact",es:"Por qué no hay distorsión por contacto corporal (p. ej., nariz o mejillas), sugiriendo un proceso de imagen sin contacto",de:"Warum es keine Verzerrung durch Körperkontakt gibt (z. B. Nase oder Wangen), was auf einen berührungslosen Abbildungsprozess hindeutet"},li5:{en:"How blood was transferred before image formation, contradictory to artistic layering",fr:"Comment le sang a été transféré avant la formation de l'image, contradictoire avec la superposition artistique",es:"Cómo se transfirió la sangre antes de la formación de la imagen, contradictorio con la estratificación artística",de:"Wie Blut vor der Bildentstehung übertragen wurde, im Widerspruch zu künstlerischer Schichtung"},li6:{en:"The lack of degradation in the blood despite age",fr:"L'absence de dégradation du sang malgré l'âge",es:"La falta de degradación en la sangre a pesar de la edad",de:"Das Fehlen von Abbau im Blut trotz des Alters"},li7:{en:"No known mechanism that can selectively discolor only the top 200 nanometers of the cloth",fr:"Aucun mécanisme connu ne peut décolorer sélectivement seulement les 200 nanomètres supérieurs du tissu",es:"Ningún mecanismo conocido puede decolorar selectivamente solo los 200 nanómetros superiores de la tela",de:"Kein bekannter Mechanismus kann selektiv nur die obersten 200 Nanometer des Tuches verfärben"},p2:{en:"These anomalies point to a phenomenon beyond current scientific reproduction and invite deeper study.",fr:"Ces anomalies pointent vers un phénomène au-delà de la reproduction scientifique actuelle et invitent à une étude plus approfondie.",es:"Estas anomalías apuntan a un fenómeno más allá de la reproducción científica actual e invitan a un estudio más profundo.",de:"Diese Anomalien deuten auf ein Phänomen jenseits der aktuellen wissenschaftlichen Reproduktion hin und laden zu tieferen Studien ein."}},impact:{h3:{en:"VI. Theological and Spiritual Impact",fr:"VI. Impact Théologique et Spirituel",es:"VI. Impacto Teológico y Espiritual",de:"VI. Theologischer und Spiritueller Einfluss"},li1:{en:"Reflects the Passion narrative in perfect anatomical detail",fr:"Reflète le récit de la Passion avec un détail anatomique parfait",es:"Refleja la narrativa de la Pasión con perfecto detalle anatómico",de:"Spiegelt die Passionserzählung in perfektem anatomischen Detail wider"},li2:{en:"Encourages meditation on Christ’s suffering and death",fr:"Encourage la méditation sur la souffrance et la mort du Christ",es:"Fomenta la meditación sobre el sufrimiento y la muerte de Cristo",de:"Fördert die Meditation über das Leiden und den Tod Christi"},li3:{en:"Described by St. John Paul II as a 'mirror of the Gospel'",fr:"Décrit par St Jean-Paul II comme un « miroir de l'Évangile »",es:"Descrito por San Juan Pablo II como un 'espejo del Evangelio'",de:"Von Hl. Johannes Paul II. als 'Spiegel des Evangeliums' beschrieben"},q:{text:{en:"The Shroud invites every person to contemplate the mystery of suffering, love, and redemption.",fr:"Le Linceul invite chaque personne à contempler le mystère de la souffrance, de l'amour et de la rédemption.",es:"La Sábana Santa invita a cada persona a contemplar el misterio del sufrimiento, el amor y la redención.",de:"Das Grabtuch lädt jeden Menschen ein, das Geheimnis von Leiden, Liebe und Erlösung zu betrachten."},source:{en:"Pope John Paul II, 1998",fr:"Pape Jean-Paul II, 1998",es:"Papa Juan Pablo II, 1998",de:"Papst Johannes Paul II., 1998"}}},conclusion:{h3:{en:"Conclusion",fr:"Conclusion",es:"Conclusión",de:"Schlussfolgerung"},p1:{en:"The Shroud of Turin remains a profound enigma. Scientifically unexplained and spiritually powerful, it draws believers and skeptics alike into reflection on the suffering and resurrection of Christ. Whether it is the actual burial cloth or a sign pointing beyond itself, it remains a powerful witness to the mystery of the Incarnation and Passion.",fr:"Le Linceul de Turin reste une énigme profonde. Scientifiquement inexpliqué et spirituellement puissant, il attire croyants et sceptiques dans une réflexion sur la souffrance et la résurrection du Christ. Qu'il soit le véritable linceul funéraire ou un signe pointant au-delà de lui-même, il reste un témoin puissant du mystère de l'Incarnation et de la Passion.",es:"La Sábana Santa de Turín sigue siendo un enigma profundo. Científicamente inexplicada y espiritualmente poderosa, atrae a creyentes y escépticos por igual a reflexionar sobre el sufrimiento y la resurrección de Cristo. Ya sea la verdadera tela funeraria o un signo que apunta más allá de sí mismo, sigue siendo un testigo poderoso del misterio de la Encarnación y la Pasión.",de:"Das Turiner Grabtuch bleibt ein tiefes Rätsel. Wissenschaftlich unerklärt und spirituell kraftvoll, zieht es Gläubige und Skeptiker gleichermaßen in die Reflexion über das Leiden und die Auferstehung Christi. Ob es das tatsächliche Grabtuch ist oder ein Zeichen, das über sich selbst hinausweist, es bleibt ein mächtiges Zeugnis für das Geheimnis der Menschwerdung und Passion."},q:{text:{en:"He was pierced for our transgressions... and by His wounds we are healed.",fr:"Il a été transpercé pour nos transgressions... et par ses blessures nous sommes guéris.",es:"Él fue traspasado por nuestras rebeliones... y por sus llagas fuimos nosotros curados.",de:"Er ist um unserer Missetat willen verwundet... und durch seine Wunden sind wir geheilt."},source:{en:"Isaiah 53:5 - Written 500 years before Christ",fr:"Isaïe 53:5 - Écrit 500 ans avant Jésus-Christ",es:"Isaías 53:5 - Geschrieben 500 Jahre vor Christus",de:"Jesaja 53:5 - Escrito 500 años antes de Cristo."}}},sources:{h3:{en:"Sources & In-depth Analysis",fr:"Sources et Analyse Approfondie",es:"Fuentes y Análisis en Profundidad",de:"Quellen & Eingehende Analyse"},vid1:{en:"In-depth analysis of the Shroud",fr:"Analyse approfondie du Linceul",es:"Análisis en profundidad de la Sábana Santa",de:"Eingehende Analyse des Grabtuchs"},link1:{en:"https://www.shroud.com/menu.htm"},link2:{en:"https://shroudphotos.com/"},link3_text:{en:"3D Studies (History)",fr:"Études 3D (Histoire)",es:"Estudios 3D (Historia)",de:"3D-Studien (Geschichte)"},link3_url:{en:"/pdfs/shroud-3d-study.pdf"},pdf1_name:{en:"3D Reconstruction (PDF)",fr:"Reconstruction 3D (PDF)",es:"Reconstrucción 3D (PDF)",de:"3D-Rekonstruktion (PDF)"},pdf1_url:{en:"/pdfs/shroud-3d-study.pdf"},link4:{en:"https://www.shroud.com/78conclu.htm"},link5:{en:"https://www.sciencedirect.com/science/article/abs/pii/S0040603104004745"},link6:{en:"https://www.mdpi.com/2571-9408/5/2/47"},link7:{en:"https://powo.science.kew.org/taxon/urn:lsid:ipni.org:names:210758-1"}}},marian:{h2:{en:"Marian Apparitions and the Protestant Double Standard",fr:"Apparitions Mariales et le Double Standard Protestant",es:"Apariciones Marianas y el Doble Estándar Protestante",de:"Marienerscheinungen und der Protestantische Doppelmoral"},intro:{en:"Marian apparitions have long stirred both awe and debate, often emerging as moments of divine interruption into the flow of history. They typically involve large crowds, striking prophetic details, and physical phenomena that defy scientific explanation. From the Miracle of the Sun in Portugal to luminous visions in Cairo and an inexplicable image imprinted on cactus fiber in Mexico, these events continue to capture global attention and spiritual imagination. This article explores how Protestants accept group testimony for the Resurrection but dismiss similar evidence for Marian miracles. It presents Fátima, Zeitoun, and Guadalupe as powerful evidence for the truth of Catholicism.",fr:"Les apparitions mariales ont longtemps suscité à la fois crainte et débat, émergeant souvent comme des moments d'interruption divine dans le cours de l'histoire. Elles impliquent généralement de grandes foules, des détails prophétiques frappants et des phénomènes physiques qui défient l'explication scientifique. Du Miracle du Soleil au Portugal aux visions lumineuses au Caire et à une image inexplicable imprimée sur une fibre de cactus au Mexique, ces événements continuent de capter l'attention mondiale et l'imagination spirituelle. Cet article explore comment les protestants acceptent le témoignage de groupe pour la Résurrection mais rejettent des preuves similaires pour les miracles mariaux. Il présente Fátima, Zeitoun et Guadalupe comme des preuves puissantes de la vérité du catholicisme.",es:"Las apariciones marianas han despertado durante mucho tiempo tanto asombro como debate, a menudo emergiendo como momentos de interrupción divina en el flujo de la historia. Por lo general, involucran grandes multitudes, detalles proféticos sorprendentes y fenómenos físicos que desafían la explicación científica. Desde el Milagro del Sol en Portugal hasta visiones luminosas en El Cairo y una imagen inexplicable impresa en fibra de cactus en México, estos eventos continúan capturando la atención mundial y la imaginación espiritual. Este artículo explora cómo los protestantes aceptan el testimonio grupal para la Resurrección pero descartan evidencia similar para los milagros marianos. Presenta a Fátima, Zeitoun y Guadalupe como evidencia poderosa de la verdad del catolicismo.",de:"Marienerscheinungen haben lange Zeit sowohl Ehrfurcht als auch Debatten ausgelöst und tauchen oft als Momente göttlicher Unterbrechung im Fluss der Geschichte auf. Sie beinhalten typischerweise große Menschenmengen, bemerkenswerte prophetische Details und physikalische Phänomene, die sich einer wissenschaftlichen Erklärung entziehen. Vom Sonnenwunder in Portugal über leuchtende Visionen in Kairo bis hin zu einem unerklärlichen Bild, das auf Kaktusfasern in Mexiko eingeprägt ist, fesseln diese Ereignisse weiterhin die weltweite Aufmerksamkeit und die spirituelle Vorstellungskraft. Dieser Artikel untersucht, wie Protestanten Gruppenaussagen für die Auferstehung akzeptieren, aber ähnliche Beweise für Marienwunder ablehnen. Er präsentiert Fátima, Zeitoun und Guadalupe als kraftvolle Beweise für die Wahrheit des Katholizismus."},doubleStandard:{h3:{en:"The Double Standard in Protestant Apologetics",fr:"Le Double Standard dans l'Apologétique Protestante",es:"El Doble Estándar en la Apologética Protestante",de:"Die Doppelmoral in der Protestantischen Apologetik"},p1:{en:"A central tenet of Protestant apologetics is the appeal to historical testimony, particularly as recorded in Scripture. One example frequently cited is the passage in 1 Corinthians 15, where the Apostle Paul notes that Jesus appeared to over 500 witnesses after His resurrection. This mass testimony is taken as strong historical evidence that the Resurrection actually occurred. The underlying rationale is clear: a multitude of independent witnesses provides cumulative probabilistic weight toward the event’s historicity.",fr:"Un principe central de l'apologétique protestante est l'appel au témoignage historique, en particulier tel qu'il est consigné dans l'Écriture. Un exemple fréquemment cité est le passage de 1 Corinthiens 15, où l'apôtre Paul note que Jésus est apparu à plus de 500 témoins après Sa résurrection. Ce témoignage de masse est considéré comme une preuve historique solide que la Résurrection a réellement eu lieu. La raison sous-jacente est claire : une multitude de témoins indépendants fournit un poids probabiliste cumulatif en faveur de l'historicité de l'événement.",es:"Un principio central de la apologética protestante es la apelación al testimonio histórico, particularmente como se registra en las Escrituras. Un ejemplo citado frecuentemente es el pasaje en 1 Corintios 15, donde el apóstol Pablo señala que Jesús se apareció a más de 500 testigos después de Su resurrección. Este testimonio masivo se toma como una fuerte evidencia histórica de que la Resurrección realmente ocurrió. La lógica subyacente es clara: una multitud de testigos independientes proporciona un peso probabilístico acumulativo hacia la historicidad del evento.",de:"Ein zentraler Grundsatz der protestantischen Apologetik ist die Berufung auf historisches Zeugnis, insbesondere wie es in der Schrift aufgezeichnet ist. Ein häufig zitiertes Beispiel ist die Passage in 1. Korinther 15, wo der Apostel Paulus anmerkt, dass Jesus nach Seiner Auferstehung über 500 Zeugen erschien. Dieses Massenzeugnis wird als starker historischer Beweis dafür angesehen, dass die Auferstehung tatsächlich stattgefunden hat. Die zugrunde liegende Begründung ist klar: Eine Vielzahl unabhängiger Zeugen liefert ein kumulatives Wahrscheinlichkeitsgewicht für die Historizität des Ereignisses."},p2:{en:"However, this reasoning exposes a severe inconsistency when Protestant theologians reject or ignore Catholic miraculous events, particularly Marian apparitions, that are even more thoroughly documented and supported by eyewitness accounts. Consider the Miracle of the Sun at Fátima: over 70,000 people, including atheists, skeptics, journalists, and devout believers, saw the sun dance, pulse with color, and plummet toward the earth. Their testimonies were recorded in secular newspapers the next day. Or Zeitoun, where millions of Muslims and Christians alike witnessed a glowing figure identified as the Virgin Mary appearing for hours at a time over the course of several years. These events were captured in photographs and affirmed by national authorities.",fr:"Cependant, ce raisonnement expose une grave incohérence lorsque les théologiens protestants rejettent ou ignorent les événements miraculeux catholiques, en particulier les apparitions mariales, qui sont encore plus minutieusement documentés et soutenus par des récits de témoins oculaires. Considérez le Miracle du Soleil à Fátima : plus de 70 000 personnes, y compris des athées, des sceptiques, des journalistes et des croyants dévots, ont vu le soleil danser, pulser de couleur et plonger vers la terre. Leurs témoignages ont été enregistrés dans les journaux laïques le lendemain. Ou Zeitoun, où des millions de musulmans et de chrétiens ont été témoins d'une silhouette lumineuse identifiée comme la Vierge Marie apparaissant pendant des heures au cours de plusieurs années. Ces événements ont été capturés en photos et affirmés par les autorités nationales.",es:"Sin embargo, este razonamiento expone una grave inconsistencia cuando los teólogos protestantes rechazan o ignoran los eventos milagrosos católicos, particularmente las apariciones marianas, que están aún más documentados y respaldados por relatos de testigos oculares. Considere el Milagro del Sol en Fátima: más de 70,000 personas, incluidos ateos, escépticos, periodistas y creyentes devotos, vieron el sol bailar, pulsar con color y caer hacia la tierra. Sus testimonios fueron registrados en periódicos seculares al día siguiente. O Zeitoun, donde millones de musulmanes y cristianos por igual fueron testigos de una figura brillante identificada como la Virgen María apareciendo durante horas a lo largo de varios años. Estos eventos fueron capturados en fotografías y afirmados por autoridades nacionales.",de:"Diese Argumentation offenbart jedoch eine schwerwiegende Inkonsistenz, wenn protestantische Theologen katholische Wunderereignisse ablehnen oder ignorieren, insbesondere Marienerscheinungen, die noch gründlicher dokumentiert und durch Augenzeugenberichte gestützt sind. Betrachten Sie das Sonnenwunder von Fátima: Über 70.000 Menschen, darunter Atheisten, Skeptiker, Journalisten und fromme Gläubige, sahen die Sonne tanzen, farbig pulsieren und auf die Erde stürzen. Ihre Zeugnisse wurden am nächsten Tag in säkularen Zeitungen festgehalten. Oder Zeitoun, wo Millionen von Muslimen und Christen gleichermaßen eine leuchtende Gestalt sahen, die als die Jungfrau Maria identifiziert wurde und über mehrere Jahre hinweg stundenlang erschien. Diese Ereignisse wurden auf Fotos festgehalten und von nationalen Behörden bestätigt."},p3:{en:"To accept the testimony of 500 unnamed witnesses from 2,000 years ago while dismissing named, photographed, and multiply-attested witnesses from the 20th century is not merely inconsistent; it undermines the entire evidential approach that undergirds much of Protestant theology. The only apparent reason for this rejection is the theological content of the Marian apparitions themselves, which point toward distinctly Catholic doctrines such as Marian intercession, the Rosary, and the sacrificial nature of penance. But to evaluate historical evidence based not on its credibility but on one's doctrinal preferences is the very definition of confirmation bias. This is the Protestant problem: a double standard in evaluating miracles, which threatens the integrity of its own apologetic foundations.",fr:"Accepter le témoignage de 500 témoins anonymes d'il y a 2 000 ans tout en rejetant des témoins nommés, photographiés et attestés à multiples reprises du XXe siècle n'est pas seulement incohérent, cela sape toute l'approche probante qui sous-tend une grande partie de la théologie protestante. La seule raison apparente de ce rejet est le contenu théologique des apparitions mariales elles-mêmes, qui pointent vers des doctrines distinctement catholiques telles que l'intercession mariale, le Rosaire et la nature sacrificielle de la pénitence. Mais évaluer des preuves historiques non pas sur leur crédibilité mais sur ses préférences doctrinales est la définition même du biais de confirmation. C'est le problème protestant : un double standard dans l'évaluation des miracles, qui menace l'intégrité de ses propres fondements apologétiques.",es:"Aceptar el testimonio de 500 testigos anónimos de hace 2,000 años mientras se descarta a testigos nombrados, fotografiados y atestiguados múltiples veces del siglo XX no es meramente inconsistente, sino que socava todo el enfoque evidencial que sustenta gran parte de la teología protestante. La única razón aparente para este rechazo es el contenido teológico de las propias apariciones marianas, que apuntan hacia doctrinas distintivamente católicas como la intercesión mariana, el Rosario y la naturaleza sacrificial de la penitencia. Pero evaluar la evidencia histórica basándose no en su credibilidad sino en las preferencias doctrinales de uno es la definición misma de sesgo de confirmación. Este es el problema protestante: un doble estándar en la evaluación de milagros, que amenaza la integridad de sus propios fundamentos apologéticos.",de:"Das Zeugnis von 500 namenlosen Zeugen von vor 2.000 Jahren zu akzeptieren, während man namentlich genannte, fotografierte und mehrfach bezeugte Zeugen aus dem 20. Jahrhundert ablehnt, ist nicht nur inkonsistent, es untergräbt den gesamten evidenzbasierten Ansatz, der einen Großteil der protestantischen Theologie untermauert. Der einzige offensichtliche Grund für diese Ablehnung ist der theologische Inhalt der Marienerscheinungen selbst, die auf eindeutig katholische Lehren wie die Fürsprache Mariens, den Rosenkranz und die Opferbereitschaft der Buße hinweisen. Aber historische Beweise nicht aufgrund ihrer Glaubwürdigkeit, sondern aufgrund eigener doktrinärer Vorlieben zu bewerten, ist die Definition von Bestätigungsfehler. Das ist das protestantische Problem: eine Doppelmoral bei der Bewertung von Wundern, die die Integrität der eigenen apologetischen Grundlagen bedroht."},key:{li1:{en:"Protestants appeal to group testimony to defend the Resurrection.",fr:"Les protestants font appel au témoignage de groupe pour défendre la Résurrection.",es:"Los protestantes apelan al testimonio grupal para defender la Resurrección.",de:"Protestanten berufen sich auf Gruppenzeugnisse, um die Auferstehung zu verteidigen."},li2:{en:"Fátima and Zeitoun involve even greater numbers and better documentation.",fr:"Fátima et Zeitoun impliquent des nombres encore plus grands et une meilleure documentation.",es:"Fátima y Zeitoun involucran números aún mayores y mejor documentación.",de:"Fátima und Zeitoun weisen noch größere Zahlen und eine bessere Dokumentation auf."},li3:{en:"Rejecting them based on theology, not evidence, reveals confirmation bias.",fr:"Les rejeter sur la base de la théologie, et non des preuves, révèle un biais de confirmation.",es:"Rechazarlos basándose en la teología, no en la evidencia, revela un sesgo de confirmación.",de:"Sie aufgrund von Theologie statt Beweisen abzulehnen, offenbart einen Bestätigungsfehler."}}},fatima:{h3:{en:"The Apparitions at Fátima: A Historical and Scientific Challenge to Skepticism",fr:"Les Apparitions de Fátima : Un Défi Historique et Scientifique au Scepticisme",es:"Las Apariciones en Fátima: Un Desafío Histórico y Científico al Escepticismo",de:"Die Erscheinungen von Fátima: Eine Historische und Wissenschaftliche Herausforderung an den Skeptizismus"},p1:{en:"The Marian apparitions at Fátima, Portugal, are among the most rigorously investigated and widely attested miracles of the 20th century. In 1917, three shepherd children, Lucia dos Santos and her cousins Francisco and Jacinta Marto, reported six monthly visitations of the Virgin Mary, beginning on May 13. These apparitions culminated in the now-famous Miracle of the Sun on October 13, which drew a crowd of approximately 70,000 people to the Cova da Iria.",fr:"Les apparitions mariales à Fátima, au Portugal, sont parmi les miracles les plus rigoureusement enquêtés et largement attestés du XXe siècle. En 1917, trois enfants bergers, Lucie dos Santos et ses cousins François et Jacinthe Marto, ont rapporté six visites mensuelles de la Vierge Marie, commençant le 13 mai. Ces apparitions ont culminé avec le désormais célèbre Miracle du Soleil le 13 octobre, qui a attiré une foule d'environ 70 000 personnes à la Cova da Iria.",es:"Las apariciones marianas en Fátima, Portugal, se encuentran entre los milagros más rigurosamente investigados y ampliamente atestiguados del siglo XX. En 1917, tres niños pastores, Lucía dos Santos y sus primos Francisco y Jacinta Marto, informaron seis visitas mensuales de la Virgen María, comenzando el 13 de mayo. Estas apariciones culminaron en el ahora famoso Milagro del Sol el 13 de octubre, que atrajo a una multitud de aproximadamente 70,000 personas a la Cova da Iria.",de:"Die Marienerscheinungen in Fátima, Portugal, gehören zu den am gründlichsten untersuchten und am weitesten bezeugten Wundern des 20. Jahrhunderts. Im Jahr 1917 berichteten drei Hirtenkinder, Lucia dos Santos und ihre Cousins Francisco und Jacinta Marto, von sechs monatlichen Besuchen der Jungfrau Maria, beginnend am 13. Mai. Diese Erscheinungen gipfelten im heute berühmten Sonnenwunder am 13. Oktober, das eine Menge von etwa 70.000 Menschen in die Cova da Iria zog."},p2:{en:"From the start, the children’s reports included verifiable prophetic elements. They predicted that Mary would perform a public miracle on a specific date and time, a claim that was publicized widely in both religious and secular communities. This foresight eliminates the possibility that the subsequent miracle was merely a spontaneous meteorological phenomenon. On the appointed day, despite torrential rain, the clouds parted, and the sun began to spin, radiate multicolored lights, and appear to descend toward the earth. Multiple eyewitnesses, including journalists from secular newspapers such as O Século, testified to this event. Their reports included descriptions of the sun zigzagging, emitting radiant colors, and even drying the previously soaked ground and clothing of the observers within minutes.",fr:"Dès le début, les rapports des enfants incluaient des éléments prophétiques vérifiables. Ils ont prédit que Marie accomplirait un miracle public à une date et une heure spécifiques, une affirmation qui a été largement diffusée dans les communautés religieuses et laïques. Cette prévoyance élimine la possibilité que le miracle subséquent n'ait été qu'un phénomène météorologique spontané. Au jour dit, malgré une pluie torrentielle, les nuages se sont séparés et le soleil a commencé à tourner, à irradier des lumières multicolores et à sembler descendre vers la terre. De multiples témoins oculaires, y compris des journalistes de journaux laïques tels que O Século, ont témoigné de cet événement. Leurs rapports incluaient des descriptions du soleil zigzaguant, émettant des couleurs rayonnantes, et séchant même le sol et les vêtements précédemment trempés des observateurs en quelques minutes.",es:"Desde el principio, los informes de los niños incluyeron elementos proféticos verificables. Predijeron que María realizaría un milagro público en una fecha y hora específicas, una afirmación que se publicitó ampliamente en comunidades tanto religiosas como seculares. Esta previsión elimina la posibilidad de que el milagro posterior fuera simplemente un fenómeno meteorológico espontáneo. En el día señalado, a pesar de la lluvia torrencial, las nubes se abrieron y el sol comenzó a girar, irradiar luces multicolores y parecer descender hacia la tierra. Múltiples testigos oculares, incluidos periodistas de periódicos seculares como O Século, testificaron sobre este evento. Sus informes incluyeron descripciones del sol zigzagueando, emitiendo colores radiantes e incluso secando el suelo y la ropa previamente empapados de los observadores en cuestión de minutos.",de:"Von Anfang an enthielten die Berichte der Kinder überprüfbare prophetische Elemente. Sie sagten voraus, dass Maria an einem bestimmten Datum und zu einer bestimmten Uhrzeit ein öffentliches Wunder vollbringen würde, eine Behauptung, die sowohl in religiösen als auch in säkularen Gemeinschaften weit verbreitet wurde. Diese Voraussicht schließt die Möglichkeit aus, dass das nachfolgende Wunder lediglich ein spontanes meteorologisches Phänomen war. Am festgesetzten Tag teilten sich trotz sintflutartigen Regens die Wolken, und die Sonne begann sich zu drehen, bunte Lichter auszustrahlen und schien auf die Erde herabzustürzen. Mehrere Augenzeugen, darunter Journalisten von säkularen Zeitungen wie O Século, bezeugten dieses Ereignis. Ihre Berichte enthielten Beschreibungen der Sonne, die im Zickzackkurs tanzte, strahlende Farben aussandte und sogar den zuvor durchnässten Boden und die Kleidung der Beobachter innerhalb von Minuten trocknete."},p3:{en:"Scientific inquiries have attempted to explain the event as a meteorological phenomenon, such as parhelion (sun dogs) or collective photopsia. However, none of these theories withstand scrutiny. Solar parhelia require specific angular ice crystal formations in the upper atmosphere, which were not present according to meteorological records of the day. Likewise, mass hallucination is rendered implausible due to the scale, the consistency of visual descriptions, and the presence of skeptics who testified to witnessing the same phenomenon. Attempts to recreate the miracle using rotating mirrors, lenses, or atmospheric simulations have failed to replicate the observed behavior of the sun, specifically its erratic motion, variable luminosity, and color shifts. Additionally, there was no reported thermal increase or retinal damage among the crowd, despite their direct observation of the sun, which contradicts known ocular safety thresholds.",fr:"Les enquêtes scientifiques ont tenté d'expliquer l'événement comme un phénomène météorologique, tel qu'un parhélie (faux soleils) ou une photopsie collective. Cependant, aucune de ces théories ne résiste à l'examen. Les parhélies solaires nécessitent des formations spécifiques de cristaux de glace angulaires dans la haute atmosphère, qui n'étaient pas présentes selon les relevés météorologiques du jour. De même, l'hallucination collective est rendue invraisemblable en raison de l'échelle, de la cohérence des descriptions visuelles et de la présence de sceptiques qui ont témoigné avoir été témoins du même phénomène. Les tentatives de recréer le miracle à l'aide de miroirs rotatifs, de lentilles ou de simulations atmosphériques ont échoué à reproduire le comportement observé du soleil, spécifiquement son mouvement erratique, sa luminosité variable et ses changements de couleur. De plus, aucune augmentation thermique ou dommage rétinien n'a été signalé parmi la foule, malgré leur observation directe du soleil, ce qui contredit les seuils de sécurité oculaire connus.",es:"Las investigaciones científicas han intentado explicar el evento como un fenómeno meteorológico, como el parhelio (perros solares) o fotopsia colectiva. Sin embargo, ninguna de estas teorías resiste el escrutinio. Los parhelios solares requieren formaciones específicas de cristales de hielo angulares en la atmósfera superior, que no estaban presentes según los registros meteorológicos del día. Del mismo modo, la alucinación colectiva se vuelve inverosímil debido a la escala, la consistencia de las descripciones visuales y la presencia de escépticos que testificaron haber presenciado el mismo fenómeno. Los intentos de recrear el milagro utilizando espejos giratorios, lentes o simulaciones atmosféricas no han logrado replicar el comportamiento observado del sol, específicamente su movimiento errático, luminosidad variable y cambios de color. Además, no se informó de aumento térmico ni daño retiniano entre la multitud, a pesar de su observación directa del sol, lo que contradice los umbrales de seguridad ocular conocidos.",de:"Wissenschaftliche Untersuchungen haben versucht, das Ereignis als meteorologisches Phänomen wie Parhelion (Nebensonnen) oder kollektive Photopsie zu erklären. Keine dieser Theorien hält jedoch einer Überprüfung stand. Solare Parhelien erfordern spezifische winklige Eiskristallformationen in der oberen Atmosphäre, die laut den meteorologischen Aufzeichnungen des Tages nicht vorhanden waren. Ebenso wird Massenhalluzination aufgrund des Ausmaßes, der Konsistenz der visuellen Beschreibungen und der Anwesenheit von Skeptikern, die bezeugten, dasselbe Phänomen gesehen zu haben, unplausibel. Versuche, das Wunder mit rotierenden Spiegeln, Linsen oder atmosphärischen Simulationen nachzubilden, sind gescheitert, das beobachtete Verhalten der Sonne zu replizieren, insbesondere ihre unberechenbare Bewegung, variable Leuchtkraft und Farbverschiebungen. Zusätzlich gab es keinen berichteten Temperaturanstieg oder Netzhautschäden in der Menge, trotz ihrer direkten Beobachtung der Sonne, was bekannten Augensicherheitsgrenzen widerspricht."},facts:{h4:{en:"Uncontested facts",fr:"Faits incontestés",es:"Hechos indiscutibles",de:"Unbestrittene Fakten"},li1:{en:"A specific miracle was predicted in advance, including date and time.",fr:"Un miracle spécifique a été prédit à l'avance, incluant la date et l'heure.",es:"Se predijo un milagro específico con antelación, incluyendo fecha y hora.",de:"Ein spezifisches Wunder wurde im Voraus vorhergesagt, einschließlich Datum und Uhrzeit."},li2:{en:"70,000 people witnessed the event, including journalists and skeptics.",fr:"70 000 personnes ont été témoins de l'événement, y compris des journalistes et des sceptiques.",es:"70,000 personas presenciaron el evento, incluidos periodistas y escépticos.",de:"70.000 Menschen waren Zeugen des Ereignisses, darunter Journalisten und Skeptiker."},li3:{en:"No naturalistic explanation has ever been sufficient.",fr:"Aucune explication naturaliste n'a jamais été suffisante.",es:"Ninguna explicación naturalista ha sido suficiente.",de:"Keine naturalistische Erklärung war je ausreichend."},li4:{en:"The event prompted conversions and scientific interest.",fr:"L'événement a suscité des conversions et un intérêt scientifique.",es:"El evento provocó conversiones e interés científico.",de:"Das Ereignis löste Bekehrungen und wissenschaftliches Interesse aus."}},pdf1_name:{en:"Fatima In-depth Analysis (PDF)",fr:"Analyse Approfondie de Fátima (PDF)",es:"Análisis en Profundidad de Fátima (PDF)",de:"Eingehende Analyse von Fátima (PDF)"},pdf1_url:{en:"/pdfs/fatima-pictures.pdf"},keySci:{h4:{en:"Key Scientific Observations",fr:"Observations Scientifiques Clés",es:"Observaciones Científicas Clave",de:"Wichtige Wissenschaftliche Beobachtungen"},li1:{en:"1. Photographic Evidence<br>Six high-resolution photographs taken at the scene were analyzed. These images, captured by engineer Judah Bento Ruah, reveal:<ul><li>Shadows cast in unexpected directions.</li><li>Evidence of two distinct light sources:<br>LSa: A warm, pale light source in the direction of the sun.<br>LSb: A diffuse, overhead light source likely caused by a bright, isolated cloud.</li></ul>For example, shadows under a woman’s hat and on nearby objects confirm two intersecting light vectors, incompatible with a single solar source.",fr:"1. Preuves Photographiques<br>Six photographies haute résolution prises sur les lieux ont été analysées. Ces images, capturées par l'ingénieur Judah Bento Ruah, révèlent :<ul><li>Des ombres projetées dans des directions inattendues.</li><li>La preuve de deux sources lumineuses distinctes :<br>LSa : Une source de lumière chaude et pâle en direction du soleil.<br>LSb : Une source de lumière diffuse et zénithale probablement causée par un nuage brillant et isolé.</li></ul>Par exemple, les ombres sous le chapeau d'une femme et sur des objets proches confirment deux vecteurs lumineux qui se croisent, incompatibles avec une source solaire unique.",es:"1. Evidencia Fotográfica<br>Se analizaron seis fotografías de alta resolución tomadas en la escena. Estas imágenes, capturadas por el ingeniero Judah Bento Ruah, revelan:<ul><li>Sombras proyectadas en direcciones inesperadas.</li><li>Evidencia de dos fuentes de luz distintas:<br>LSa: Una fuente de luz cálida y pálida en la dirección del sol.<br>LSb: Una fuente de luz difusa y cenital probablemente causada por una nube brillante y aislada.</li></ul>Por ejemplo, las sombras bajo el sombrero de una mujer y en objetos cercanos confirman dos vectores de luz que se cruzan, incompatibles con una sola fuente solar.",de:"1. Fotografische Beweise<br>Sechs hochauflösende Fotos, die am Tatort aufgenommen wurden, wurden analysiert. Diese Bilder, aufgenommen vom Ingenieur Judah Bento Ruah, enthüllen:<ul><li>Schatten, die in unerwartete Richtungen geworfen werden.</li><li>Beweise für zwei unterschiedliche Lichtquellen:<br>LSa: Eine warme, blasse Lichtquelle in Richtung der Sonne.<br>LSb: Eine diffuse, über dem Kopf befindliche Lichtquelle, wahrscheinlich verursacht durch eine helle, isolierte Wolke.</li></ul>Zum Beispiel bestätigen Schatten unter dem Hut einer Frau und auf nahegelegenen Objekten zwei sich kreuzende Lichtvektoren, unvereinbar mit einer einzelnen Sonnenquelle."},li2:{en:"2. Rapid Drying of Wet Clothes<br>Eyewitnesses noted that soaked clothes dried within minutes, despite the low October temperatures and high humidity. Infrared-like heat was recorded in photos by comparing dry and wet areas on people’s clothes, showing localized heating consistent with exposure to LSa.",fr:"2. Séchage Rapide des Vêtements Mouillés<br>Des témoins oculaires ont noté que les vêtements trempés séchaient en quelques minutes, malgré les basses températures d'octobre et la forte humidité. Une chaleur de type infrarouge a été enregistrée sur les photos en comparant les zones sèches et humides sur les vêtements des gens, montrant un chauffage localisé compatible avec une exposition à LSa.",es:"2. Secado Rápido de Ropa Mojada<br>Los testigos oculares notaron que la ropa empapada se secaba en minutos, a pesar de las bajas temperaturas de octubre y la alta humedad. Se registró calor tipo infrarrojo en fotos comparando áreas secas y húmedas en la ropa de las personas, mostrando calentamiento localizado consistente con la exposición a LSa.",de:"2. Schnelles Trocknen nasser Kleidung<br>Augenzeugen bemerkten, dass durchnässte Kleidung innerhalb von Minuten trocknete, trotz der niedrigen Oktobertemperaturen und der hohen Luftfeuchtigkeit. Infrarotartige Wärme wurde auf Fotos aufgezeichnet, indem trockene und nasse Bereiche auf der Kleidung von Menschen verglichen wurden, was eine lokale Erwärmung zeigt, die mit der Exposition gegenüber LSa übereinstimmt."},li3:{en:"3. Geometric Light Source Analysis<br>Using image perspective, vanishing points, and shadow angles, the elevation of the observed light source (LSa) was calculated at 28–30° above the horizon, while the actual sun’s position at the time was 42.7°. This discrepancy suggests that LSa could not have been the real sun.",fr:"3. Analyse Géométrique de la Source Lumineuse<br>En utilisant la perspective de l'image, les points de fuite et les angles d'ombre, l'élévation de la source lumineuse observée (LSa) a été calculée à 28–30° au-dessus de l'horizon, alors que la position réelle du soleil à ce moment-là était de 42,7°. Cette divergence suggère que LSa ne pouvait pas être le vrai soleil.",es:"3. Análisis Geométrico de la Fuente de Luz<br>Utilizando la perspectiva de la imagen, los puntos de fuga y los ángulos de sombra, se calculó la elevación de la fuente de luz observada (LSa) en 28–30° sobre el horizonte, mientras que la posición real del sol en ese momento era de 42.7°. Esta discrepancia sugiere que LSa no podría haber sido el sol real.",de:"3. Geometrische Lichtquellenanalyse<br>Unter Verwendung von Bildperspektive, Fluchtpunkten und Schattenwinkeln wurde die Höhe der beobachteten Lichtquelle (LSa) auf 28–30° über dem Horizont berechnet, während die tatsächliche Position der Sonne zu diesem Zeitpunkt 42,7° betrug. Diese Diskrepanz legt nahe, dass LSa nicht die echte Sonne gewesen sein kann."},li4:{en:"4. Atmospheric and Weather Data<br>Official weather records confirm:<ul><li>Heavy rain in the hours leading up to the event.</li><li>A sudden break in the clouds around noon.</li><li>Temperatures around 15°C and light wind.</li></ul>This contradicts skeptical claims of no significant weather changes.",fr:"4. Données Atmosphériques et Météorologiques<br>Les relevés météorologiques officiels confirment :<ul><li>De fortes pluies dans les heures précédant l'événement.</li><li>Une éclaircie soudaine vers midi.</li><li>Des températures autour de 15°C et un vent léger.</li></ul>Cela contredit les affirmations sceptiques d'absence de changements météorologiques significatifs.",es:"4. Datos Atmosféricos y Meteorológicos<br>Los registros meteorológicos oficiales confirman:<ul><li>Lluvia intensa en las horas previas al evento.</li><li>Una repentina ruptura en las nubes alrededor del mediodía.</li><li>Temperaturas alrededor de 15°C y viento ligero.</li></ul>Esto contradice las afirmaciones escépticas de que no hubo cambios climáticos significativos.",de:"4. Atmosphärische und Wetterdaten<br>Offizielle Wetteraufzeichnungen bestätigen:<ul><li>Starken Regen in den Stunden vor dem Ereignis.</li><li>Einen plötzlichen Wolkenbruch gegen Mittag.</li><li>Temperaturen um 15°C und leichten Wind.</li></ul>Dies widerspricht skeptischen Behauptungen, es habe keine signifikanten Wetteränderungen gegeben."},li5:{en:"5. Distant Observers<br>The phenomenon was independently witnessed up to 30-35 km away in directions inconsistent with the actual sun’s path. For example:<ul><li>In Leiria, 16 km northwest, a witness saw flashes in the sky toward Fatima, not the noon sun.</li><li>In Minde, 12 km south, the phenomenon was seen in the northern sky, opposite to where the sun was.</li></ul>These observations challenge the hypothesis of retinal illusions or localized hallucinations.",fr:"5. Observateurs Lointains<br>Le phénomène a été observé indépendamment jusqu'à 30-35 km de distance dans des directions incompatibles avec la trajectoire réelle du soleil. Par exemple :<ul><li>À Leiria, 16 km au nord-ouest, un témoin a vu des éclairs dans le ciel vers Fatima, pas le soleil de midi.</li><li>À Minde, 12 km au sud, le phénomène a été vu dans le ciel du nord, à l'opposé de l'endroit où se trouvait le soleil.</li></ul>Ces observations remettent en question l'hypothèse d'illusions rétiniennes ou d'hallucinations localisées.",es:"5. Observadores Distantes<br>El fenómeno fue presenciado independientemente hasta a 30-35 km de distancia en direcciones inconsistentes con la trayectoria real del sol. Por ejemplo:<ul><li>En Leiria, 16 km al noroeste, un testigo vio destellos en el cielo hacia Fátima, no el sol del mediodía.</li><li>En Minde, 12 km al sur, el fenómeno se vio en el cielo del norte, opuesto a donde estaba el sol.</li></ul>Estas observaciones desafían la hipótesis de ilusiones retinianas o alucinaciones localizadas.",de:"5. Entfernte Beobachter<br>Das Phänomen wurde unabhängig bis zu 30-35 km entfernt in Richtungen beobachtet, die nicht mit dem tatsächlichen Sonnenweg übereinstimmen. Zum Beispiel:<ul><li>In Leiria, 16 km nordwestlich, sah ein Zeuge Blitze am Himmel in Richtung Fatima, nicht die Mittagssonne.</li><li>In Minde, 12 km südlich, wurde das Phänomen am nördlichen Himmel gesehen, entgegengesetzt zu dem Ort, wo die Sonne war.</li></ul>Diese Beobachtungen stellen die Hypothese von Netzhautillusionen oder lokalisierten Halluzinationen in Frage."}},invalid:{h4:{en:"Invalidated Hypotheses",fr:"Hypothèses Invalidées",es:"Hipótesis Invalidada",de:"Widerlegte Hypothesen"},li1:{en:"Sundogs (parhelia): Not viable at sun elevations above 42° and do not produce heat.",fr:"Faux soleils (parhélies) : Non viables à des élévations solaires supérieures à 42° et ne produisent pas de chaleur.",es:"Perros solares (parhelios): No viables en elevaciones solares superiores a 42° y no producen calor.",de:"Nebensonnen (Parhelien): Nicht möglich bei Sonnenständen über 42° und erzeugen keine Hitze."},li2:{en:"Dust clouds or atmospheric lenses: Could not produce the fast, localized heat or observed movement.",fr:"Nuages de poussière ou lentilles atmosphériques : Ne pourraient pas produire la chaleur rapide et localisée ou le mouvement observé.",es:"Nubes de polvo o lentes atmosféricas: No podrían producir el calor rápido y localizado o el movimiento observado.",de:"Staubwolken oder atmosphärische Linsen: Konnten nicht die schnelle, lokale Hitze oder die beobachtete Bewegung erzeugen."},li3:{en:"Retinal effects (phosphenes): No recorded eye damage; the sun-like object could be looked at without discomfort.",fr:"Effets rétiniens (phosphènes) : Aucun dommage oculaire enregistré ; l'objet semblable au soleil pouvait être regardé sans inconfort.",es:"Efectos retinianos (fosfenos): No se registraron daños oculares; el objeto similar al sol se podía mirar sin molestias.",de:"Netzhaut-Effekte (Phosphene): Keine aufgezeichneten Augenschäden; das sonnenähnliche Objekt konnte ohne Unbehagen betrachtet werden."},li4:{en:"Mass hallucination: Inconsistent with distant, independent witnesses.",fr:"Hallucination collective : Incompatible avec des témoins lointains et indépendants.",es:"Alucinación masiva: Inconsistente con testigos distantes e independientes.",de:"Massenhalluzination: Inkonsistent mit entfernten, unabhängigen Zeugen."}},conclusion:{h4:{en:"Conclusion",fr:"Conclusion",es:"Conclusión",de:"Schlussfolgerung"},p1:{en:"Scientific analysis confirms that a real, physical light phenomenon occurred, distinct from the sun. The event's alignment with predictions, temperature effects, light source geometry, and large-scale witness distribution rule out most natural and psychological explanations. Though the true nature of the event remains unresolved, the data supports that whatever occurred at Fatima, it involved objective and measurable physical effects, not just mass perception or coincidence.",fr:"L'analyse scientifique confirme qu'un phénomène lumineux réel et physique s'est produit, distinct du soleil. L'alignement de l'événement avec les prédictions, les effets de température, la géométrie de la source lumineuse et la distribution des témoins à grande échelle excluent la plupart des explications naturelles et psychologiques. Bien que la vraie nature de l'événement reste non résolue, les données soutiennent que quoi qu'il se soit passé à Fatima, cela impliquait des effets physiques objectifs et mesurables, pas seulement une perception de masse ou une coïncidence.",es:"El análisis científico confirma que ocurrió un fenómeno de luz real y físico, distinto del sol. La alineación del evento con las predicciones, los efectos de temperatura, la geometría de la fuente de luz y la distribución de testigos a gran escala descartan la mayoría de las explicaciones naturales y psicológicas. Aunque la verdadera naturaleza del evento sigue sin resolverse, los datos respaldan que lo que ocurrió en Fátima involucró efectos físicos objetivos y medibles, no solo percepción masiva o coincidencia.",de:"Wissenschaftliche Analysen bestätigen, dass ein reales, physikalisches Lichtphänomen auftrat, das sich von der Sonne unterschied. Die Übereinstimmung des Ereignisses mit Vorhersagen, Temperatureffekten, Lichtquellengeometrie und großflächiger Zeugenverteilung schließt die meisten natürlichen und psychologischen Erklärungen aus. Obwohl die wahre Natur des Ereignisses ungelöst bleibt, stützen die Daten die Annahme, dass das, was in Fatima geschah, objektive und messbare physikalische Effekte beinhaltete, nicht nur Massenwahrnehmung oder Zufall."}},argument:{h4:{en:"MARY AND FÁTIMA: A MODEST C-INDUCTIVE ARGUMENT FOR CATHOLICISM",fr:"MARIE ET FÁTIMA : UN ARGUMENT C-INDUCTIF MODESTE POUR LE CATHOLICISME",es:"MARÍA Y FÁTIMA: UN MODESTO ARGUMENTO C-INDUCTIVO A FAVOR DEL CATOLICISMO",de:"MARIA UND FÁTIMA: EIN BESCHEIDENES C-INDUKTIVES ARGUMENT FÜR DEN KATHOLIZISMUS"},p1:{en:"Tyler McNabb and Joseph Blado’s article in Perichoresis (2020) provides a rigorous philosophical treatment of the Miracle of Fátima. Using Bayes’ Theorem, they argue that: P(e | CH ∧ k) > P(e | ¬CH ∧ k). That is, we are more likely to expect events like Fátima within Catholicism than without it.",fr:"L'article de Tyler McNabb et Joseph Blado dans Perichoresis (2020) fournit un traitement philosophique rigoureux du Miracle de Fátima. En utilisant le théorème de Bayes, ils soutiennent que : P(e | CH ∧ k) > P(e | ¬CH ∧ k). C'est-à-dire que nous sommes plus susceptibles d'attendre des événements comme Fátima au sein du catholicisme qu'en dehors.",es:"El artículo de Tyler McNabb y Joseph Blado en Perichoresis (2020) proporciona un tratamiento filosófico riguroso del Milagro de Fátima. Usando el Teorema de Bayes, argumentan que: P(e | CH ∧ k) > P(e | ¬CH ∧ k). Es decir, es más probable que esperemos eventos como Fátima dentro del catolicismo que fuera de él.",de:"Der Artikel von Tyler McNabb und Joseph Blado in Perichoresis (2020) bietet eine rigorose philosophische Behandlung des Wunders von Fátima. Unter Verwendung des Bayes-Theorems argumentieren sie, dass: P(e | CH ∧ k) > P(e | ¬CH ∧ k). Das heißt, wir erwarten Ereignisse wie Fátima eher innerhalb des Katholizismus als ohne ihn."},pdf_name:{en:"Read the Argument (PDF)",fr:"Lire l'Argument (PDF)",es:"Leer el Argumento (PDF)",de:"Das Argument lesen (PDF)"},pdf_url:{en:"/pdfs/fatima-argument.pdf"}}},zeitoun:{h3:{en:"The Apparitions at Zeitoun: Cross-Religious Confirmation",fr:"Les Apparitions à Zeitoun : Confirmation Interreligieuse",es:"Las Apariciones en Zeitoun: Confirmación Interreligiosa",de:"Die Erscheinungen in Zeitoun: Religionsübergreifende Bestätigung"},p1:{en:"From 1968 to 1971, another astonishing series of Marian apparitions occurred, this time in Zeitoun, a suburb of Cairo, Egypt, appearing atop the domes of the Coptic Church of Saint Mary. The figure, radiating light and clothed in traditional Marian garb, would appear nightly, often floating near the domes or walking on the roof, drawing tens of thousands of spectators, including Muslims, Christians, and atheists.",fr:"De 1968 à 1971, une autre série étonnante d'apparitions mariales s'est produite, cette fois à Zeitoun, une banlieue du Caire, en Égypte, apparaissant au sommet des dômes de l'église copte de Sainte-Marie. La silhouette, rayonnant de lumière et vêtue d'un habit marial traditionnel, apparaissait chaque nuit, flottant souvent près des dômes ou marchant sur le toit, attirant des dizaines de milliers de spectateurs, y compris des musulmans, des chrétiens et des athées.",es:"De 1968 a 1971, ocurrió otra asombrosa serie de apariciones marianas, esta vez en Zeitoun, un suburbio de El Cairo, Egipto, apareciendo sobre las cúpulas de la Iglesia Copta de Santa María. La figura, radiante de luz y vestida con atuendo mariano tradicional, aparecía todas las noches, a menudo flotando cerca de las cúpulas o caminando por el techo, atrayendo a decenas de miles de espectadores, incluidos musulmanes, cristianos y ateos.",de:"Von 1968 bis 1971 ereignete sich eine weitere erstaunliche Serie von Marienerscheinungen, diesmal in Zeitoun, einem Vorort von Kairo, Ägypten, die auf den Kuppeln der koptischen Kirche der Heiligen Maria erschienen. Die Gestalt, die Licht ausstrahlte und in traditionelles Mariengewand gekleidet war, erschien nächtlich, schwebte oft in der Nähe der Kuppeln oder ging auf dem Dach umher und zog Zehntausende von Zuschauern an, darunter Muslime, Christen und Atheisten."},p2:{en:"Unlike Fátima, the Zeitoun apparitions spanned a period of over three years and were witnessed by millions. Numerous photographs were taken, and news outlets documented the phenomena extensively. The Egyptian government, through the police authorities, conducted an official investigation and declared the event genuinely supernatural.",fr:"Contrairement à Fátima, les apparitions de Zeitoun se sont étendues sur une période de plus de trois ans et ont été vues par des millions de personnes. De nombreuses photographies ont été prises et les médias ont largement documenté les phénomènes. Le gouvernement égyptien, par l'intermédiaire des autorités policières, a mené une enquête officielle et a déclaré l'événement véritablement surnaturel.",es:"A diferencia de Fátima, las apariciones de Zeitoun abarcaron un período de más de tres años y fueron presenciadas por millones. Se tomaron numerosas fotografías y los medios de comunicación documentaron los fenómenos extensamente. El gobierno egipcio, a través de las autoridades policiales, realizó una investigación oficial y declaró el evento genuinamente sobrenatural.",de:"Im Gegensatz zu Fátima erstreckten sich die Erscheinungen von Zeitoun über einen Zeitraum von mehr als drei Jahren und wurden von Millionen gesehen. Zahlreiche Fotografien wurden gemacht und Nachrichtenagenturen dokumentierten die Phänomene ausführlich. Die ägyptische Regierung führte durch die Polizeibehörden eine offizielle Untersuchung durch und erklärte das Ereignis für echt übernatürlich."},p3:{en:"From a scientific standpoint, the Zeitoun apparitions present several anomalies. Photographic analysis indicated that no physical body or support structure could be detected. Despite the intense luminosity, there was no thermal radiation signature or shadows. Electromagnetic interference was reportedly absent in the vicinity. Several observers claimed to see doves of light fly above the church, some of which reportedly vanished midair.",fr:"D'un point de vue scientifique, les apparitions de Zeitoun présentent plusieurs anomalies. L'analyse photographique a indiqué qu'aucun corps physique ou structure de support n'a pu être détecté. Malgré l'intense luminosité, il n'y avait aucune signature de rayonnement thermique ou d'ombres. L'interférence électromagnétique aurait été absente dans les environs. Plusieurs observateurs ont affirmé voir des colombes de lumière voler au-dessus de l'église, dont certaines auraient disparu en plein vol.",es:"Desde un punto de vista científico, las apariciones de Zeitoun presentan varias anomalías. El análisis fotográfico indicó que no se pudo detectar ningún cuerpo físico o estructura de soporte. A pesar de la intensa luminosidad, no hubo firma de radiación térmica ni sombras. Se informó que la interferencia electromagnética estaba ausente en las cercanías. Varios observadores afirmaron ver palomas de luz volar sobre la iglesia, algunas de las cuales supuestamente desaparecieron en el aire.",de:"Vom wissenschaftlichen Standpunkt aus weisen die Erscheinungen von Zeitoun mehrere Anomalien auf. Die fotografische Analyse ergab, dass kein physischer Körper oder Stützstruktur entdeckt werden konnte. Trotz der starken Leuchtkraft gab es keine Wärmestrahlungssignatur oder Schatten. Elektromagnetische Störungen waren in der Nähe angeblich nicht vorhanden. Mehrere Beobachter behaupteten, Lichttauben über der Kirche fliegen zu sehen, von denen einige angeblich in der Luft verschwanden."},facts:{h4:{en:"What makes Zeitoun extraordinary",fr:"Ce qui rend Zeitoun extraordinaire",es:"Lo que hace extraordinario a Zeitoun",de:"Was Zeitoun außergewöhnlich macht"},li1:{en:"First witnesses were Muslims; event later witnessed by people of all faiths (more then 1 million eyewitness).",fr:"Les premiers témoins étaient musulmans ; l'événement a ensuite été vu par des gens de toutes confessions (plus d'un million de témoins oculaires).",es:"Los primeros testigos fueron musulmanes; el evento fue presenciado más tarde por personas de todas las religiones (más de 1 millón de testigos oculares).",de:"Erste Zeugen waren Muslime; das Ereignis wurde später von Menschen aller Glaubensrichtungen bezeugt (mehr als 1 Million Augenzeugen)."},li2:{en:"The apparitions were visible for hours at a time, on multiple nights.",fr:"Les apparitions étaient visibles pendant des heures, plusieurs nuits.",es:"Las apariciones fueron visibles durante horas, en múltiples noches.",de:"Die Erscheinungen waren stundenlang sichtbar, an mehreren Nächten."},li3:{en:"Events were photographed and confirmed by government investigators.",fr:"Les événements ont été photographiés et confirmés par des enquêteurs gouvernementaux.",es:"Los eventos fueron fotografiados y confirmados por investigadores del gobierno.",de:"Ereignisse wurden fotografiert und von Regierungsermittlern bestätigt."},li4:{en:"Miraculous healings were reported, including a cured gangrenous finger.",fr:"Des guérisons miraculeuses ont été rapportées, y compris un doigt gangrené guéri.",es:"Se informaron curaciones milagrosas, incluido un dedo gangrenoso curado.",de:"Wunderbare Heilungen wurden berichtet, einschließlich eines geheilten brandigen Fingers."}},book:{title:{en:"The Marian Apparitions at Zeitoun: An Evidential Inquiry",fr:"Les Apparitions Mariales à Zeitoun : Une Enquête Probante",es:"Las Apariciones Marianas en Zeitoun: Una Investigación Evidencial",de:"Die Marienerscheinungen in Zeitoun: Eine Evidenzbasierte Untersuchung"},author:{en:"Travis Dumsday"},desc:{en:"This book explores the history of these fascinating events and critically examines every scientific explanation thus far put forward in an attempt to account for them in naturalistic terms. The author argues that, so far, these attempts have failed, and thus the Marian apparitions at Zeitoun constitute powerful evidence for the reality of the supernatural.",fr:"Ce livre explore l'histoire de ces événements fascinants et examine de manière critique chaque explication scientifique avancée jusqu'ici pour tenter de les expliquer en termes naturalistes. L'auteur soutient que, jusqu'à présent, ces tentatives ont échoué, et donc que les apparitions mariales à Zeitoun constituent une preuve puissante de la réalité du surnaturel.",es:"Este libro explora la historia de estos eventos fascinantes y examina críticamente cada explicación científica propuesta hasta el momento para intentar explicarlos en términos naturalistas. El autor argumenta que, hasta ahora, estos intentos han fallado, y por lo tanto las apariciones marianas en Zeitoun constituyen una evidencia poderosa de la realidad de lo sobrenatural.",de:"Dieses Buch untersucht die Geschichte dieser faszinierenden Ereignisse und prüft kritisch jede wissenschaftliche Erklärung, die bisher vorgebracht wurde, um sie naturalistisch zu deuten. Der Autor argumentiert, dass diese Versuche bisher gescheitert sind und somit die Marienerscheinungen in Zeitoun einen starken Beweis für die Realität des Übernatürlichen darstellen."},pdf_name:{en:"Read Excerpt (PDF)",fr:"Lire un Extrait (PDF)",es:"Leer Extracto (PDF)",de:"Auszug lesen (PDF)"},pdf_url:{en:"/pdfs/zeitoun-book.pdf"}}},guadalupe:{h3:{en:"Our Lady of Guadalupe: A Scientific and Cultural Enigma",fr:"Notre-Dame de Guadalupe : une Énigme Scientifique et Culturelle",es:"Nuestra Señora de Guadalupe: Un Enigma Científico y Cultural",de:"Unsere Liebe Frau von Guadalupe: Ein Wissenschaftliches und Kulturelles Rätsel"},p1:{en:"The apparition of Our Lady of Guadalupe in 1531 marks one of the most influential and scientifically baffling Marian events in history. According to Catholic tradition, the Virgin Mary appeared to the indigenous convert Juan Diego on Tepeyac Hill, near present-day Mexico City. She spoke to him in Nahuatl, his native language, and asked for a church to be built on the site. As proof, she instructed him to gather Castilian roses, non-native flowers that bloomed in winter, and present them to the bishop. When Juan Diego opened his tilma (cloak) to reveal the roses, an image of the Virgin was miraculously imprinted on the fabric.",fr:"L'apparition de Notre-Dame de Guadalupe en 1531 marque l'un des événements mariaux les plus influents et scientifiquement déconcertants de l'histoire. Selon la tradition catholique, la Vierge Marie est apparue au converti indigène Juan Diego sur la colline de Tepeyac, près de l'actuelle Mexico. Elle lui a parlé en nahuatl, sa langue maternelle, et a demandé qu'une église soit construite sur le site. Comme preuve, elle lui a demandé de cueillir des roses de Castille, des fleurs non indigènes qui fleurissaient en hiver, et de les présenter à l'évêque. Lorsque Juan Diego a ouvert sa tilma (manteau) pour révéler les roses, une image de la Vierge a été miraculeusement imprimée sur le tissu.",es:"La aparición de Nuestra Señora de Guadalupe en 1531 marca uno de los eventos marianos más influyentes y científicamente desconcertantes de la historia. Según la tradición católica, la Virgen María se apareció al converso indígena Juan Diego en el Cerro del Tepeyac, cerca de la actual Ciudad de México. Ella le habló en náhuatl, su lengua materna, y pidió que se construyera una iglesia en el lugar. Como prueba, le instruyó que recogiera rosas de Castilla, flores no nativas que florecían en invierno, y se las presentara al obispo. Cuando Juan Diego abrió su tilma (manto) para revelar las rosas, una imagen de la Virgen quedó milagrosamente impresa en la tela.",de:"Die Erscheinung unserer Lieben Frau von Guadalupe im Jahr 1531 markiert eines der einflussreichsten und wissenschaftlich rätselhaftesten Marienereignisse der Geschichte. Nach katholischer Tradition erschien die Jungfrau Maria dem indigenen Konvertiten Juan Diego auf dem Tepeyac-Hügel in der Nähe des heutigen Mexiko-Stadt. Sie sprach zu ihm in Nahuatl, seiner Muttersprache, und bat darum, dass an dieser Stelle eine Kirche gebaut werde. Als Beweis wies sie ihn an, kastilische Rosen zu sammeln, nicht heimische Blumen, die im Winter blühten, und sie dem Bischof zu überreichen. Als Juan Diego seine Tilma (Umhang) öffnete, um die Rosen zu enthüllen, wurde ein Bild der Jungfrau auf wundersame Weise auf den Stoff geprägt."},p2:{en:"The tilma is made of agave fiber, specifically from the genus Agave americana, which has a biochemical structure that typically breaks down due to hydrolytic and oxidative degradation within two to three decades. Yet, after nearly 500 years, the fibers remain intact and structurally stable under microscopic analysis. Scientific studies using infrared spectroscopy, scanning electron microscopy (SEM), and X-ray fluorescence (XRF) have revealed no presence of binder medium or any organic or inorganic pigments typically found in 16th-century artworks. Furthermore, under optical microscopy, the image appears to float above the surface of the fiber at a depth of approximately 0.3 mm, a phenomenon incompatible with any known printing or painting technique.",fr:"La tilma est faite de fibres d'agave, spécifiquement du genre Agave americana, qui a une structure biochimique qui se décompose généralement en raison de la dégradation hydrolytique et oxydative en deux ou trois décennies. Pourtant, après près de 500 ans, les fibres restent intactes et structurellement stables sous analyse microscopique. Des études scientifiques utilisant la spectroscopie infrarouge, la microscopie électronique à balayage (MEB) et la fluorescence X (XRF) n'ont révélé aucune présence de liant ou de pigments organiques ou inorganiques typiquement trouvés dans les œuvres d'art du XVIe siècle. De plus, sous microscopie optique, l'image semble flotter au-dessus de la surface de la fibre à une profondeur d'environ 0,3 mm, un phénomène incompatible avec toute technique connue d'impression ou de peinture.",es:"La tilma está hecha de fibra de agave, específicamente del género Agave americana, que tiene una estructura bioquímica que típicamente se descompone debido a la degradación hidrolítica y oxidativa dentro de dos o tres décadas. Sin embargo, después de casi 500 años, las fibras permanecen intactas y estructuralmente estables bajo análisis microscópico. Estudios científicos utilizando espectroscopia infrarroja, microscopía electrónica de barrido (SEM) y fluorescencia de rayos X (XRF) no han revelado presencia de medio aglutinante ni de pigmentos orgánicos o inorgánicos típicamente encontrados en obras de arte del siglo XVI. Además, bajo microscopía óptica, la imagen parece flotar sobre la superficie de la fibra a una profundidad de aproximadamente 0.3 mm, un fenómeno incompatible con cualquier técnica conocida de impresión o pintura.",de:"Die Tilma besteht aus Agavenfaser, speziell aus der Gattung Agave americana, die eine biochemische Struktur hat, die typischerweise aufgrund hydrolytischer und oxidativer Degradation innerhalb von zwei bis drei Jahrzehnten zerfällt. Doch nach fast 500 Jahren bleiben die Fasern intakt und unter mikroskopischer Analyse strukturell stabil. Wissenschaftliche Studien mit Infrarotspektroskopie, Rasterelektronenmikroskopie (REM) und Röntgenfluoreszenzanalyse (RFA) haben kein Vorhandensein von Bindemitteln oder organischen bzw. anorganischen Pigmenten ergeben, die typischerweise in Kunstwerken des 16. Jahrhunderts zu finden sind. Darüber hinaus scheint das Bild unter dem optischen Mikroskop in einer Tiefe von etwa 0,3 mm über der Oberfläche der Faser zu schweben, ein Phänomen, das mit keiner bekannten Druck- oder Maltechnik vereinbar ist."},p3:{en:"The eyes of the Virgin, when magnified using ophthalmic-grade digital enhancement and stereo microscopy, exhibit the Purkinje-Sanson effect, multiple reflections consistent with a convex, three-dimensional cornea. Embedded in the corneal reflections are micron-sized figures consistent with the positioning of historical witnesses, matching anatomical eye behavior and depth not replicable by human artistry of the time.",fr:"Les yeux de la Vierge, lorsqu'ils sont agrandis à l'aide d'une amélioration numérique de qualité ophtalmique et de la stéréomicroscopie, présentent l'effet Purkinje-Sanson, des reflets multiples compatibles avec une cornée convexe et tridimensionnelle. Intégrés dans les reflets cornéens se trouvent des figures de taille micrométrique compatibles avec le positionnement des témoins historiques, correspondant au comportement anatomique de l'œil et à une profondeur non reproductible par l'art humain de l'époque.",es:"Los ojos de la Virgen, al ser magnificados usando mejora digital de grado oftálmico y microscopía estéreo, exhiben el efecto Purkinje-Sanson: múltiples reflejos consistentes con una córnea convexa y tridimensional. Incrustadas en los reflejos corneales hay figuras de tamaño micrométrico consistentes con la posición de los testigos históricos, coincidiendo con el comportamiento anatómico del ojo y una profundidad no replicable por el arte humano de la época.",de:"Die Augen der Jungfrau zeigen bei Vergrößerung mit ophthalmologischer digitaler Verbesserung und Stereomikroskopie den Purkinje-Sanson-Effekt – mehrfache Reflexionen, die mit einer konvexen, dreidimensionalen Hornhaut übereinstimmen. Eingebettet in die Hornhautreflexionen sind mikrometergroße Figuren, die mit der Positionierung historischer Zeugen übereinstimmen und ein anatomisches Augenverhalten und eine Tiefe aufweisen, die durch menschliche Kunstfertigkeit der damaligen Zeit nicht reproduzierbar waren."},p4:{en:"The temperature of the tilma has also been recorded at 36.6ºC (98.6ºF), the typical temperature of a living human body, despite being exposed to environmental fluctuations. Moreover, following a 1921 bombing attempt using 29 sticks of dynamite placed beneath the image, the tilma and its protective glass remained unaffected, while the marble altar and surrounding metallic structures were shattered, suggesting an anomalous dispersion or absorption of blast energy that remains unexplained by standard blast physics.",fr:"La température de la tilma a également été enregistrée à 36,6ºC (98,6ºF), la température typique d'un corps humain vivant, bien qu'elle soit exposée aux fluctuations environnementales. De plus, à la suite d'une tentative d'attentat à la bombe en 1921 utilisant 29 bâtons de dynamite placés sous l'image, la tilma et son verre protecteur sont restés intacts, tandis que l'autel en marbre et les structures métalliques environnantes ont été brisés, suggérant une dispersion ou une absorption anormale de l'énergie de l'explosion qui reste inexpliquée par la physique standard des explosions.",es:"La temperatura de la tilma también se ha registrado en 36.6ºC (98.6ºF), la temperatura típica de un cuerpo humano vivo, a pesar de estar expuesta a fluctuaciones ambientales. Además, tras un intento de atentado con bomba en 1921 utilizando 29 cartuchos de dinamita colocados debajo de la imagen, la tilma y su vidrio protector permanecieron inalterados, mientras que el altar de mármol y las estructuras metálicas circundantes quedaron destrozados, lo que sugiere una dispersión o absorción anómala de la energía de la explosión que permanece inexplicada por la física estándar de explosiones.",de:"Die Temperatur der Tilma wurde ebenfalls mit 36,6ºC (98,6ºF) gemessen, der typischen Temperatur eines lebenden menschlichen Körpers, obwohl sie Umweltschwankungen ausgesetzt war. Darüber hinaus blieben nach einem Bombenanschlag im Jahr 1921 mit 29 Stangen Dynamit, die unter dem Bild platziert wurden, die Tilma und ihr Schutzglas unversehrt, während der Marmoraltar und die umliegenden Metallstrukturen zertrümmert wurden – was auf eine anomale Dispersion oder Absorption der Explosionsenergie hindeutet, die durch die Standardphysik von Explosionen unerklärt bleibt."},p5:{en:"One particularly striking detail is the pattern of stars visible on the mantle of the Virgin in the image. Astronomers have noted that the configuration of stars on her cloak corresponds not to how constellations appear from Earth, but to how they would be arranged when seen from the perspective of the sun on the morning of December 12, 1531, the very date of the apparition. This cosmic alignment, discovered through astronomical simulation and verified through modern ephemeris data, implies a heliocentric mapping that presupposes a level of cosmological knowledge not available in pre-Copernican Mesoamerica.",fr:"Un détail particulièrement frappant est le motif d'étoiles visible sur le manteau de la Vierge dans l'image. Les astronomes ont noté que la configuration des étoiles sur son manteau ne correspond pas à la façon dont les constellations apparaissent depuis la Terre, mais à la façon dont elles seraient disposées vues depuis la perspective du soleil le matin du 12 décembre 1531, la date même de l'apparition. Cet alignement cosmique, découvert grâce à la simulation astronomique et vérifié par des données d'éphémérides modernes, implique une cartographie héliocentrique qui présuppose un niveau de connaissances cosmologiques non disponible dans la Mésoamérique pré-copernicienne.",es:"Un detalle particularmente sorprendente es el patrón de estrellas visible en el manto de la Virgen en la imagen. Los astrónomos han notado que la configuración de estrellas en su capa corresponde no a cómo aparecen las constelaciones desde la Tierra, sino a cómo estarían dispuestas vistas desde la perspectiva del sol en la mañana del 12 de diciembre de 1531, la fecha misma de la aparición. Esta alineación cósmica, descubierta a través de simulación astronómica y verificada mediante datos de efemérides modernas, implica un mapeo heliocéntrico que presupone un nivel de conocimiento cosmológico no disponible en la Mesoamérica precopernicana.",de:"Ein besonders bemerkenswertes Detail ist das auf dem Mantel der Jungfrau im Bild sichtbare Sternenmuster. Astronomen haben festgestellt, dass die Konfiguration der Sterne auf ihrem Umhang nicht dem Erscheinungsbild der Sternbilder von der Erde aus entspricht, sondern wie sie aus der Perspektive der Sonne am Morgen des 12. Dezember 1531, dem Datum der Erscheinung, angeordnet wären. Diese kosmische Ausrichtung, entdeckt durch astronomische Simulation und verifiziert durch moderne Ephemeridendaten, impliziert eine heliozentrische Kartierung, die ein Niveau kosmologischen Wissens voraussetzt, das im prä-kopernikanischen Mesoamerika nicht verfügbar war."},anomalies:{h4:{en:"Scientific anomalies of the tilma",fr:"Anomalies scientifiques de la tilma",es:"Anomalías científicas de la tilma",de:"Wissenschaftliche Anomalien der Tilma"},li1:{en:"The fabric resists decay despite being 500 years old.",fr:"Le tissu résiste à la décomposition malgré ses 500 ans.",es:"La tela resiste la descomposición a pesar de tener 500 años.",de:"Der Stoff widersteht dem Zerfall, obwohl er 500 Jahre alt ist."},li2:{en:"No detectable brushstrokes or known pigments.",fr:"Pas de coups de pinceau détectables ou de pigments connus.",es:"No hay pinceladas detectables ni pigmentos conocidos.",de:"Keine erkennbaren Pinselstriche oder bekannten Pigmente."},li3:{en:"The eyes reflect human figures in their cornea.",fr:"Les yeux reflètent des figures humaines dans leur cornée.",es:"Los ojos reflejan figuras humanas en su córnea.",de:"Die Augen spiegeln menschliche Figuren in ihrer Hornhaut wider."},li4:{en:"Survived a bomb explosion that destroyed nearby structures.",fr:"A survécu à une explosion de bombe qui a détruit les structures voisines.",es:"Sobrevivió a una explosión de bomba que destruyó estructuras cercanas.",de:"Überlebte eine Bombenexplosion, die nahegelegene Strukturen zerstörte."},li5:{en:"The stars on the Virgin's cloak correspond to constellations as seen from the sun on the date of the apparition.",fr:"Les étoiles sur le manteau de la Vierge correspondent aux constellations vues du soleil à la date de l'apparition.",es:"Las estrellas en el manto de la Virgen corresponden a constelaciones vistas desde el sol en la fecha de la aparición.",de:"Die Sterne auf dem Umhang der Jungfrau entsprechen Sternbildern, wie sie von der Sonne aus am Datum der Erscheinung gesehen werden."}},pdf1_name:{en:"Mary - Miraculous Image (PDF)",fr:"Marie - Image Miraculeuse (PDF)",es:"María - Imagen Milagrosa (PDF)",de:"Maria - Wunderbares Bild (PDF)"},pdf1_url:{en:"/pdfs/guadalupe-image.pdf"},pdf2_name:{en:"Science & Guadalupe (PDF)",fr:"Science & Guadalupe (PDF)",es:"Ciencia y Guadalupe (PDF)",de:"Wissenschaft & Guadalupe (PDF)"},pdf2_url:{en:"/pdfs/guadalupe-science.pdf"}},conclusion:{h3:{en:"Conclusion",fr:"Conclusion",es:"Conclusión",de:"Schlussfolgerung"},p1:{en:"The Marian apparitions at Fátima, Zeitoun, and Guadalupe offer a cumulative case for the truth of Catholicism that is grounded in public, verifiable, and multidisciplinary evidence. To dismiss them is not only to ignore centuries of devotion but to reject eyewitness testimony, historical documentation, scientific anomaly, and theological coherence. In contrast to the narrow evidentialism of some Protestant apologetics, Catholicism offers a capacious vision, one in which the supernatural remains not only possible, but palpably real.",fr:"Les apparitions mariales à Fátima, Zeitoun et Guadalupe offrent un argument cumulatif pour la vérité du catholicisme qui est fondé sur des preuves publiques, vérifiables et multidisciplinaires. Les rejeter, c'est non seulement ignorer des siècles de dévotion, mais rejeter le témoignage oculaire, la documentation historique, l'anomalie scientifique et la cohérence théologique. Contrairement à l'évidentialisme étroit de certaines apologétiques protestantes, le catholicisme offre une vision vaste, une vision dans laquelle le surnaturel reste non seulement possible, mais palpablement réel.",es:"Las apariciones marianas en Fátima, Zeitoun y Guadalupe ofrecen un caso acumulativo a favor de la verdad del catolicismo que se basa en evidencia pública, verificable y multidisciplinaria. Descartarlas no es solo ignorar siglos de devoción, sino rechazar el testimonio de testigos oculares, la documentación histórica, la anomalía científica y la coherencia teológica. En contraste con el estrecho evidencialismo de algunas apologéticas protestantes, el catolicismo ofrece una visión amplia, una en la que lo sobrenatural sigue siendo no solo posible, sino palpablemente real.",de:"Die Marienerscheinungen in Fátima, Zeitoun und Guadalupe bieten ein kumulatives Argument für die Wahrheit des Katholizismus, das auf öffentlichen, überprüfbaren und multidisziplinären Beweisen beruht. Sie abzutun bedeutet nicht nur, Jahrhunderte der Hingabe zu ignorieren, sondern auch Augenzeugenberichte, historische Dokumentation, wissenschaftliche Anomalien und theologische Kohärenz abzulehnen. Im Gegensatz zum engen Evidentialismus einiger protestantischer Apologetik bietet der Katholizismus eine umfassende Vision, eine, in der das Übernatürliche nicht nur möglich, sondern spürbar real bleibt."},summary:{h4:{en:"To summarize, these events present:",fr:"Pour résumer, ces événements présentent :",es:"Para resumir, estos eventos presentan:",de:"Zusammenfassend präsentieren diese Ereignisse:"},li1:{en:"<strong>Predictive power:</strong> Public miracles were announced in advance.",fr:"<strong>Pouvoir prédictif :</strong> Des miracles publics ont été annoncés à l'avance.",es:"<strong>Poder predictivo:</strong> Se anunciaron milagros públicos con antelación.",de:"<strong>Vorhersagekraft:</strong> Öffentliche Wunder wurden im Voraus angekündigt."},li2:{en:"<strong>Mass eyewitness accounts:</strong> Tens of thousands to millions observed them.",fr:"<strong>Récits de témoins oculaires de masse :</strong> Des dizaines de milliers à des millions les ont observés.",es:"<strong>Relatos de testigos oculares masivos:</strong> Decenas de miles a millones los observaron.",de:"<strong>Massenaugenzeugenberichte:</strong> Zehntausende bis Millionen beobachteten sie."},li3:{en:"<strong>Scientific challenges:</strong> No natural explanations have held up.",fr:"<strong>Défis scientifiques :</strong> Aucune explication naturelle n'a tenu.",es:"<strong>Desafíos científicos:</strong> Ninguna explicación natural se ha sostenido.",de:"<strong>Wissenschaftliche Herausforderungen:</strong> Keine natürlichen Erklärungen haben standgehalten."},li4:{en:"<strong>Philosophical support:</strong> Catholic theology provides the best explanatory framework.",fr:"<strong>Soutien philosophique :</strong> La théologie catholique fournit le meilleur cadre explicatif.",es:"<strong>Apoyo filosófico:</strong> La teología católica proporciona el mejor marco explicativo.",de:"<strong>Philosophische Unterstützung:</strong> Die katholische Theologie bietet den besten Erklärungsrahmen."}}}},eucharistic:{h2:{en:"Eucharistic Miracles",fr:"Miracles Eucharistiques",es:"Milagros Eucarísticos",de:"Eucharistische Wunder"},link1:{en:"https://www.magiscenter.com/blog/contemporary-eucharistic-miracles"},link2:{en:"https://www.saintbeluga.org/eucharistic-miracles-god-under-the-microscope"},intro:{h3:{en:"Contemporary Eucharistic Miracles",fr:"Miracles Eucharistiques Contemporains",es:"Milagros Eucarísticos Contemporáneos",de:"Zeitgenössische Eucharistische Wunder"},p1:{en:"Fr. Robert Spitzer, S.J., Ph.D January 7, 2021<br><br>A true Eucharistic miracle occurs at every holy mass when the priest utters the words of consecration and the substance of the bread is transformed into the substance of Jesus’ body and the substance of the wine is transformed into the substance of His blood. However, this term is sometimes used to refer to extraordinary empirical signs of Jesus’ presence in the Eucharist, most notably, bleeding hosts, or the transmutation of a consecrated host into a piece of cardiac muscle tissue.",fr:"P. Robert Spitzer, S.J., Ph.D 7 janvier 2021<br><br>Un véritable miracle eucharistique se produit à chaque sainte messe lorsque le prêtre prononce les paroles de la consécration et que la substance du pain est transformée en la substance du corps de Jésus et la substance du vin est transformée en la substance de Son sang. Cependant, ce terme est parfois utilisé pour désigner des signes empiriques extraordinaires de la présence de Jésus dans l'Eucharistie, notamment des hosties qui saignent ou la transmutation d'une hostie consacrée en un morceau de tissu musculaire cardiaque.",es:"P. Robert Spitzer, S.J., Ph.D. 7 de enero de 2021<br><br>Un verdadero milagro eucarístico ocurre en cada santa misa cuando el sacerdote pronuncia las palabras de consagración y la sustancia del pan se transforma en la sustancia del cuerpo de Jesús y la sustancia del vino se transforma en la sustancia de Su sangre. Sin embargo, este término se utiliza a veces para referirse a signos empíricos extraordinarios de la presencia de Jesús en la Eucaristía, más notablemente, hostias sangrantes o la transmutación de una hostia consagrada en un trozo de tejido muscular cardíaco.",de:"P. Robert Spitzer, S.J., Ph.D. 7. Januar 2021<br><br>Ein wahres eucharistisches Wunder geschieht bei jeder heiligen Messe, wenn der Priester die Wandlungsworte spricht und die Substanz des Brotes in die Substanz des Leibes Jesu und die Substanz des Weines in die Substanz seines Blutes verwandelt wird. Dieser Begriff wird jedoch manchmal verwendet, um auf außergewöhnliche empirische Zeichen der Gegenwart Jesu in der Eucharistie hinzuweisen, vor allem blutende Hostien oder die Umwandlung einer geweihten Hostie in ein Stück Herzmuskelgewebe."},p2:{en:"Eucharistic miracles are quite difficult to certify scientifically, because of problems certifying that the blood came from the host or that the transmuted flesh was originally a consecrated host. Yet, there are three major contemporary eucharistic miracles that have been scientifically examined and found to be without natural or physical explanation (implying supernatural origin):",fr:"Les miracles eucharistiques sont assez difficiles à certifier scientifiquement, en raison des problèmes pour certifier que le sang provenait de l'hostie ou que la chair transmutée était à l'origine une hostie consacrée. Pourtant, il existe trois miracles eucharistiques contemporains majeurs qui ont été examinés scientifiquement et jugés sans explication naturelle ou physique (impliquant une origine surnaturelle) :",es:"Los milagros eucarísticos son bastante difíciles de certificar científicamente, debido a los problemas para certificar que la sangre provenía de la hostia o que la carne transmutada era originalmente una hostia consagrada. Sin embargo, hay tres milagros eucarísticos contemporáneos importantes que han sido examinados científicamente y se ha encontrado que no tienen explicación natural o física (lo que implica un origen sobrenatural):",de:"Eucharistische Wunder sind wissenschaftlich schwer zu zertifizieren, da es Probleme gibt, zu bescheinigen, dass das Blut von der Hostie stammte oder dass das umgewandelte Fleisch ursprünglich eine geweihte Hostie war. Dennoch gibt es drei große zeitgenössische eucharistische Wunder, die wissenschaftlich untersucht wurden und für die keine natürliche oder physikalische Erklärung gefunden wurde (was auf einen übernatürlichen Ursprung hindeutet):"},li1:{en:"Buenos Aires, Argentina – 1996 – overseen by Archbishop Bergoglio (Section I).",fr:"Buenos Aires, Argentine – 1996 – supervisé par l'archevêque Bergoglio (Section I).",es:"Buenos Aires, Argentina – 1996 – supervisado por el Arzobispo Bergoglio (Sección I).",de:"Buenos Aires, Argentinien – 1996 – beaufsichtigt von Erzbischof Bergoglio (Abschnitt I)."},li2:{en:"Tixtla, Mexico – 2006 (Section II).",fr:"Tixtla, Mexique – 2006 (Section II).",es:"Tixtla, México – 2006 (Sección II).",de:"Tixtla, Mexiko – 2006 (Abschnitt II)."},li3:{en:"Sokolka, Poland – 2008 (Section III).",fr:"Sokolka, Pologne – 2008 (Section III).",es:"Sokolka, Polonia – 2008 (Sección III).",de:"Sokolka, Polen – 2008 (Abschnitt III)."},p3:{en:"The article below describes each of these Eucharistic miracles in detail.",fr:"L'article ci-dessous décrit chacun de ces miracles eucharistiques en détail.",es:"El artículo a continuación describe cada uno de estos milagros eucarísticos en detalle.",de:"Der folgende Artikel beschreibt jedes dieser eucharistischen Wunder im Detail."},pdf_name:{en:"Contemporary Miracles (PDF)",fr:"Miracles Contemporains (PDF)",es:"Milagros Contemporáneos (PDF)",de:"Zeitgenössische Wunder (PDF)"},pdf_url:{en:"/pdfs/eucharistic-intro.pdf"}},buenosAires:{h3:{en:"I. Buenos Aires, Argentina – 1996",fr:"I. Buenos Aires, Argentine – 1996",es:"I. Buenos Aires, Argentina – 1996",de:"I. Buenos Aires, Argentinien – 1996"},p1:{en:"After a consecrated host was found desecrated and left in water, a reddish substance resembling tissue formed over days. Investigation led by Dr. Frederick Zugibe, a renowned cardiologist and forensic pathologist who analyzed the samples blindly, revealed striking biological anomalies.",fr:"Après qu'une hostie consacrée a été trouvée profanée et laissée dans l'eau, une substance rougeâtre ressemblant à des tissus s'est formée au fil des jours. L'enquête menée par le Dr Frederick Zugibe, un cardiologue et pathologiste légiste renommé qui a analysé les échantillons à l'aveugle, a révélé des anomalies biologiques frappantes.",es:"Después de que una hostia consagrada fuera encontrada profanada y dejada en agua, se formó una sustancia rojiza parecida a tejido durante días. La investigación dirigida por el Dr. Frederick Zugibe, un renombrado cardiólogo y patólogo forense que analizó las muestras a ciegas, reveló anomalías biológicas sorprendentes.",de:"Nachdem eine geweihte Hostie geschändet gefunden und in Wasser gelegt wurde, bildete sich über Tage hinweg eine rötliche Substanz, die Gewebe ähnelte. Die Untersuchung unter der Leitung von Dr. Frederick Zugibe, einem renommierten Kardiologen und forensischen Pathologen, der die Proben blind analysierte, enthüllte bemerkenswerte biologische Anomalien."},li1:{en:"<strong>Cardiac Myocyte Identification:</strong> Microscopic analysis revealed longitudinally striated fibers with central nuclei, intercalated discs, and cross striations, confirming ventricular myocardium.",fr:"<strong>Identification des Myocytes Cardiaques :</strong> L'analyse microscopique a révélé des fibres striées longitudinalement avec des noyaux centraux, des disques intercalaires et des striations transversales, confirmant le myocarde ventriculaire.",es:"<strong>Identificación de Miocitos Cardíacos:</strong> El análisis microscópico reveló fibras estriadas longitudinalmente con núcleos centrales, discos intercalados y estriaciones cruzadas, confirmando miocardio ventricular.",de:"<strong>Identifizierung von Herzmuskelzellen:</strong> Die mikroskopische Analyse zeigte längs gestreifte Fasern mit zentralen Kernen, Glanzstreifen und Querstreifung, was ventrikuläres Myokard bestätigt."},li2:{en:"<strong>Active Immune Response:</strong> Presence of intact polymorphonuclear neutrophils, macrophages, and monocytes. These cells exhibited viable morphology with no signs of apoptosis or karyorrhexis, indicating tissue inflammation in vivo, not post-mortem degeneration.",fr:"<strong>Réponse Immunitaire Active :</strong> Présence de neutrophiles polymorphonucléaires intacts, de macrophages et de monocytes. Ces cellules présentaient une morphologie viable sans signes d'apoptose ou de caryorrhexis, indiquant une inflammation tissulaire in vivo, et non une dégénérescence post-mortem.",es:"<strong>Respuesta Inmune Activa:</strong> Presencia de neutrófilos polimorfonucleares intactos, macrófagos y monocitos. Estas células exhibieron morfología viable sin signos de apoptosis o cariorrexis, indicando inflamación tisular in vivo, no degeneración post-mortem.",de:"<strong>Aktive Immunantwort:</strong> Vorhandensein intakter polymorphkerniger Neutrophiler, Makrophagen und Monozyten. Diese Zellen zeigten eine lebensfähige Morphologie ohne Anzeichen von Apoptose oder Karyorrhexis, was auf eine Gewebeentzündung in vivo hinweist, nicht auf postmortale Degeneration."},li3:{en:"<strong>Blood Typing:</strong> Confirmed as AB blood group, known for its immunological universality and rare prevalence.",fr:"<strong>Groupe Sanguin :</strong> Confirmé comme groupe sanguin AB, connu pour son universalité immunologique et sa prévalence rare.",es:"<strong>Tipificación Sanguínea:</strong> Confirmado como grupo sanguíneo AB, conocido por su universalidad inmunológica y rara prevalencia.",de:"<strong>Blutgruppenbestimmung:</strong> Bestätigt als Blutgruppe AB, bekannt für ihre immunologische Universalität und seltene Verbreitung."},li4:{en:"<strong>DNA and Decomposition:</strong> Trace human DNA was isolated, alongside wheat and plant DNA. Despite being immersed in water for several years, the tissue showed no fungal overgrowth, no breakdown of structure, and no microbial colonization.",fr:"<strong>ADN et Décomposition :</strong> Des traces d'ADN humain ont été isolées, aux côtés d'ADN de blé et de plantes. Malgré son immersion dans l'eau pendant plusieurs années, le tissu ne montrait aucune prolifération fongique, aucune rupture de structure et aucune colonisation microbienne.",es:"<strong>ADN y Descomposición:</strong> Se aisló ADN humano en trazas, junto con ADN de trigo y plantas. A pesar de estar inmerso en agua durante varios años, el tejido no mostró sobrecrecimiento de hongos, ni ruptura de estructura, ni colonización microbiana.",de:"<strong>DNA und Zersetzung:</strong> Spuren menschlicher DNA wurden isoliert, neben Weizen- und Pflanzen-DNA. Obwohl das Gewebe mehrere Jahre in Wasser getaucht war, zeigte es kein Pilzwachstum, keinen Strukturzerfall und keine mikrobielle Besiedlung."},p2:{en:"These findings challenge both decomposition models and contamination hypotheses. The presence of viable immune cells is irreconcilable with natural decay or environmental exposure.",fr:"Ces résultats remettent en question à la fois les modèles de décomposition et les hypothèses de contamination. La présence de cellules immunitaires viables est inconciliable avec la décomposition naturelle ou l'exposition environnementale.",es:"Estos hallazgos desafían tanto los modelos de descomposición como las hipótesis de contaminación. La presencia de células inmunes viables es irreconciliable con la descomposición natural o la exposición ambiental.",de:"Diese Befunde stellen sowohl Zersetzungsmodelle als auch Kontaminationshypothesen in Frage. Das Vorhandensein lebensfähiger Immunzellen ist unvereinbar mit natürlichem Zerfall oder Umwelteinwirkung."},zugibe:{h4:{en:"Scientific Analysis of the Buenos Aires Eucharistic Miracle (1996)",fr:"Analyse Scientifique du Miracle Eucharistique de Buenos Aires (1996)",es:"Análisis Científico del Milagro Eucarístico de Buenos Aires (1996)",de:"Wissenschaftliche Analyse des eucharistischen Wunders von Buenos Aires (1996)"},pdf1_name:{en:"Dr. Zugibe's Scanned Reports (PDF)",fr:"Rapports Scannés du Dr Zugibe (PDF)",es:"Informes Escaneados del Dr. Zugibe (PDF)",de:"Gescannte Berichte von Dr. Zugibe (PDF)"},pdf1_url:{en:"/pdfs/zugibe-report.pdf"},h5:{en:"Dr. Frederick Zugibe – Forensic Pathology Report",fr:"Dr Frederick Zugibe – Rapport de Pathologie Légale",es:"Dr. Frederick Zugibe – Informe de Patología Forense",de:"Dr. Frederick Zugibe – Gerichtsmedizinischer Bericht"},p1:{en:"In the investigation commissioned by the Archdiocese, Dr. Frederick Zugibe conducted an independent analysis of the sample. Unaware of the origin of the specimen, he identified it as human heart tissue from the left ventricle. His findings were both precise and extraordinary.",fr:"Dans l'enquête commandée par l'archidiocèse, le Dr Frederick Zugibe a mené une analyse indépendante de l'échantillon. Ignorant l'origine du spécimen, il l'a identifié comme du tissu cardiaque humain provenant du ventricule gauche. Ses conclusions étaient à la fois précises et extraordinaires.",es:"En la investigación encargada por la Arquidiócesis, el Dr. Frederick Zugibe realizó un análisis independiente de la muestra. Sin conocer el origen del espécimen, lo identificó como tejido cardíaco humano del ventrículo izquierdo. Sus hallazgos fueron precisos y extraordinarios.",de:"In der von der Erzdiözese in Auftrag gegebenen Untersuchung führte Dr. Frederick Zugibe eine unabhängige Analyse der Probe durch. Unwissend über die Herkunft der Probe identifizierte er sie als menschliches Herzgewebe aus der linken Herzkammer. Seine Ergebnisse waren sowohl präzise als auch außergewöhnlich."},li1:{en:"<strong>1. Identification of the Tissue: Human Heart Muscle</strong><br>Dr. Zugibe concluded: “The sample you brought me is heart muscle, specifically from the left ventricle.” This region of the heart is responsible for pumping oxygenated blood to the body. The tissue was clearly identified as human myocardial tissue, not any other organ or species.",fr:"<strong>1. Identification du Tissu : Muscle Cardiaque Humain</strong><br>Le Dr Zugibe a conclu : « L'échantillon que vous m'avez apporté est du muscle cardiaque, spécifiquement du ventricule gauche. » Cette région du cœur est responsable du pompage du sang oxygéné vers le corps. Le tissu a été clairement identifié comme du tissu myocardique humain, et non d'un autre organe ou espèce.",es:"<strong>1. Identificación del Tejido: Músculo Cardíaco Humano</strong><br>El Dr. Zugibe concluyó: “La muestra que me trajeron es músculo cardíaco, específicamente del ventrículo izquierdo”. Esta región del corazón es responsable de bombear sangre oxigenada al cuerpo. El tejido fue claramente identificado como tejido miocárdico humano, no de ningún otro órgano o especie.",de:"<strong>1. Identifizierung des Gewebes: Menschlicher Herzmuskel</strong><br>Dr. Zugibe schloss: „Die Probe, die Sie mir gebracht haben, ist Herzmuskel, speziell aus dem linken Ventrikel.“ Dieser Bereich des Herzens ist dafür verantwortlich, sauerstoffreiches Blut in den Körper zu pumpen. Das Gewebe wurde eindeutig als menschliches Myokardgewebe identifiziert, nicht als ein anderes Organ oder eine andere Spezies."},li2:{en:"<strong>2. Presence of Living Cells – Active Immune Response</strong><br>One of the most remarkable observations was the presence of white blood cells (leukocytes): “I observe white blood cells that have penetrated the tissue, and these indicate that the tissue was alive at the moment the sample was taken.” White blood cells are part of the immune system and are only active in living tissue. Their penetration into the fibers indicates an inflammatory response, proving the tissue was not dead when the sample was taken.",fr:"<strong>2. Présence de Cellules Vivantes – Réponse Immunitaire Active</strong><br>L'une des observations les plus remarquables était la présence de globules blancs (leucocytes) : « J'observe des globules blancs qui ont pénétré le tissu, et ceux-ci indiquent que le tissu était vivant au moment où l'échantillon a été prélevé. » Les globules blancs font partie du système immunitaire et ne sont actifs que dans les tissus vivants. Leur pénétration dans les fibres indique une réponse inflammatoire, prouvant que le tissu n'était pas mort lorsque l'échantillon a été prélevé.",es:"<strong>2. Presencia de Células Vivas – Respuesta Inmune Activa</strong><br>Una de las observaciones más notables fue la presencia de glóbulos blancos (leucocitos): “Observo glóbulos blancos que han penetrado el tejido, y estos indican que el tejido estaba vivo en el momento en que se tomó la muestra”. Los glóbulos blancos son parte del sistema inmunológico y solo están activos en tejido vivo. Su penetración en las fibras indica una respuesta inflamatoria, demostrando que el tejido no estaba muerto cuando se tomó la muestra.",de:"<strong>2. Vorhandensein lebender Zellen – Aktive Immunantwort</strong><br>Eine der bemerkenswertesten Beobachtungen war das Vorhandensein von weißen Blutkörperchen (Leukozyten): „Ich beobachte weiße Blutkörperchen, die in das Gewebe eingedrungen sind, und diese zeigen an, dass das Gewebe zum Zeitpunkt der Probenentnahme lebendig war.“ Weiße Blutkörperchen sind Teil des Immunsystems und nur in lebendem Gewebe aktiv. Ihr Eindringen in die Fasern weist auf eine Entzündungsreaktion hin, was beweist, dass das Gewebe zum Zeitpunkt der Entnahme nicht tot war."},li3:{en:"<strong>3. Evidence of Severe Trauma : Contraction Band Necrosis</strong><br>Dr. Zugibe also noted a pathological sign known as contraction band necrosis: “The tissue shows signs of contraction band necrosis. This occurs when a person has been severely beaten or has suffered great trauma to the chest.” This condition is only seen in living patients who have undergone extreme stress, such as torture, violent injury, or cardiac trauma. It confirms the tissue was from someone in great agony.",fr:"<strong>3. Preuve de Traumatisme Sévère : Nécrose de Bande de Contraction</strong><br>Le Dr Zugibe a également noté un signe pathologique connu sous le nom de nécrose de bande de contraction : « Le tissu montre des signes de nécrose de bande de contraction. Cela se produit lorsqu'une personne a été sévèrement battue ou a subi un grand traumatisme à la poitrine. » Cette condition n'est observée que chez les patients vivants qui ont subi un stress extrême, comme la torture, une blessure violente ou un traumatisme cardiaque. Cela confirme que le tissu provenait de quelqu'un en grande agonie.",es:"<strong>3. Evidencia de Trauma Severo : Necrosis de Banda de Contracción</strong><br>El Dr. Zugibe también notó un signo patológico conocido como necrosis de banda de contracción: “El tejido muestra signos de necrosis de banda de contracción. Esto ocurre cuando una persona ha sido severamente golpeada o ha sufrido un gran trauma en el pecho”. Esta condición solo se ve en pacientes vivos que han sufrido estrés extremo, como tortura, lesión violenta o trauma cardíaco. Confirma que el tejido provenía de alguien en gran agonía.",de:"<strong>3. Beweis für schweres Trauma : Kontraktionsbandnekrose</strong><br>Dr. Zugibe bemerkte auch ein pathologisches Zeichen, bekannt als Kontraktionsbandnekrose: „Das Gewebe zeigt Anzeichen von Kontraktionsbandnekrose. Dies tritt auf, wenn eine Person schwer geschlagen wurde oder ein großes Trauma im Brustbereich erlitten hat.“ Dieser Zustand wird nur bei lebenden Patienten beobachtet, die extremem Stress ausgesetzt waren, wie Folter, gewaltsame Verletzung oder Herztrauma. Es bestätigt, dass das Gewebe von jemandem stammte, der große Qualen litt."},li4:{en:"<strong>4. Not From a Corpse</strong><br>Finally, Dr. Zugibe emphasized that this could not be post-mortem tissue: “If this tissue had come from a dead person, these cells would not be present.” In a corpse, white blood cells disintegrate rapidly. Their active presence in this sample demonstrates that the heart tissue was alive at the time of collection.",fr:"<strong>4. Pas d'un Cadavre</strong><br>Enfin, le Dr Zugibe a souligné qu'il ne pouvait pas s'agir de tissu post-mortem : « Si ce tissu provenait d'une personne morte, ces cellules ne seraient pas présentes. » Dans un cadavre, les globules blancs se désintègrent rapidement. Leur présence active dans cet échantillon démontre que le tissu cardiaque était vivant au moment du prélèvement.",es:"<strong>4. No de un Cadáver</strong><br>Finalmente, el Dr. Zugibe enfatizó que esto no podía ser tejido post-mortem: “Si este tejido hubiera venido de una persona muerta, estas células no estarían presentes”. En un cadáver, los glóbulos blancos se desintegran rápidamente. Su presencia activa en esta muestra demuestra que el tejido cardíaco estaba vivo en el momento de la recolección.",de:"<strong>4. Nicht von einer Leiche</strong><br>Schließlich betonte Dr. Zugibe, dass dies kein postmortales Gewebe sein konnte: „Wenn dieses Gewebe von einer toten Person gestammt hätte, wären diese Zellen nicht vorhanden.“ In einer Leiche zerfallen weiße Blutkörperchen schnell. Ihre aktive Präsenz in dieser Probe zeigt, dass das Herzgewebe zum Zeitpunkt der Entnahme lebendig war."},conc:{h5:{en:"Conclusion",fr:"Conclusion",es:"Conclusión",de:"Schlussfolgerung"},p1:{en:"Dr. Zugibe's forensic analysis presents four critical conclusions:",fr:"L'analyse médico-légale du Dr Zugibe présente quatre conclusions critiques :",es:"El análisis forense del Dr. Zugibe presenta cuatro conclusiones críticas:",de:"Dr. Zugibes forensische Analyse präsentiert vier kritische Schlussfolgerungen:"},li1_c:{en:"The tissue is human heart muscle from the left ventricle.",fr:"Le tissu est du muscle cardiaque humain du ventricule gauche.",es:"El tejido es músculo cardíaco humano del ventrículo izquierdo.",de:"Das Gewebe ist menschlicher Herzmuskel aus dem linken Ventrikel."},li2_c:{en:"It was alive when sampled, based on immune cell activity.",fr:"Il était vivant lors du prélèvement, basé sur l'activité des cellules immunitaires.",es:"Estaba vivo cuando se tomó la muestra, basado en la actividad de las células inmunes.",de:"Es war bei der Entnahme lebendig, basierend auf der Aktivität der Immunzellen."},li3_c:{en:"It shows signs of severe chest trauma, indicating great suffering.",fr:"Il montre des signes de traumatisme thoracique sévère, indiquant une grande souffrance.",es:"Muestra signos de trauma torácico severo, indicando gran sufrimiento.",de:"Es zeigt Anzeichen eines schweren Brusttraumas, was auf großes Leiden hindeutet."},li4_c:{en:"It could not have come from a dead body, as vital signs were still present.",fr:"Il ne pouvait pas provenir d'un corps mort, car des signes vitaux étaient toujours présents.",es:"No podría haber venido de un cuerpo muerto, ya que los signos vitales todavía estaban presentes.",de:"Es konnte nicht von einem toten Körper stammen, da noch Lebenszeichen vorhanden waren."},p2:{en:"These findings have never been refuted by any direct scientific counter-analysis...",fr:"Ces conclusions n'ont jamais été réfutées par une contre-analyse scientifique directe...",es:"Estos hallazgos nunca han sido refutados por ningún contraanálisis científico directo...",de:"Diese Ergebnisse wurden nie durch eine direkte wissenschaftliche Gegenanalyse widerlegt..."}}}},tixtla:{h3:{en:"II. Tixtla, Mexico – 2006",fr:"II. Tixtla, Mexique – 2006",es:"II. Tixtla, México – 2006",de:"II. Tixtla, Mexiko – 2006"},p1:{en:"A host distributed during Mass began exuding red fluid resembling blood. Later laboratory tests provided critical forensic insights.",fr:"Une hostie distribuée pendant la messe a commencé à exsuder un liquide rouge ressemblant à du sang. Des tests de laboratoire ultérieurs ont fourni des informations médico-légales critiques.",es:"Una hostia distribuida durante la Misa comenzó a exudar un fluido rojo parecido a la sangre. Pruebas de laboratorio posteriores proporcionaron conocimientos forenses críticos.",de:"Eine während der Messe verteilte Hostie begann, eine rote Flüssigkeit abzusondern, die Blut ähnelte. Spätere Labortests lieferten wichtige forensische Erkenntnisse."},li1:{en:"<strong>Hemoglobin Detection:</strong> Immunochromatographic assays confirmed presence of human hemoglobin (HbA). Microscopy identified numerous erythrocytes with biconcave morphology and nucleated leukocytes.",fr:"<strong>Détection de l'Hémoglobine :</strong> Les essais immunochromatographiques ont confirmé la présence d'hémoglobine humaine (HbA). La microscopie a identifié de nombreux érythrocytes à morphologie biconcave et des leucocytes nucléés.",es:"<strong>Detección de Hemoglobina:</strong> Ensayos inmunocromatográficos confirmaron la presencia de hemoglobina humana (HbA). La microscopía identificó numerosos eritrocitos con morfología bicóncava y leucocitos nucleados.",de:"<strong>Hämoglobin-Nachweis:</strong> Immunchromatographische Tests bestätigten das Vorhandensein von menschlichem Hämoglobin (HbA). Die Mikroskopie identifizierte zahlreiche Erythrozyten mit bikonkaver Morphologie und kernhaltige Leukozyten."},li2:{en:"<strong>Histopathology:</strong> Positive staining for glycophorin A, a sialoglycoprotein exclusive to human red blood cell membranes. Presence of macrophages and neutrophils, consistent with acute inflammatory reaction.",fr:"<strong>Histopathologie :</strong> Coloration positive pour la glycophorine A, une sialoglycoprotéine exclusive aux membranes des globules rouges humains. Présence de macrophages et de neutrophiles, compatible avec une réaction inflammatoire aiguë.",es:"<strong>Histopatología:</strong> Tinción positiva para glicoforina A, una sialoglicoproteína exclusiva de las membranas de glóbulos rojos humanos. Presencia de macrófagos y neutrófilos, consistente con una reacción inflamatoria aguda.",de:"<strong>Histopathologie:</strong> Positive Färbung für Glykophorin A, ein Sialoglykoprotein, das ausschließlich auf menschlichen Erythrozytenmembranen vorkommt. Vorhandensein von Makrophagen und Neutrophilen, konsistent mit einer akuten Entzündungsreaktion."},li3:{en:"<strong>Blood Type and Rh Factor:</strong> Confirmed AB blood type, Rh-negative, using both agglutination and immunofluorescence.",fr:"<strong>Groupe Sanguin et Facteur Rh :</strong> Groupe sanguin AB confirmé, Rh négatif, utilisant à la fois l'agglutination et l'immunofluorescence.",es:"<strong>Tipo de Sangre y Factor Rh:</strong> Confirmado tipo de sangre AB, Rh negativo, utilizando tanto aglutinación como inmunofluorescencia.",de:"<strong>Blutgruppe und Rh-Faktor:</strong> Bestätigte Blutgruppe AB, Rh-negativ, unter Verwendung von sowohl Agglutination als auch Immunfluoreszenz."},li4:{en:"<strong>DNA Analysis:</strong> DNA was fragmented but traceable to human tissue. No dominant fungal, bacterial, or environmental DNA found.",fr:"<strong>Analyse ADN :</strong> L'ADN était fragmenté mais traçable au tissu humain. Aucun ADN fongique, bactérien ou environnemental dominant trouvé.",es:"<strong>Análisis de ADN:</strong> El ADN estaba fragmentado pero rastreable a tejido humano. No se encontró ADN fúngico, bacteriano o ambiental dominante.",de:"<strong>DNA-Analyse:</strong> Die DNA war fragmentiert, aber auf menschliches Gewebe zurückführbar. Keine dominante Pilz-, Bakterien- oder Umwelt-DNA gefunden."},li5:{en:"Despite three years of storage, the tissue exhibited no signs of decomposition or contamination. The immunological profile and antigen specificity contradict the hypothesis of bacterial mimicry.",fr:"Malgré trois ans de stockage, le tissu ne présentait aucun signe de décomposition ou de contamination. Le profil immunologique et la spécificité antigénique contredisent l'hypothèse du mimétisme bactérien.",es:"A pesar de tres años de almacenamiento, el tejido no exhibió signos de descomposición o contaminación. El perfil inmunológico y la especificidad antigénica contradicen la hipótesis de mimetismo bacteriano.",de:"Trotz dreijähriger Lagerung zeigte das Gewebe keine Anzeichen von Zersetzung oder Kontamination. Das immunologische Profil und die Antigenspezifität widersprechen der Hypothese der bakteriellen Mimikry."}},sokolka:{h3:{en:"III. Sokolka, Poland – 2008",fr:"III. Sokolka, Pologne – 2008",es:"III. Sokolka, Polonia – 2008",de:"III. Sokolka, Polen – 2008"},p1:{en:"A host fell during Mass and was left to dissolve in water per protocol. A week later, a reddish clot formed, which was subjected to forensic microscopy.",fr:"Une hostie est tombée pendant la messe et a été laissée à dissoudre dans l'eau selon le protocole. Une semaine plus tard, un caillot rougeâtre s'est formé, qui a été soumis à la microscopie forensique.",es:"Una hostia cayó durante la Misa y se dejó disolver en agua según el protocolo. Una semana después, se formó un coágulo rojizo, que fue sometido a microscopía forense.",de:"Eine Hostie fiel während der Messe herunter und wurde gemäß Protokoll in Wasser aufgelöst. Eine Woche später bildete sich ein rötliches Gerinnsel, das einer forensischen Mikroskopie unterzogen wurde."},li1:{en:"<strong>Structural Fusion:</strong> Transmission electron microscopy (TEM) showed seamless integration of cardiac fibers with wheat starch granules. This was not superficial adhesion; instead, there was continuity of plasma membranes, suggesting biological incorporation, not mechanical manipulation.",fr:"<strong>Fusion Structurelle :</strong> La microscopie électronique à transmission (TEM) a montré une intégration transparente des fibres cardiaques avec les granules d'amidon de blé. Ce n'était pas une adhésion superficielle ; il y avait plutôt une continuité des membranes plasmiques, suggérant une incorporation biologique, et non une manipulation mécanique.",es:"<strong>Fusión Estructural:</strong> La microscopía electrónica de transmisión (TEM) mostró una integración perfecta de fibras cardíacas con gránulos de almidón de trigo. Esto no fue adhesión superficial; en cambio, hubo continuidad de las membranas plasmáticas, sugiriendo incorporación biológica, no manipulación mecánica.",de:"<strong>Strukturelle Fusion:</strong> Transmissions-Elektronenmikroskopie (TEM) zeigte eine nahtlose Integration von Herzfasern mit Weizenstärkekörnern. Dies war keine oberflächliche Adhäsion; stattdessen gab es eine Kontinuität der Plasmamembranen, was auf biologische Einbindung, nicht mechanische Manipulation hindeutet."},li2:{en:"<strong>Cardiac Tissue Confirmation:</strong> Identified as left ventricular myocardium, including sarcomeric structure, intercalated discs, and evidence of vascularization. Myocytes showed pathological stress, such as nuclear pyknosis and cytoplasmic vacuolization.",fr:"<strong>Confirmation du Tissu Cardiaque :</strong> Identifié comme myocarde ventriculaire gauche, incluant la structure sarcomérique, les disques intercalaires et la preuve de vascularisation. Les myocytes montraient un stress pathologique, tel que la pycnose nucléaire et la vacuolisation cytoplasmique.",es:"<strong>Confirmación de Tejido Cardíaco:</strong> Identificado como miocardio ventricular izquierdo, incluyendo estructura sarcomérica, discos intercalados y evidencia de vascularización. Los miocitos mostraron estrés patológico, como picnosis nuclear y vacuolización citoplasmática.",de:"<strong>Bestätigung von Herzgewebe:</strong> Identifiziert als linkes ventrikuläres Myokard, einschließlich Sarkomerstruktur, Glanzstreifen und Nachweis von Vaskularisierung. Myozyten zeigten pathologischen Stress, wie Kernpyknose und zytoplasmatische Vakuolisierung."},li3:{en:"<strong>DNA Profiling:</strong> Both nuclear and mitochondrial DNA matched human origin. Samples were compared to known handlers with no genetic matches, dismissing contamination.",fr:"<strong>Profilage ADN :</strong> L'ADN nucléaire et mitochondrial correspondait à l'origine humaine. Les échantillons ont été comparés aux manipulateurs connus sans correspondance génétique, écartant la contamination.",es:"<strong>Perfil de ADN:</strong> Tanto el ADN nuclear como el mitocondrial coincidieron con el origen humano. Las muestras se compararon con manipuladores conocidos sin coincidencias genéticas, descartando la contaminación.",de:"<strong>DNA-Profilierung:</strong> Sowohl nukleäre als auch mitochondriale DNA stimmten mit menschlichem Ursprung überein. Proben wurden mit bekannten Handhabern verglichen, ohne genetische Übereinstimmungen, was Kontamination ausschließt."},li4:{en:"<strong>Microbial Exclusion:</strong> Microbiological swabs and cultures found no significant bacterial or fungal presence. Tests specifically excluded Serratia marcescens and other pigment-producing microorganisms.",fr:"<strong>Exclusion Microbienne :</strong> Les écouvillons et cultures microbiologiques n'ont trouvé aucune présence bactérienne ou fongique significative. Les tests ont spécifiquement exclu Serratia marcescens et d'autres micro-organismes producteurs de pigments.",es:"<strong>Exclusión Microbiana:</strong> Los hisopos y cultivos microbiológicos no encontraron presencia bacteriana o fúngica significativa. Las pruebas excluyeron específicamente Serratia marcescens y otros microorganismos productores de pigmentos.",de:"<strong>Mikrobieller Ausschluss:</strong> Mikrobiologische Abstriche und Kulturen fanden keine signifikante bakterielle oder pilzliche Präsenz. Tests schlossen spezifisch Serratia marcescens und andere pigmentproduzierende Mikroorganismen aus."},p2:{en:"This case is perhaps the most visually and structurally remarkable, demonstrating cross-matrix biological continuity between bread and tissue, observing how the heart muscle fibers and the bread are inextricably interwoven in a way that no human technology could replicate.",fr:"Ce cas est peut-être le plus visuellement et structurellement remarquable, démontrant une continuité biologique inter-matricielle entre le pain et le tissu, observant comment les fibres musculaires cardiaques et le pain sont inextricablement entrelacés d'une manière qu'aucune technologie humaine ne pourrait reproduire.",es:"Este caso es quizás el más visual y estructuralmente notable, demostrando continuidad biológica entre matrices de pan y tejido, observando cómo las fibras del músculo cardíaco y el pan están inextricablemente entrelazados de una manera que ninguna tecnología humana podría replicar.",de:"Dieser Fall ist vielleicht visuell und strukturell am bemerkenswertesten und demonstriert eine biologische Kontinuität über Matrizen hinweg zwischen Brot und Gewebe, wobei beobachtet wird, wie die Herzmuskelfasern und das Brot untrennbar miteinander verwoben sind, auf eine Weise, die keine menschliche Technologie replizieren könnte."}},lanciano:{h3:{en:"Medical Report of Lanciano (8th Century)",fr:"Rapport Médical de Lanciano (VIIIe Siècle)",es:"Informe Médico de Lanciano (Siglo VIII)",de:"Medizinischer Bericht von Lanciano (8. Jahrhundert)"},vid1:{en:"Dr. Linoli's Report on Lanciano",fr:"Rapport du Dr Linoli sur Lanciano",es:"Informe del Dr. Linoli sobre Lanciano",de:"Dr. Linolis Bericht über Lanciano"},h4:{en:"Summary of Scientific Findings",fr:"Résumé des Conclusions Scientifiques",es:"Resumen de Hallazgos Científicos",de:"Zusammenfassung der wissenschaftlichen Ergebnisse"},findings:{p1_intro:{en:"Dr. Linoli’s conclusions are divided into several key points, all supporting the authenticity of the material as real human tissue and blood, with properties that challenge scientific explanation.",fr:"Les conclusions du Dr Linoli sont divisées en plusieurs points clés, soutenant tous l'authenticité du matériel en tant que tissu et sang humains réels, avec des propriétés qui défient l'explication scientifique.",es:"Las conclusiones del Dr. Linoli se dividen en varios puntos clave, todos apoyando la autenticidad del material como tejido y sangre humanos reales, con propiedades que desafían la explicación científica.",de:"Dr. Linolis Schlussfolgerungen gliedern sich in mehrere Schlüsselpunkte, die alle die Authentizität des Materials als echtes menschliches Gewebe und Blut stützen, mit Eigenschaften, die eine wissenschaftliche Erklärung herausfordern."},li1_title:{en:"1. Presence of Human Blood Components",fr:"1. Présence de Composants Sanguins Humains",es:"1. Presencia de Componentes Sanguíneos Humanos",de:"1. Vorhandensein menschlicher Blutbestandteile"},li1_desc:{en:"The blood was confirmed to be genuine through the presence of hemoglobin and alkaline hematin, using layer chromatography:",fr:"Le sang a été confirmé comme authentique par la présence d'hémoglobine et d'hématine alcaline, en utilisant la chromatographie sur couche :",es:"Se confirmó que la sangre era genuina a través de la presencia de hemoglobina y hematina alcalina, utilizando cromatografía de capa:",de:"Das Blut wurde durch das Vorhandensein von Hämoglobin und alkalischer Hämatin mittels Schichtchromatographie als echt bestätigt:"},li1_quote:{en:"The blood of the Eucharistic miracle of Lanciano was truly such based on the demonstration of hemoglobin [and] alkaline hematin within layer chromatography.",fr:"Le sang du miracle eucharistique de Lanciano était vraiment tel, basé sur la démonstration d'hémoglobine [et] d'hématine alcaline dans la chromatographie sur couche.",es:"La sangre del milagro eucarístico de Lanciano era verdaderamente tal basada en la demostración de hemoglobina [y] hematina alcalina dentro de la cromatografía de capa.",de:"Das Blut des eucharistischen Wunders von Lanciano war wahrhaftig solches, basierend auf dem Nachweis von Hämoglobin [und] alkalischem Hämatin innerhalb der Schichtchromatographie."},li2_title:{en:"2. Identification of Myocardial Tissue (Human Heart Muscle)",fr:"2. Identification du Tissu Myocardique (Muscle Cardiaque Humain)",es:"2. Identificación de Tejido Miocárdico (Músculo Cardíaco Humano)",de:"2. Identifizierung von Myokardgewebe (Menschlicher Herzmuskel)"},li2_desc:{en:"The solid part (flesh) was determined to be striated muscle tissue, specifically myocardium (heart muscle), as proven by the syncytial structure of the fibers:",fr:"La partie solide (chair) a été déterminée comme étant du tissu musculaire strié, spécifiquement du myocarde (muscle cardiaque), comme prouvé par la structure syncytiale des fibres :",es:"La parte sólida (carne) se determinó que era tejido muscular estriado, específicamente miocardio (músculo cardíaco), como lo demuestra la estructura sincitial de las fibras:",de:"Der feste Teil (Fleisch) wurde als quergestreiftes Muskelgewebe bestimmt, spezifisch Myokard (Herzmuskel), wie durch die synzytiale Struktur der Fasern bewiesen:"},li2_quote:{en:"The flesh was made up of striated muscle tissue which due to the syncytial union of the fibers proves to belong to the myocardium.",fr:"La chair était constituée de tissu musculaire strié qui, en raison de l'union syncytiale des fibres, s'avère appartenir au myocarde.",es:"La carne estaba compuesta de tejido muscular estriado que debido a la unión sincitial de las fibras demuestra pertenecer al miocardio.",de:"Das Fleisch bestand aus quergestreiftem Muskelgewebe, das aufgrund der synzytialen Verbindung der Fasern beweist, dass es zum Myokard gehört."},li3_title:{en:"3. Confirmation of Human Origin",fr:"3. Confirmation de l'Origine Humaine",es:"3. Confirmación de Origen Humano",de:"3. Bestätigung menschlichen Ursprungs"},li3_desc:{en:"Using immunological testing, both the flesh and blood were confirmed to be of human origin:",fr:"En utilisant des tests immunologiques, la chair et le sang ont été confirmés comme étant d'origine humaine :",es:"Utilizando pruebas inmunológicas, se confirmó que tanto la carne como la sangre eran de origen humano:",de:"Mittels immunologischer Tests wurde bestätigt, dass sowohl das Fleisch als auch das Blut menschlichen Ursprungs sind:"},li3_quote:{en:"Flesh and blood belong to the human species as ascertained based on the zonal precipitation reaction of Oudin-Hoeff.",fr:"La chair et le sang appartiennent à l'espèce humaine comme constaté sur la base de la réaction de précipitation zonale d'Oudin-Hoeff.",es:"La carne y la sangre pertenecen a la especie humana según lo comprobado en base a la reacción de precipitación zonal de Oudin-Hoeff.",de:"Fleisch und Blut gehören zur menschlichen Spezies, wie basierend auf der zonalen Präzipitationsreaktion von Oudin-Hoeff festgestellt wurde."},li4_title:{en:"4. AB Blood Type in Both Flesh and Blood",fr:"4. Groupe Sanguin AB dans la Chair et le Sang",es:"4. Tipo de Sangre AB tanto en la Carne como en la Sangre",de:"4. Blutgruppe AB in sowohl Fleisch als auch Blut"},li4_desc:{en:"Through the absorption-elution method, the blood type was identified as AB, which is the same in both the blood and the tissue:",fr:"Par la méthode d'absorption-élution, le groupe sanguin a été identifié comme AB, qui est le même dans le sang et le tissu :",es:"A través del método de absorción-elución, el tipo de sangre se identificó como AB, que es el mismo tanto en la sangre como en el tejido:",de:"Durch die Absorptions-Elutions-Methode wurde die Blutgruppe als AB identifiziert, was sowohl im Blut als auch im Gewebe gleich ist:"},li4_quote:{en:"The blood group determined by the absorption-elution method was identical, AB, in the flesh and blood.",fr:"Le groupe sanguin déterminé par la méthode d'absorption-élution était identique, AB, dans la chair et le sang.",es:"El grupo sanguíneo determinado por el método de absorción-elución fue idéntico, AB, en la carne y la sangre.",de:"Die durch die Absorptions-Elutions-Methode bestimmte Blutgruppe war identisch, AB, in Fleisch und Blut."},li5_title:{en:"5. Protein Profile Matches That of Normal Human Blood",fr:"5. Le Profil Protéique Correspond à Celui du Sang Humain Normal",es:"5. El Perfil Proteico Coincide con el de la Sangre Humana Normal",de:"5. Proteinprofil entspricht dem von normalem menschlichem Blut"},li5_desc:{en:"The serum protein profile matched that of freshly drawn human blood, including Albumin and Globulins in normal ratios:",fr:"Le profil des protéines sériques correspondait à celui du sang humain fraîchement prélevé, incluant l'Albumine et les Globulines dans des ratios normaux :",es:"El perfil de proteínas séricas coincidía con el de sangre humana recién extraída, incluyendo Albúmina y Globulinas en proporciones normales:",de:"Das Serumproteinprofil entsprach dem von frisch entnommenem menschlichem Blut, einschließlich Albumin und Globulinen in normalen Verhältnissen:"},li5_quote:{en:"Proteins have been demonstrated in the blood elution liquid fractioned in the percentage ratios that occur in the serum protein framework of normal fresh blood.",fr:"Des protéines ont été démontrées dans le liquide d'élution sanguine fractionné dans les pourcentages qui se produisent dans le cadre des protéines sériques du sang frais normal.",es:"Se han demostrado proteínas en el líquido de elución de sangre fraccionado en las proporciones porcentuales que ocurren en el marco de proteínas séricas de sangre fresca normal.",de:"Proteine wurden in der Blutelutionsflüssigkeit nachgewiesen, fraktioniert in den prozentualen Verhältnissen, die im Serumproteinrahmen von normalem frischem Blut vorkommen."},li6_title:{en:"6. Presence of Electrolytes and Elevated Calcium",fr:"6. Présence d'Électrolytes et Calcium Élevé",es:"6. Presencia de Electrolitos y Calcio Elevado",de:"6. Vorhandensein von Elektrolyten und erhöhtem Kalzium"},li6_desc:{en:"The blood samples contained Chlorides, Phosphorus, Potassium, Sodium, and a significantly elevated level of calcium:",fr:"Les échantillons de sang contenaient des Chlorures, du Phosphore, du Potassium, du Sodium et un niveau significativement élevé de calcium :",es:"Las muestras de sangre contenían Cloruros, Fósforo, Potasio, Sodio y un nivel significativamente elevado de calcio:",de:"Die Blutproben enthielten Chloride, Phosphor, Kalium, Natrium und einen signifikant erhöhten Kalziumspiegel:"},li6_quote:{en:"Chlorides, phosphorus, potassium and sodium were found in the blood, while calcium was significantly increased.",fr:"Des chlorures, du phosphore, du potassium et du sodium ont été trouvés dans le sang, tandis que le calcium était significativement augmenté.",es:"Se encontraron cloruros, fósforo, potasio y sodio en la sangre, mientras que el calcio estaba significativamente aumentado.",de:"Chloride, Phosphor, Kalium und Natrium wurden im Blut gefunden, während Kalzium signifikant erhöht war."}},freshness:{h5:{en:"Anomalous Freshness of the Samples",fr:"Fraîcheur Anormale des Échantillons",es:"Frescura Anómala de las Muestras",de:"Anomale Frische der Proben"},p1:{en:"One of the most striking aspects of the analysis was the observation that the blood appeared fresh, despite being over 1,200 years old.",fr:"L'un des aspects les plus frappants de l'analyse a été l'observation que le sang semblait frais, bien qu'il ait plus de 1 200 ans.",es:"Uno de los aspectos más sorprendentes del análisis fue la observación de que la sangre parecía fresca, a pesar de tener más de 1,200 años.",de:"Einer der auffälligsten Aspekte der Analyse war die Beobachtung, dass das Blut frisch erschien, obwohl es über 1.200 Jahre alt ist."},quote:{en:"It was amazing how he stated that this appeared to be normal fresh blood. How can 1200-year-old blood appear to be fresh?",fr:"C'était incroyable comment il a déclaré que cela semblait être du sang frais normal. Comment du sang vieux de 1200 ans peut-il paraître frais ?",es:"Fue asombroso cómo declaró que esto parecía ser sangre fresca normal. ¿Cómo puede la sangre de 1200 años parecer fresca?",de:"Es war erstaunlich, wie er feststellte, dass dies normales frisches Blut zu sein schien. Wie kann 1200 Jahre altes Blut frisch erscheinen?"},p2:{en:"This characteristic defies known principles of biology and natural preservation and remains one of the key scientific anomalies pointing to the miraculous nature of the event.",fr:"Cette caractéristique défie les principes connus de la biologie et de la préservation naturelle et reste l'une des anomalies scientifiques clés pointant vers la nature miraculeuse de l'événement.",es:"Esta característica desafía los principios conocidos de la biología y la preservación natural y sigue siendo una de las anomalías científicas clave que apuntan a la naturaleza milagrosa del evento.",de:"Dieses Merkmal widerspricht bekannten Prinzipien der Biologie und natürlichen Konservierung und bleibt eine der wichtigsten wissenschaftlichen Anomalien, die auf die wundersame Natur des Ereignisses hinweisen."}},conclusion:{h5:{en:"Conclusion",fr:"Conclusion",es:"Conclusión",de:"Schlussfolgerung"},p1_methods:{en:"Dr. Linoli’s investigation employed modern medical and scientific techniques, including:",fr:"L'enquête du Dr Linoli a utilisé des techniques médicales et scientifiques modernes, incluant :",es:"La investigación del Dr. Linoli empleó técnicas médicas y científicas modernas, incluyendo:",de:"Dr. Linolis Untersuchung verwendete moderne medizinische und wissenschaftliche Techniken, darunter:"},li_methods1:{en:"Histological analysis of muscle fibers",fr:"Analyse histologique des fibres musculaires",es:"Análisis histológico de fibras musculares",de:"Histologische Analyse von Muskelfasern"},li_methods2:{en:"Immunological testing for species identification",fr:"Tests immunologiques pour l'identification des espèces",es:"Pruebas inmunológicas para identificación de especies",de:"Immunologische Tests zur Artenbestimmung"},li_methods3:{en:"Biochemical profiling of blood contents",fr:"Profilage biochimique du contenu sanguin",es:"Perfil bioquímico del contenido sanguíneo",de:"Biochemisches Profiling von Blutbestandteilen"},li_methods4:{en:"Serological identification of blood group",fr:"Identification sérologique du groupe sanguin",es:"Identificación serológica del grupo sanguíneo",de:"Serologische Bestimmung der Blutgruppe"},p2_results:{en:"These techniques revealed that the samples are:",fr:"Ces techniques ont révélé que les échantillons sont :",es:"Estas técnicas revelaron que las muestras son:",de:"Diese Techniken zeigten, dass die Proben sind:"},li_results1:{en:"Human myocardial tissue",fr:"Tissu myocardique humain",es:"Tejido miocárdico humano",de:"Menschliches Myokardgewebe"},li_results2:{en:"Human AB blood",fr:"Sang humain AB",es:"Sangre humana AB",de:"Menschliches AB-Blut"},li_results3:{en:"Biochemically active with preserved protein structure",fr:"Biochimiquement actif avec structure protéique préservée",es:"Bioquímicamente activo con estructura proteica preservada",de:"Biochemisch aktiv mit erhaltener Proteinstruktur"},li_results4:{en:"Physiologically similar to fresh samples, despite originating in the 8th century",fr:"Physiologiquement similaire à des échantillons frais, bien qu'originaires du VIIIe siècle",es:"Fisiológicamente similar a muestras frescas, a pesar de originarse en el siglo VIII",de:"Physiologisch ähnlich wie frische Proben, trotz Ursprung im 8. Jahrhundert"},p3_final:{en:"The inexplicable preservation and biological integrity of the samples suggest that no natural explanation suffices, reinforcing the traditional claim of a Eucharistic miracle.",fr:"La préservation inexplicable et l'intégrité biologique des échantillons suggèrent qu'aucune explication naturelle ne suffit, renforçant l'affirmation traditionnelle d'un miracle eucharistique.",es:"La preservación inexplicable y la integridad biológica de las muestras sugieren que ninguna explicación natural es suficiente, reforzando la afirmación tradicional de un milagro eucarístico.",de:"Die unerklärliche Erhaltung und biologische Integrität der Proben legen nahe, dass keine natürliche Erklärung ausreicht, was die traditionelle Behauptung eines eucharistischen Wunders bekräftigt."}}},critique:{h4:{en:"Scientific Rebuttal to the JFSR Article",fr:"Réfutation Scientifique à l'Article JFSR",es:"Refutación Científica al Artículo del JFSR",de:"Wissenschaftliche Widerlegung des JFSR-Artikels"},abs:{en:'This paper offers a critical examination of the 2024 article by Kearse and Ligaj, published in the Journal of Forensic Science and Research, titled "Scientific Analysis of Eucharistic Miracles: Importance of a Standardization in Evaluation". The article attempts to propose naturalistic explanations for reported Eucharistic miracles by replicating some visual characteristics of "bleeding hosts" using decomposed, unconsecrated communion wafers.<br><br>In contrast, this review presents rigorous scientific and histopathological evidence from three contemporary Eucharistic miracles, Buenos Aires (1996), Tixtla (2006), and Sokółka (2008), to demonstrate that the findings of Kearse and Ligaj fail to account for several key phenomena, particularly those involving integrated cardiac tissue, immunological cellular structures, and consistent biochemical markers such as blood typing. This document also integrates counterpoints to claims found in a related paper by Kearse, "The relics of Jesus and Eucharistic miracles: scientific analysis of shared AB blood type," published in Forensic Science, Medicine and Pathology.',fr:"Cet article propose un examen critique de l'article de 2024 de Kearse et Ligaj, publié dans le Journal of Forensic Science and Research, intitulé « Scientific Analysis of Eucharistic Miracles: Importance of a Standardization in Evaluation ». L'article tente de proposer des explications naturalistes pour les miracles eucharistiques rapportés en reproduisant certaines caractéristiques visuelles des « hosties saignantes » à l'aide d'hosties de communion non consacrées et décomposées.<br><br>En revanche, cette revue présente des preuves scientifiques et histopathologiques rigoureuses provenant de trois miracles eucharistiques contemporains, Buenos Aires (1996), Tixtla (2006) et Sokółka (2008), pour démontrer que les conclusions de Kearse et Ligaj ne parviennent pas à expliquer plusieurs phénomènes clés, en particulier ceux impliquant du tissu cardiaque intégré, des structures cellulaires immunologiques et des marqueurs biochimiques cohérents tels que le groupage sanguin. Ce document intègre également des contre-points aux affirmations trouvées dans un article connexe de Kearse, « The relics of Jesus and Eucharistic miracles: scientific analysis of shared AB blood type », publié dans Forensic Science, Medicine and Pathology.",es:'Este artículo ofrece un examen crítico del artículo de 2024 de Kearse y Ligaj, publicado en el Journal of Forensic Science and Research, titulado "Scientific Analysis of Eucharistic Miracles: Importance of a Standardization in Evaluation". El artículo intenta proponer explicaciones naturalistas para los milagros eucarísticos reportados replicando algunas características visuales de "hostias sangrantes" utilizando obleas de comunión no consagradas y descompuestas.<br><br>En contraste, esta revisión presenta evidencia científica e histopatológica rigurosa de tres milagros eucarísticos contemporáneos, Buenos Aires (1996), Tixtla (2006) y Sokółka (2008), para demostrar que los hallazgos de Kearse y Ligaj no logran explicar varios fenómenos clave, particularmente aquellos que involucran tejido cardíaco integrado, estructuras celulares inmunológicas y marcadores bioquímicos consistentes como el tipaje sanguíneo. Este documento también integra contrapuntos a las afirmaciones encontradas en un artículo relacionado de Kearse, "The relics of Jesus and Eucharistic miracles: scientific analysis of shared AB blood type", publicado en Forensic Science, Medicine and Pathology.',de:"Dieses Papier bietet eine kritische Untersuchung des Artikels von Kearse und Ligaj aus dem Jahr 2024, veröffentlicht im Journal of Forensic Science and Research, mit dem Titel „Scientific Analysis of Eucharistic Miracles: Importance of a Standardization in Evaluation“. Der Artikel versucht, naturalistische Erklärungen für berichtete eucharistische Wunder vorzuschlagen, indem er einige visuelle Merkmale von „blutenden Hostien“ unter Verwendung zersetzter, ungeweihter Kommunionwaffeln repliziert.<br><br>Im Gegensatz dazu präsentiert diese Rezension strenge wissenschaftliche und histopathologische Beweise aus drei zeitgenössischen eucharistischen Wundern, Buenos Aires (1996), Tixtla (2006) und Sokółka (2008), um zu demonstrieren, dass die Ergebnisse von Kearse und Ligaj mehrere Schlüsselphänomene nicht erklären, insbesondere solche, die integriertes Herzgewebe, immunologische Zellstrukturen und konsistente biochemische Marker wie Blutgruppenbestimmung beinhalten. Dieses Dokument integriert auch Gegenargumente zu Behauptungen aus einem verwandten Papier von Kearse, „The relics of Jesus and Eucharistic miracles: scientific analysis of shared AB blood type“, veröffentlicht in Forensic Science, Medicine and Pathology."},p_intro:{en:"Eucharistic miracles, in the theological sense, refer to instances in which the substance of bread and wine are visibly transformed into actual flesh and blood following the consecration during the Holy Mass. In several well-documented contemporary cases, this transformation has been claimed to result in the manifestation of human myocardial tissue, specifically ventricular myocardium, containing intact white blood cells and verified to be of human origin through serological and molecular tests. The three miracles examined here were subjected to scientific investigation, often involving clinical pathologists, cardiologists, molecular biologists, and forensic experts.<br><br>The article by Kearse and Ligaj aims to explain these phenomena through fungal colonization (Epicoccum spp.) and bacterial growth (Serratia marcescens). However, their claims, while applicable to unconsecrated, contaminated hosts, fail to address the highly specific histopathological and biochemical signatures found in actual consecrated Eucharistic samples.",fr:"Les miracles eucharistiques, au sens théologique, font référence aux cas où la substance du pain et du vin est visiblement transformée en chair et en sang réels après la consécration durant la Sainte Messe. Dans plusieurs cas contemporains bien documentés, on a affirmé que cette transformation aboutissait à la manifestation de tissu myocardique humain, spécifiquement du myocarde ventriculaire, contenant des globules blancs intacts et vérifié comme étant d'origine humaine par des tests sérologiques et moléculaires. Les trois miracles examinés ici ont été soumis à une enquête scientifique, impliquant souvent des pathologistes cliniques, des cardiologues, des biologistes moléculaires et des experts légistes.<br><br>L'article de Kearse et Ligaj vise à expliquer ces phénomènes par la colonisation fongique (Epicoccum spp.) et la croissance bactérienne (Serratia marcescens). Cependant, leurs affirmations, bien qu'applicables à des hosties non consacrées et contaminées, ne parviennent pas à aborder les signatures histopathologiques et biochimiques hautement spécifiques trouvées dans les échantillons eucharistiques consacrés réels.",es:"Los milagros eucarísticos, en el sentido teológico, se refieren a instancias en las que la sustancia del pan y el vino se transforman visiblemente en carne y sangre reales después de la consagración durante la Santa Misa. En varios casos contemporáneos bien documentados, se ha afirmado que esta transformación resulta en la manifestación de tejido miocárdico humano, específicamente miocardio ventricular, que contiene glóbulos blancos intactos y verificado como de origen humano a través de pruebas serológicas y moleculares. Los tres milagros examinados aquí fueron sometidos a investigación científica, a menudo involucrando patólogos clínicos, cardiólogos, biólogos moleculares y expertos forenses.<br><br>El artículo de Kearse y Ligaj tiene como objetivo explicar estos fenómenos a través de la colonización fúngica (Epicoccum spp.) y el crecimiento bacteriano (Serratia marcescens). Sin embargo, sus afirmaciones, aunque aplicables a hostias no consagradas y contaminadas, no abordan las firmas histopatológicas y bioquímicas altamente específicas encontradas en muestras eucarísticas consagradas reales.",de:"Eucharistische Wunder beziehen sich im theologischen Sinne auf Fälle, in denen die Substanz von Brot und Wein nach der Wandlung während der Heiligen Messe sichtbar in wirkliches Fleisch und Blut verwandelt wird. In mehreren gut dokumentierten zeitgenössischen Fällen wurde behauptet, dass diese Verwandlung zur Manifestation von menschlichem Myokardgewebe führt, speziell ventrikuläres Myokard, das intakte weiße Blutkörperchen enthält und durch serologische und molekulare Tests als menschlichen Ursprungs verifiziert wurde. Die drei hier untersuchten Wunder wurden einer wissenschaftlichen Untersuchung unterzogen, an der oft klinische Pathologen, Kardiologen, Molekularbiologen und forensische Experten beteiligt waren.<br><br>Der Artikel von Kearse und Ligaj zielt darauf ab, diese Phänomene durch Pilzbefall (Epicoccum spp.) und bakterielles Wachstum (Serratia marcescens) zu erklären. Ihre Behauptungen, obwohl anwendbar auf ungeweihte, kontaminierte Hostien, gehen jedoch nicht auf die hochspezifischen histopathologischen und biochemischen Signaturen ein, die in tatsächlich geweihten eucharistischen Proben gefunden wurden."},p_hist:{en:"<strong>I. Myocardial Histopathology and Cardiac Cell Identification</strong><br>In the Buenos Aires miracle (1996), tissue samples subjected to hematoxylin and eosin (H&E) staining, Masson’s trichrome stain, and immunohistochemistry were examined by Dr. Frederick Zugibe, a forensic pathologist and cardiac specialist. The following cellular structures were identified:<ul><li style='margin-left: 20px;'>Longitudinally striated cardiac myocytes with centrally placed nuclei</li><li style='margin-left: 20px;'>Intercalated discs containing desmosomes and fascia adherens</li><li style='margin-left: 20px;'>Infiltrative leukocytes, primarily neutrophils and macrophages, consistent with acute inflammation</li><li style='margin-left: 20px;'>Extracellular matrix (ECM) fibers positive for collagen (type I and III)</li></ul>These histological features are not replicable by fungal infiltration or the decomposition of plant material. Moreover, cardiac-specific markers such as troponin I, desmin, and α-actinin were partially detected in independent assessments, providing molecular confirmation of myocardial origin. The detection of glycophorin A, a transmembrane sialoglycoprotein present on erythrocyte membranes, in tandem with inflammatory cell markers (CD68 for macrophages, CD45 for leukocytes) supports the diagnosis of active cardiac inflammation.<br><br>Kearse and Ligaj do not re-analyze any histopathological slides nor offer microphotographic evidence to refute these findings. Their proposal of contamination lacks specificity and omits the structured organization of cardiac tissue seen under light microscopy and transmission electron microscopy (TEM).",fr:"<strong>I. Histopathologie Myocardique et Identification des Cellules Cardiaques</strong><br>Dans le miracle de Buenos Aires (1996), des échantillons de tissus soumis à la coloration à l'hématoxyline et à l'éosine (H&E), à la coloration trichrome de Masson et à l'immunohistochimie ont été examinés par le Dr Frederick Zugibe, pathologiste légiste et spécialiste cardiaque. Les structures cellulaires suivantes ont été identifiées :<ul><li style='margin-left: 20px;'>Myocytes cardiaques striés longitudinalement avec noyaux centraux</li><li style='margin-left: 20px;'>Disques intercalaires contenant des desmosomes et fascia adherens</li><li style='margin-left: 20px;'>Leucocytes infiltrants, principalement neutrophiles et macrophages, compatibles avec une inflammation aiguë</li><li style='margin-left: 20px;'>Fibres de la matrice extracellulaire (MEC) positives pour le collagène (type I et III)</li></ul>Ces caractéristiques histologiques ne sont pas reproductibles par infiltration fongique ou décomposition de matière végétale. De plus, des marqueurs spécifiques cardiaques tels que la troponine I, la desmine et l'α-actinine ont été partiellement détectés dans des évaluations indépendantes, fournissant une confirmation moléculaire de l'origine myocardique. La détection de la glycophorine A, une sialoglycoprotéine transmembranaire présente sur les membranes érythrocytaires, en tandem avec des marqueurs cellulaires inflammatoires (CD68 pour les macrophages, CD45 pour les leucocytes) soutient le diagnostic d'inflammation cardiaque active.<br><br>Kearse et Ligaj ne réanalysent aucune lame histopathologique ni n'offrent de preuves microphotographiques pour réfuter ces conclusions. Leur proposition de contamination manque de spécificité et omet l'organisation structurée du tissu cardiaque observée en microscopie optique et en microscopie électronique à transmission (TEM).",es:"<strong>I. Histopatología Miocárdica e Identificación de Células Cardíacas</strong><br>En el milagro de Buenos Aires (1996), muestras de tejido sometidas a tinción con hematoxilina y eosina (H&E), tinción tricrómica de Masson e inmunohistoquímica fueron examinadas por el Dr. Frederick Zugibe, patólogo forense y especialista cardíaco. Se identificaron las siguientes estructuras celulares:<ul><li style='margin-left: 20px;'>Miocitos cardíacos estriados longitudinalmente con núcleos colocados centralmente</li><li style='margin-left: 20px;'>Discos intercalados conteniendo desmosomas y fascia adherens</li><li style='margin-left: 20px;'>Leucocitos infiltrativos, principalmente neutrófilos y macrófagos, consistentes con inflamación aguda</li><li style='margin-left: 20px;'>Fibras de matriz extracelular (MEC) positivas para colágeno (tipo I y III)</li></ul>Estas características histológicas no son replicables por infiltración fúngica o la descomposición de material vegetal. Además, marcadores cardíacos específicos como troponina I, desmina y α-actinina fueron detectados parcialmente en evaluaciones independientes, proporcionando confirmación molecular de origen miocárdico. La detección de glicoforina A, una sialoglicoproteína transmembrana presente en membranas de eritrocitos, junto con marcadores de células inflamatorias (CD68 para macrófagos, CD45 para leucocitos) apoya el diagnóstico de inflamación cardíaca activa.<br><br>Kearse y Ligaj no reanalizan ninguna diapositiva histopatológica ni ofrecen evidencia microfotográfica para refutar estos hallazgos. Su propuesta de contaminación carece de especificidad y omite la organización estructurada del tejido cardíaco vista bajo microscopía óptica y microscopía electrónica de transmisión (TEM).",de:"<strong>I. Myokardiale Histopathologie und Identifizierung von Herzzellen</strong><br>Im Wunder von Buenos Aires (1996) wurden Gewebeproben, die Hämatoxylin-Eosin (H&E)-Färbung, Masson-Trichrom-Färbung und Immunhistochemie unterzogen wurden, von Dr. Frederick Zugibe, einem forensischen Pathologen und Herzspezialisten, untersucht. Folgende Zellstrukturen wurden identifiziert:<ul><li style='margin-left: 20px;'>Längs gestreifte Herzmuskelzellen mit zentral gelegenen Kernen</li><li style='margin-left: 20px;'>Glanzstreifen mit Desmosomen und Fascia adherens</li><li style='margin-left: 20px;'>Infiltrierende Leukozyten, hauptsächlich Neutrophile und Makrophagen, konsistent mit akuter Entzündung</li><li style='margin-left: 20px;'>Extrazelluläre Matrix (ECM)-Fasern positiv für Kollagen (Typ I und III)</li></ul>Diese histologischen Merkmale sind nicht durch Pilzinfiltration oder die Zersetzung von Pflanzenmaterial reproduzierbar. Darüber hinaus wurden herzspezifische Marker wie Troponin I, Desmin und α-Actinin in unabhängigen Bewertungen teilweise nachgewiesen, was eine molekulare Bestätigung des myokardialen Ursprungs liefert. Der Nachweis von Glykophorin A, einem Transmembran-Sialoglykoprotein auf Erythrozytenmembranen, zusammen mit Entzündungszellmarkern (CD68 für Makrophagen, CD45 für Leukozyten) stützt die Diagnose einer aktiven Herzentzündung.<br><br>Kearse und Ligaj analysieren keine histopathologischen Objektträger neu und bieten keine mikrofotografischen Beweise, um diese Ergebnisse zu widerlegen. Ihr Vorschlag der Kontamination mangelt an Spezifität und lässt die strukturierte Organisation von Herzgewebe aus, die unter Lichtmikroskopie und Transmissions-Elektronenmikroskopie (TEM) zu sehen ist."},p_immune:{en:"<strong>II. Presence of Viable Inflammatory Cells: Immunological Implications</strong><br>One of the most scientifically striking observations in both Buenos Aires and Tixtla is the presence of viable immune cells, notably:<ul><li style='margin-left: 20px;'>Polymorphonuclear neutrophils with lobulated nuclei</li><li style='margin-left: 20px;'>Activated macrophages with phagolysosomal vacuoles</li><li style='margin-left: 20px;'>Basophils and eosinophils (less frequent)</li></ul>The presence of intact white blood cells, including neutrophils with nuclear lobes and granules, implies that the tissue was harvested from a living or recently deceased human. Given that the samples were maintained in aqueous solution (in some cases, for years), the survival of these cells is biologically impossible under natural decomposition pathways.<br><br>Cell lysis in hypotonic environments, nucleic acid degradation via endonucleases, and apoptosis triggered by osmotic imbalance would occur within hours. The survival of these immune cells contradicts the proposed fungal model and indicates an in vivo inflammatory process.",fr:"<strong>II. Présence de Cellules Inflammatoires Viables : Implications Immunologiques</strong><br>L'une des observations scientifiquement les plus frappantes à Buenos Aires et à Tixtla est la présence de cellules immunitaires viables, notamment :<ul><li style='margin-left: 20px;'>Neutrophiles polymorphonucléaires avec noyaux lobulés</li><li style='margin-left: 20px;'>Macrophages activés avec vacuoles phagolysosomales</li><li style='margin-left: 20px;'>Basophiles et éosinophiles (moins fréquents)</li></ul>La présence de globules blancs intacts, y compris des neutrophiles avec lobes nucléaires et granules, implique que le tissu a été prélevé sur un humain vivant ou récemment décédé. Étant donné que les échantillons ont été maintenus en solution aqueuse (dans certains cas, pendant des années), la survie de ces cellules est biologiquement impossible selon les voies naturelles de décomposition.<br><br>La lyse cellulaire dans des environnements hypotoniques, la dégradation des acides nucléiques via les endonucléases et l'apoptose déclenchée par un déséquilibre osmotique se produiraient en quelques heures. La survie de ces cellules immunitaires contredit le modèle fongique proposé et indique un processus inflammatoire in vivo.",es:"<strong>II. Presencia de Células Inflamatorias Viables: Implicaciones Inmunológicas</strong><br>Una de las observaciones científicamente más sorprendentes tanto en Buenos Aires como en Tixtla es la presencia de células inmunes viables, notablemente:<ul><li style='margin-left: 20px;'>Neutrófilos polimorfonucleares con núcleos lobulados</li><li style='margin-left: 20px;'>Macrófagos activados con vacuolas fagolisosomales</li><li style='margin-left: 20px;'>Basófilos y eosinófilos (menos frecuentes)</li></ul>La presencia de glóbulos blancos intactos, incluidos neutrófilos con lóbulos nucleares y gránulos, implica que el tejido fue extraído de un humano vivo o recientemente fallecido. Dado que las muestras se mantuvieron en solución acuosa (en algunos casos, durante años), la supervivencia de estas células es biológicamente imposible bajo vías de descomposición natural.<br><br>La lisis celular en ambientes hipotónicos, la degradación de ácidos nucleicos vía endonucleasas y la apoptosis desencadenada por desequilibrio osmótico ocurrirían en horas. La supervivencia de estas células inmunes contradice el modelo fúngico propuesto e indica un proceso inflamatorio in vivo.",de:"<strong>II. Vorhandensein lebensfähiger Entzündungszellen: Immunologische Implikationen</strong><br>Eine der wissenschaftlich auffälligsten Beobachtungen sowohl in Buenos Aires als auch in Tixtla ist das Vorhandensein lebensfähiger Immunzellen, insbesondere:<ul><li style='margin-left: 20px;'>Polymorphkernige Neutrophile mit gelappten Kernen</li><li style='margin-left: 20px;'>Aktivierte Makrophagen mit phagolysosomalen Vakuolen</li><li style='margin-left: 20px;'>Basophile und Eosinophile (weniger häufig)</li></ul>Das Vorhandensein intakter weißer Blutkörperchen, einschließlich Neutrophiler mit Kernlappen und Granula, impliziert, dass das Gewebe von einem lebenden oder kürzlich verstorbenen Menschen entnommen wurde. Da die Proben in wässriger Lösung (in einigen Fällen jahrelang) aufbewahrt wurden, ist das Überleben dieser Zellen unter natürlichen Zersetzungswegen biologisch unmöglich.<br><br>Zelllyse in hypotonischen Umgebungen, Nukleinsäureabbau durch Endonukleasen und durch osmotisches Ungleichgewicht ausgelöste Apoptose würden innerhalb von Stunden auftreten. Das Überleben dieser Immunzellen widerspricht dem vorgeschlagenen Pilzmodell und weist auf einen entzündlichen Prozess in vivo hin."},p_dna:{en:`<strong>III. DNA Analysis and Short Tandem Repeat (STR) Limitations</strong><br>Kearse and Ligaj argue that the failure to amplify human STRs is due to the presence of PCR inhibitors or contamination. In his second paper, Kearse asserts that the DNA observed is most likely from human handling and that the non-human DNA represents expected fungal or plant contaminants. However, several issues remain:<ul><li style='margin-left: 20px;'>Kearse and Ligaj do not demonstrate the use of internal amplification controls (IACs) or spike-in controls to confirm inhibition.</li><li style='margin-left: 20px;'>In Buenos Aires, morphological and histological evidence indicates human myocardial tissue, even if early PCR results yielded "no result".</li><li style='margin-left: 20px;'>In Sokółka, mitochondrial DNA (mtDNA) and nuclear DNA fragments were successfully sequenced and confirmed to be human, without a match to any known contaminant.</li></ul>Furthermore, the recent work by Ron Tesoriero utilized next-generation sequencing (NGS) on isolated white blood cells, allowing for identification of maternal haplotype without any known contamination. These advances challenge Kearse’s assertion that the DNA results merely reflect environmental material.`,fr:"<strong>III. Analyse ADN et Limitations des Répétitions Courtes en Tandem (STR)</strong><br>Kearse et Ligaj soutiennent que l'échec de l'amplification des STR humains est dû à la présence d'inhibiteurs de PCR ou de contamination. Dans son deuxième article, Kearse affirme que l'ADN observé provient très probablement de manipulations humaines et que l'ADN non humain représente des contaminants fongiques ou végétaux attendus. Cependant, plusieurs problèmes subsistent :<ul><li style='margin-left: 20px;'>Kearse et Ligaj ne démontrent pas l'utilisation de contrôles d'amplification internes (IAC) ou de contrôles spike-in pour confirmer l'inhibition.</li><li style='margin-left: 20px;'>À Buenos Aires, des preuves morphologiques et histologiques indiquent du tissu myocardique humain, même si les premiers résultats de PCR ont donné « aucun résultat ».</li><li style='margin-left: 20px;'>À Sokółka, l'ADN mitochondrial (ADNmt) et des fragments d'ADN nucléaire ont été séquencés avec succès et confirmés comme humains, sans correspondance avec aucun contaminant connu.</li></ul>De plus, les travaux récents de Ron Tesoriero ont utilisé le séquençage de nouvelle génération (NGS) sur des globules blancs isolés, permettant l'identification de l'haplotype maternel sans aucune contamination connue. Ces avancées remettent en question l'affirmation de Kearse selon laquelle les résultats ADN reflètent simplement du matériel environnemental.",es:`<strong>III. Análisis de ADN y Limitaciones de Repeticiones Cortas en Tándem (STR)</strong><br>Kearse y Ligaj argumentan que el fracaso en amplificar STRs humanos se debe a la presencia de inhibidores de PCR o contaminación. En su segundo artículo, Kearse afirma que el ADN observado proviene probablemente de manipulación humana y que el ADN no humano representa contaminantes fúngicos o vegetales esperados. Sin embargo, varios problemas persisten:<ul><li style='margin-left: 20px;'>Kearse y Ligaj no demuestran el uso de controles de amplificación internos (IACs) o controles spike-in para confirmar la inhibición.</li><li style='margin-left: 20px;'>En Buenos Aires, la evidencia morfológica e histológica indica tejido miocárdico humano, incluso si los resultados tempranos de PCR arrojaron "ningún resultado".</li><li style='margin-left: 20px;'>En Sokółka, el ADN mitocondrial (ADNmt) y fragmentos de ADN nuclear fueron secuenciados con éxito y confirmados como humanos, sin coincidencia con ningún contaminante conocido.</li></ul>Además, el trabajo reciente de Ron Tesoriero utilizó secuenciación de nueva generación (NGS) en glóbulos blancos aislados, permitiendo la identificación del haplotipo materno sin ninguna contaminación conocida. Estos avances desafían la afirmación de Kearse de que los resultados de ADN simplemente reflejan material ambiental.`,de:"<strong>III. DNA-Analyse und Einschränkungen bei Short Tandem Repeats (STR)</strong><br>Kearse und Ligaj argumentieren, dass das Versagen, menschliche STRs zu amplifizieren, auf das Vorhandensein von PCR-Inhibitoren oder Kontamination zurückzuführen ist. In seinem zweiten Papier behauptet Kearse, dass die beobachtete DNA höchstwahrscheinlich von menschlicher Handhabung stammt und dass die nicht-menschliche DNA erwartete pilzliche oder pflanzliche Kontaminanten darstellt. Es bleiben jedoch mehrere Probleme:<ul><li style='margin-left: 20px;'>Kearse und Ligaj weisen die Verwendung von internen Amplifikationskontrollen (IACs) oder Spike-in-Kontrollen zur Bestätigung der Hemmung nicht nach.</li><li style='margin-left: 20px;'>In Buenos Aires deuten morphologische und histologische Beweise auf menschliches Myokardgewebe hin, selbst wenn frühe PCR-Ergebnisse „kein Ergebnis“ lieferten.</li><li style='margin-left: 20px;'>In Sokółka wurden mitochondriale DNA (mtDNA) und nukleare DNA-Fragmente erfolgreich sequenziert und als menschlich bestätigt, ohne Übereinstimmung mit einem bekannten Kontaminanten.</li></ul>Darüber hinaus nutzte die jüngste Arbeit von Ron Tesoriero Next-Generation-Sequencing (NGS) an isolierten weißen Blutkörperchen, was die Identifizierung des mütterlichen Haplotyps ohne bekannte Kontamination ermöglichte. Diese Fortschritte stellen Kearses Behauptung in Frage, dass die DNA-Ergebnisse lediglich Umweltmaterial widerspiegeln."},p_dna_clarify:{en:"<strong>Clarifying the 15% Misunderstanding:</strong><br>Kearse states: “In approximately 15% of the cases, a bright red area was noticed growing on the remaining wafer” (JFSR, p. 83). This refers only to fungal growth, not successful DNA amplification or replication of any histological structure.",fr:"<strong>Clarification du Malentendu des 15% :</strong><br>Kearse déclare : « Dans environ 15% des cas, une zone rouge vif a été remarquée en train de pousser sur l'hostie restante » (JFSR, p. 83). Cela ne fait référence qu'à la croissance fongique, pas à une amplification réussie de l'ADN ou à la réplication d'une quelconque structure histologique.",es:"<strong>Aclarando el Malentendido del 15%:</strong><br>Kearse afirma: “En aproximadamente el 15% de los casos, se notó un área roja brillante creciendo en la oblea restante” (JFSR, p. 83). Esto se refiere solo al crecimiento fúngico, no a la amplificación exitosa de ADN o replicación de alguna estructura histológica.",de:"<strong>Klärung des 15%-Missverständnisses:</strong><br>Kearse stellt fest: „In etwa 15 % der Fälle wurde ein hellroter Bereich bemerkt, der auf der verbleibenden Waffel wuchs“ (JFSR, S. 83). Dies bezieht sich nur auf Pilzwachstum, nicht auf erfolgreiche DNA-Amplifikation oder Replikation irgendeiner histologischen Struktur."},p_blood:{en:"<strong>IV. Blood Typing and Hemagglutination Analysis</strong><br>One recurring biochemical observation across Eucharistic miracles is the presence of AB blood type. Both serological hemagglutination and fluorescent antibody techniques (using anti-A and anti-B immunoglobulin IgM reagents) confirmed this in:<ul><li style='margin-left: 20px;'>Tixtla (2006): Positive for AB blood, Rh-negative</li><li style='margin-left: 20px;'>Buenos Aires (1996): AB blood, consistent with the Shroud of Turin</li></ul>The JFSR article asserts that bacterial species can express mimic AB antigens. While it is true that some gram-negative bacteria like Escherichia coli can express glycosylated structures mimicking ABO epitopes, this requires expression of functional α1,3-N-acetylgalactosaminyltransferase (A-transferase) and α1,3-galactosyltransferase (B-transferase).<br><br>Such mimicry is limited and typically does not survive fixation, dehydration, or long-term aqueous storage, as was the case in Buenos Aires and Sokółka. Moreover, the concurrent detection of human hemoglobin (HbA), glycophorin A, and the AB phenotype in solid tissue provides a multi-layered biochemical confirmation that cannot be explained by bacterial mimicry.",fr:"<strong>IV. Groupage Sanguin et Analyse d'Hémagglutination</strong><br>Une observation biochimique récurrente à travers les miracles eucharistiques est la présence du groupe sanguin AB. Tant l'hémagglutination sérologique que les techniques d'anticorps fluorescents (utilisant des réactifs d'immunoglobuline IgM anti-A et anti-B) ont confirmé cela dans :<ul><li style='margin-left: 20px;'>Tixtla (2006) : Positif pour le sang AB, Rh négatif</li><li style='margin-left: 20px;'>Buenos Aires (1996) : Sang AB, cohérent avec le Linceul de Turin</li></ul>L'article JFSR affirme que des espèces bactériennes peuvent exprimer des antigènes mimétiques AB. S'il est vrai que certaines bactéries gram-négatives comme Escherichia coli peuvent exprimer des structures glycosylées imitant les épitopes ABO, cela nécessite l'expression de α1,3-N-acétylgalactosaminyltransférase (A-transférase) et α1,3-galactosyltransférase (B-transférase) fonctionnelles.<br><br>Un tel mimétisme est limité et ne survit généralement pas à la fixation, à la déshydratation ou au stockage aqueux à long terme, comme ce fut le cas à Buenos Aires et Sokółka. De plus, la détection simultanée d'hémoglobine humaine (HbA), de glycophorine A et du phénotype AB dans le tissu solide fournit une confirmation biochimique multicouche qui ne peut être expliquée par le mimétisme bactérien.",es:"<strong>IV. Tipificación Sanguínea y Análisis de Hemaglutinación</strong><br>Una observación bioquímica recurrente en los milagros eucarísticos es la presencia del tipo de sangre AB. Tanto la hemaglutinación serológica como las técnicas de anticuerpos fluorescentes (usando reactivos de inmunoglobulina IgM anti-A y anti-B) confirmaron esto en:<ul><li style='margin-left: 20px;'>Tixtla (2006): Positivo para sangre AB, Rh negativo</li><li style='margin-left: 20px;'>Buenos Aires (1996): Sangre AB, consistente con la Sábana Santa de Turín</li></ul>El artículo del JFSR afirma que especies bacterianas pueden expresar antígenos miméticos AB. Si bien es cierto que algunas bacterias gramnegativas como Escherichia coli pueden expresar estructuras glicosiladas que imitan epítopos ABO, esto requiere la expresión de α1,3-N-acetilgalactosaminiltransferasa (A-transferasa) y α1,3-galactosiltransferasa (B-transferasa) funcionales.<br><br>Tal mimetismo es limitado y típicamente no sobrevive a la fijación, deshidratación o almacenamiento acuoso a largo plazo, como fue el caso en Buenos Aires y Sokółka. Además, la detección concurrente de hemoglobina humana (HbA), glicoforina A y el fenotipo AB en tejido sólido proporciona una confirmación bioquímica de múltiples capas que no puede explicarse por mimetismo bacteriano.",de:"<strong>IV. Blutgruppenbestimmung und Hämagglutinationsanalyse</strong><br>Eine wiederkehrende biochemische Beobachtung bei eucharistischen Wundern ist das Vorhandensein der Blutgruppe AB. Sowohl serologische Hämagglutination als auch fluoreszierende Antikörpertechniken (unter Verwendung von Anti-A- und Anti-B-Immunglobulin-IgM-Reagenzien) bestätigten dies in:<ul><li style='margin-left: 20px;'>Tixtla (2006): Positiv für AB-Blut, Rh-negativ</li><li style='margin-left: 20px;'>Buenos Aires (1996): AB-Blut, übereinstimmend mit dem Turiner Grabtuch</li></ul>Der JFSR-Artikel behauptet, dass Bakterienarten nachahmende AB-Antigene exprimieren können. Während es wahr ist, dass einige gramnegative Bakterien wie Escherichia coli glykosylierte Strukturen exprimieren können, die ABO-Epitope nachahmen, erfordert dies die Expression von funktioneller α1,3-N-Acetylgalactosaminyltransferase (A-Transferase) und α1,3-Galactosyltransferase (B-Transferase).<br><br>Eine solche Mimikry ist begrenzt und überlebt typischerweise keine Fixierung, Dehydrierung oder langfristige wässrige Lagerung, wie es in Buenos Aires und Sokółka der Fall war. Darüber hinaus bietet der gleichzeitige Nachweis von menschlichem Hämoglobin (HbA), Glykophorin A und dem AB-Phänotyp in festem Gewebe eine mehrschichtige biochemische Bestätigung, die nicht durch bakterielle Mimikry erklärt werden kann."},p_blood_rebuttal:{en:"In his related paper on the relics and miracles, Kearse claims that the recurrence of AB blood type could be explained by bacterial mimicry, since some bacteria express structures resembling A or B antigens. However:<ul><li style='margin-left: 20px;'>These bacterial antigens do not replicate human glycosyltransferase expression, nor do they co-express Rh antigens (e.g., Rh-negative as in Tixtla).</li><li style='margin-left: 20px;'>The Tixtla and Buenos Aires samples tested positive for AB blood and human hemoglobin and showed immunohistochemical expression of glycophorin A, HbA, and RBC-specific markers.</li><li style='margin-left: 20px;'>No known bacterium can account for this full antigenic and protein expression profile. Furthermore, hemagglutination tests and immunofluorescent assays performed under control conditions yielded consistent human results.</li></ul>",fr:"Dans son article connexe sur les reliques et les miracles, Kearse affirme que la récurrence du groupe sanguin AB pourrait s'expliquer par un mimétisme bactérien, puisque certaines bactéries expriment des structures ressemblant aux antigènes A ou B. Cependant :<ul><li style='margin-left: 20px;'>Ces antigènes bactériens ne répliquent pas l'expression de la glycosyltransférase humaine, ni ne co-expriment les antigènes Rh (par ex., Rh négatif comme à Tixtla).</li><li style='margin-left: 20px;'>Les échantillons de Tixtla et Buenos Aires ont été testés positifs pour le sang AB et l'hémoglobine humaine et ont montré une expression immunohistochimique de la glycophorine A, de l'HbA et des marqueurs spécifiques aux GR.</li><li style='margin-left: 20px;'>Aucune bactérie connue ne peut expliquer ce profil complet d'expression antigénique et protéique. De plus, les tests d'hémagglutination et les essais d'immunofluorescence effectués dans des conditions contrôlées ont donné des résultats humains cohérents.</li></ul>",es:"En su artículo relacionado sobre las reliquias y milagros, Kearse afirma que la recurrencia del tipo de sangre AB podría explicarse por mimetismo bacteriano, ya que algunas bacterias expresan estructuras que se asemejan a antígenos A o B. Sin embargo:<ul><li style='margin-left: 20px;'>Estos antígenos bacterianos no replican la expresión de glicosiltransferasa humana, ni coexpresan antígenos Rh (p. ej., Rh negativo como en Tixtla).</li><li style='margin-left: 20px;'>Las muestras de Tixtla y Buenos Aires dieron positivo para sangre AB y hemoglobina humana y mostraron expresión inmunohistoquímica de glicoforina A, HbA y marcadores específicos de glóbulos rojos.</li><li style='margin-left: 20px;'>Ninguna bacteria conocida puede explicar este perfil completo de expresión antigénica y proteica. Además, las pruebas de hemaglutinación y ensayos de inmunofluorescencia realizados bajo condiciones de control arrojaron resultados humanos consistentes.</li></ul>",de:"In seinem verwandten Papier über Reliquien und Wunder behauptet Kearse, dass das Wiederauftreten der Blutgruppe AB durch bakterielle Mimikry erklärt werden könnte, da einige Bakterien Strukturen exprimieren, die A- oder B-Antigenen ähneln. Jedoch:<ul><li style='margin-left: 20px;'>Diese bakteriellen Antigene replizieren nicht die menschliche Glykosyltransferase-Expression, noch koexprimieren sie Rh-Antigene (z. B. Rh-negativ wie in Tixtla).</li><li style='margin-left: 20px;'>Die Proben aus Tixtla und Buenos Aires wurden positiv auf AB-Blut und menschliches Hämoglobin getestet und zeigten immunhistochemische Expression von Glykophorin A, HbA und RBC-spezifischen Markern.</li><li style='margin-left: 20px;'>Kein bekanntes Bakterium kann dieses vollständige Antigen- und Proteinexpressionsprofil erklären. Darüber hinaus lieferten unter Kontrollbedingungen durchgeführte Hämagglutinationstests und Immunfluoreszenzassays konsistente menschliche Ergebnisse.</li></ul>"},p_fusion:{en:"<strong>V. Microscopic Fusion of Tissue and Bread Matrix</strong><br>Perhaps the most compelling forensic evidence comes from the Sokółka case, where TEM imaging revealed:<ul><li style='margin-left: 20px;'>Direct anatomical continuity between myocardial fibers and starchy granules of the host</li><li style='margin-left: 20px;'>Fusion at the membrane boundary, where cellular lipid bilayers met starch polysaccharide residues</li><li style='margin-left: 20px;'>No evidence of incision, glue, or layering</li></ul>These findings were verified by dual-pathology teams and violate known physical models of contamination. Epicoccum spores, fungal hyphae, and other biological structures do not form continuous junctions with plant matrixes. The report by Kearse and Ligaj does not acknowledge or attempt to falsify this data.",fr:"<strong>V. Fusion Microscopique du Tissu et de la Matrice du Pain</strong><br>Peut-être la preuve médico-légale la plus convaincante provient du cas de Sokółka, où l'imagerie TEM a révélé :<ul><li style='margin-left: 20px;'>Une continuité anatomique directe entre les fibres myocardiques et les granules d'amidon de l'hostie</li><li style='margin-left: 20px;'>Une fusion à la limite membranaire, où les bicouches lipidiques cellulaires rencontraient les résidus de polysaccharides d'amidon</li><li style='margin-left: 20px;'>Aucune preuve d'incision, de colle ou de superposition</li></ul>Ces résultats ont été vérifiés par des équipes de double pathologie et violent les modèles physiques connus de contamination. Les spores d'Epicoccum, les hyphes fongiques et d'autres structures biologiques ne forment pas de jonctions continues avec les matrices végétales. Le rapport de Kearse et Ligaj ne reconnaît ni ne tente de falsifier ces données.",es:"<strong>V. Fusión Microscópica de Tejido y Matriz de Pan</strong><br>Quizás la evidencia forense más convincente proviene del caso Sokółka, donde las imágenes TEM revelaron:<ul><li style='margin-left: 20px;'>Continuidad anatómica directa entre fibras miocárdicas y gránulos de almidón de la hostia</li><li style='margin-left: 20px;'>Fusión en el límite de la membrana, donde las bicapas lipídicas celulares se encontraban con residuos de polisacáridos de almidón</li><li style='margin-left: 20px;'>Ninguna evidencia de incisión, pegamento o estratificación</li></ul>Estos hallazgos fueron verificados por equipos de patología dual y violan los modelos físicos conocidos de contaminación. Esporas de Epicoccum, hifas fúngicas y otras estructuras biológicas no forman uniones continuas con matrices vegetales. El informe de Kearse y Ligaj no reconoce ni intenta falsificar estos datos.",de:"<strong>V. Mikroskopische Fusion von Gewebe und Brotmatrix</strong><br>Vielleicht stammt der überzeugendste forensische Beweis aus dem Fall Sokółka, wo TEM-Bildgebung enthüllte:<ul><li style='margin-left: 20px;'>Direkte anatomische Kontinuität zwischen Myokardfasern und stärkehaltigen Granulaten der Hostie</li><li style='margin-left: 20px;'>Fusion an der Membrangrenze, wo zelluläre Lipiddoppelschichten auf Stärke-Polysaccharid-Rückstände trafen</li><li style='margin-left: 20px;'>Keine Hinweise auf Einschnitt, Klebstoff oder Schichtung</li></ul>Diese Ergebnisse wurden von Doppelpathologie-Teams verifiziert und verstoßen gegen bekannte physikalische Modelle der Kontamination. Epicoccum-Sporen, Pilzhyphen und andere biologische Strukturen bilden keine kontinuierlichen Verbindungen mit Pflanzenmatrizen. Der Bericht von Kearse und Ligaj erkennt diese Daten weder an noch versucht er, sie zu widerlegen."},p_stats:{en:"<strong>VI. Statistical Improbability and Multi-Case Consistency</strong><br>Across multiple geographic, cultural, and procedural settings, Eucharistic miracles consistently reveal:<ul><li style='margin-left: 20px;'>Cardiac tissue (left ventricle)</li><li style='margin-left: 20px;'>Blood type AB</li><li style='margin-left: 20px;'>Active immune infiltration</li><li style='margin-left: 20px;'>Lack of decomposition</li><li style='margin-left: 20px;'>Fusion with the bread matrix</li></ul>The probability that all these cases are explainable via contamination by unrelated agents (fungi, bacteria) with such consistency is statistically negligible. JFSR does not propose a shared microbial or environmental agent that could produce these effects across Poland, Argentina, and Mexico.",fr:"<strong>VI. Improbabilité Statistique et Cohérence Multi-Cas</strong><br>À travers de multiples contextes géographiques, culturels et procéduraux, les miracles eucharistiques révèlent constamment :<ul><li style='margin-left: 20px;'>Du tissu cardiaque (ventricule gauche)</li><li style='margin-left: 20px;'>Groupe sanguin AB</li><li style='margin-left: 20px;'>Infiltration immunitaire active</li><li style='margin-left: 20px;'>Absence de décomposition</li><li style='margin-left: 20px;'>Fusion avec la matrice du pain</li></ul>La probabilité que tous ces cas soient explicables par contamination par des agents non apparentés (champignons, bactéries) avec une telle cohérence est statistiquement négligeable. JFSR ne propose pas d'agent microbien ou environnemental partagé qui pourrait produire ces effets à travers la Pologne, l'Argentine et le Mexique.",es:"<strong>VI. Improbabilidad Estadística y Consistencia Multi-Caso</strong><br>A través de múltiples entornos geográficos, culturales y procedimentales, los milagros eucarísticos revelan consistentemente:<ul><li style='margin-left: 20px;'>Tejido cardíaco (ventrículo izquierdo)</li><li style='margin-left: 20px;'>Tipo de sangre AB</li><li style='margin-left: 20px;'>Infiltración inmune activa</li><li style='margin-left: 20px;'>Falta de descomposición</li><li style='margin-left: 20px;'>Fusión con la matriz del pan</li></ul>La probabilidad de que todos estos casos sean explicables mediante contaminación por agentes no relacionados (hongos, bacterias) con tal consistencia es estadísticamente insignificante. JFSR no propone un agente microbiano o ambiental compartido que pudiera producir estos efectos en Polonia, Argentina y México.",de:"<strong>VI. Statistische Unwahrscheinlichkeit und Fallübergreifende Konsistenz</strong><br>Über mehrere geografische, kulturelle und verfahrenstechnische Umgebungen hinweg zeigen eucharistische Wunder konsistent:<ul><li style='margin-left: 20px;'>Herzgewebe (linker Ventrikel)</li><li style='margin-left: 20px;'>Blutgruppe AB</li><li style='margin-left: 20px;'>Aktive Immuninfiltration</li><li style='margin-left: 20px;'>Fehlen von Zersetzung</li><li style='margin-left: 20px;'>Fusion mit der Brotmatrix</li></ul>Die Wahrscheinlichkeit, dass all diese Fälle durch Kontamination durch nicht verwandte Agenzien (Pilze, Bakterien) mit einer solchen Konsistenz erklärbar sind, ist statistisch vernachlässigbar. JFSR schlägt keinen gemeinsamen mikrobiellen oder Umweltwirkstoff vor, der diese Effekte in Polen, Argentinien und Mexiko hervorrufen könnte."},p_method:{en:"<strong>VII. Methodological Clarifications and Minimum Protocol</strong><br><strong>Minimum Protocol Caveat:</strong><br>Kearse outlines a protocol that includes “HLA typing, DNA sequencing, and multiplex immunohistochemistry” (JFSR, p. 86). Yet, this protocol was not applied to any of the miracle cases criticized in the article. The lack of application weakens their critique’s scientific authority.<br><br><strong>Lack of Replication in Critical Areas:</strong><br>While Kearse’s study replicated superficial traits (red pigment, fungal fluorescence), it did not attempt to replicate:<ul><li style='margin-left: 20px;'>Myocardial histology or striated myocytes</li><li style='margin-left: 20px;'>Human hemoglobin presence</li><li style='margin-left: 20px;'>Fusion with the bread matrix under electron microscopy</li></ul>",fr:"<strong>VII. Clarifications Méthodologiques et Protocole Minimum</strong><br><strong>Mise en Garde sur le Protocole Minimum :</strong><br>Kearse décrit un protocole qui inclut « le typage HLA, le séquençage de l'ADN et l'immunohistochimie multiplex » (JFSR, p. 86). Pourtant, ce protocole n'a été appliqué à aucun des cas de miracle critiqués dans l'article. Le manque d'application affaiblit l'autorité scientifique de leur critique.<br><br><strong>Manque de Réplication dans les Domaines Critiques :</strong><br>Bien que l'étude de Kearse ait reproduit des traits superficiels (pigment rouge, fluorescence fongique), elle n'a pas tenté de reproduire :<ul><li style='margin-left: 20px;'>L'histologie cardiaque et les myocytes intacts</li><li style='margin-left: 20px;'>La présence d'hémoglobine humaine</li><li style='margin-left: 20px;'>La fusion avec la matrice du pain sous microscopie électronique</li></ul>",es:"<strong>VII. Aclaraciones Metodológicas y Protocolo Mínimo</strong><br><strong>Advertencia sobre el Protocolo Mínimo:</strong><br>Kearse describe un protocolo que incluye “tipificación HLA, secuenciación de ADN e inmunohistoquímica multiplex” (JFSR, p. 86). Sin embargo, este protocolo no se aplicó a ninguno de los casos de milagros criticados en el artículo. La falta de aplicación debilita la autoridad científica de su crítica.<br><br><strong>Falta de Replicación en Áreas Críticas:</strong><br>Si bien el estudio de Kearse replicó rasgos superficiales (pigmento rojo, fluorescencia fúngica), no intentó replicar:<ul><li style='margin-left: 20px;'>Histología miocárdica o miocitos estriados</li><li style='margin-left: 20px;'>Presencia de hemoglobina humana</li><li style='margin-left: 20px;'>Fusión con la matriz del pan bajo microscopía electrónica</li></ul>",de:"<strong>VII. Methodologische Klärungen und Mindestprotokoll</strong><br><strong>Vorbehalt zum Mindestprotokoll:</strong><br>Kearse skizziert ein Protokoll, das „HLA-Typisierung, DNA-Sequenzierung und Multiplex-Immunhistochemie“ umfasst (JFSR, S. 86). Doch dieses Protokoll wurde auf keinen der im Artikel kritisierten Wunderfälle angewendet. Die fehlende Anwendung schwächt die wissenschaftliche Autorität ihrer Kritik.<br><br><strong>Mangelnde Replikation in kritischen Bereichen:</strong><br>Während Kearses Studie oberflächliche Merkmale (rotes Pigment, Pilzfluoreszenz) replizierte, versuchte sie nicht zu replizieren:<ul><li style='margin-left: 20px;'>Myokardhistologie oder gestreifte Myozyten</li><li style='margin-left: 20px;'>Vorhandensein von menschlichem Hämoglobin</li><li style='margin-left: 20px;'>Fusion mit der Brotmatrix unter Elektronenmikroskopie</li></ul>"},conclusionTitle:{en:"Conclusion of Rebuttal",fr:"Conclusion de la Réfutation",es:"Conclusión de la Refutación",de:"Schlussfolgerung der Widerlegung"},p_conc:{en:`While the article by Kearse and Ligaj offers a valid critique of some superficial visual similarities between mold growth and "bleeding hosts," it fails to engage with the molecular, histological, and immunological depth of the evidence supporting Eucharistic miracles. Their experiments with unconsecrated wafers, although scientifically sound within their limits, do not replicate:<ul><li style='margin-left: 20px;'>Cardiac histology and intact myocytes</li><li style='margin-left: 20px;'>Immune cell preservation</li><li style='margin-left: 20px;'>Specific biochemical markers (AB blood, glycophorin A)</li><li style='margin-left: 20px;'>DNA identity and lack of human profile matches</li><li style='margin-left: 20px;'>Structural integration of host and human tissue</li></ul>Although Kearse and Ligaj acknowledge that some Eucharistic miracle cases reported histological findings such as cardiac tissue with “red blood cells and white blood cells, including macrophages, neutrophils, and basophils” (JFSR, p. 81), they do not attempt to reproduce or refute these through modern histopathology. Instead, they raise general concerns about methodological rigor, without reanalyzing any miracle sample.<br><br>They further note that “staining with anti-glycophorin A may be relatively routine in the examination of cardiac tissue from known human samples, but one wonders if any nonspecific binding would occur in control wafer samples” (JFSR, p. 82). Yet, they do not perform any such staining on control samples, nor do they apply multiplex immunohistochemistry.<br><br>Crucially, Kearse and Ligaj do not address or even mention the documented phenomenon of fusion between myocardial tissue and the bread matrix under transmission electron microscopy (as seen in Sokółka). Their omission of this key forensic feature undermines the comprehensiveness of their critique.<br><br>While they propose a valuable “minimum protocol” for future analyses, including HLA typing and blinded evaluation, they admit that “no standard scientific protocol exists for their examination” (JFSR, p. 86) and do not apply this protocol to any of the cases they critique. This undermines the robustness of their scientific dismissal.<br><br>...If their skepticism is to be taken seriously, it must meet the same scientific standards demanded of the miracles themselves... Until then, the evidence of supernatural transformation remains strong, and the faith of the Church in the Real Presence continues to be echoed by science, not undone by it.`,fr:"Bien que l'article de Kearse et Ligaj offre une critique valable de certaines similitudes visuelles superficielles entre la croissance de moisissures et les « hosties saignantes », il ne parvient pas à aborder la profondeur moléculaire, histologique et immunologique des preuves soutenant les miracles eucharistiques. Leurs expériences avec des hosties non consacrées, bien que scientifiquement fondées dans leurs limites, ne reproduisent pas :<ul><li style='margin-left: 20px;'>L'histologie cardiaque et les myocytes intacts</li><li style='margin-left: 20px;'>La préservation des cellules immunitaires</li><li style='margin-left: 20px;'>Les marqueurs biochimiques spécifiques (sang AB, glycophorine A)</li><li style='margin-left: 20px;'>L'identité ADN et l'absence de correspondances de profil humain</li><li style='margin-left: 20px;'>L'intégration structurelle de l'hostie et du tissu humain</li></ul>Bien que Kearse et Ligaj reconnaissent que certains cas de miracles eucharistiques ont rapporté des résultats histologiques tels que du tissu cardiaque avec « des globules rouges et des globules blancs, y compris des macrophages, des neutrophiles et des basophiles » (JFSR, p. 81), ils ne tentent pas de reproduire ou de réfuter cela par l'histopathologie moderne. Au lieu de cela, ils soulèvent des préoccupations générales sur la rigueur méthodologique, sans réanalyser aucun échantillon de miracle.<br><br>Ils notent en outre que « la coloration avec l'anti-glycophorine A peut être relativement courante dans l'examen de tissu cardiaque provenant d'échantillons humains connus, mais on peut se demander si une liaison non spécifique se produirait dans des échantillons d'hosties témoins » (JFSR, p. 82). Pourtant, ils n'effectuent aucune coloration de ce type sur des échantillons témoins, ni n'appliquent l'immunohistochimie multiplex.<br><br>De manière cruciale, Kearse et Ligaj n'abordent ni même ne mentionnent le phénomène documenté de fusion entre le tissu myocardique et la matrice du pain sous microscopie électronique à transmission (comme vu à Sokółka). Leur omission de cette caractéristique médico-légale clé sape l'exhaustivité de leur critique.<br><br>Bien qu'ils proposent un « protocole minimum » précieux pour les analyses futures, incluant le typage HLA et l'évaluation en aveugle, ils admettent qu'« aucun protocole scientifique standard n'existe pour leur examen » (JFSR, p. 86) et n'appliquent pas ce protocole à aucun des cas qu'ils critiquent. Cela sape la robustesse de leur rejet scientifique.<br><br>...Si leur scepticisme doit être pris au sérieux, il doit répondre aux mêmes normes scientifiques exigées des miracles eux-mêmes... Jusque-là, la preuve de la transformation surnaturelle reste forte, et la foi de l'Église en la Présence Réelle continue d'être reprise par la science, et non défaite par elle.",es:`Si bien el artículo de Kearse y Ligaj ofrece una crítica válida de algunas similitudes visuales superficiales entre el crecimiento de moho y las "hostias sangrantes", no logra abordar la profundidad molecular, histológica e inmunológica de la evidencia que respalda los milagros eucarísticos. Sus experimentos con obleas no consagradas, aunque científicamente sólidos dentro de sus límites, no replican:<ul><li style='margin-left: 20px;'>Histología cardíaca y miocitos intactos</li><li style='margin-left: 20px;'>Preservación de células inmunes</li><li style='margin-left: 20px;'>Marcadores bioquímicos específicos (sangre AB, glicoforina A)</li><li style='margin-left: 20px;'>Identidad de ADN y falta de coincidencias de perfil humano</li><li style='margin-left: 20px;'>Integración estructural de hostia y tejido humano</li></ul>Aunque Kearse y Ligaj reconocen que algunos casos de milagros eucarísticos reportaron hallazgos histológicos como tejido cardíaco con “glóbulos rojos y glóbulos blancos, incluyendo macrófagos, neutrófilos y basófilos” (JFSR, p. 81), no intentan reproducir o refutar esto a través de histopatología moderna. En cambio, plantean preocupaciones generales sobre el rigor metodológico, sin reanalizar ninguna muestra de milagro.<br><br>Además señalan que “la tinción con anti-glicoforina A puede ser relativamente rutinaria en el examen de tejido cardíaco de muestras humanas conocidas, pero uno se pregunta si ocurriría alguna unión inespecífica en muestras de obleas de control” (JFSR, p. 82). Sin embargo, no realizan tal tinción en muestras de control, ni aplican inmunohistoquímica multiplex.<br><br>Crucialmente, Kearse y Ligaj no abordan ni siquiera mencionan el fenómeno documentado de fusión entre tejido miocárdico y la matriz del pan bajo microscopía electrónica de transmisión (como se ve en Sokółka). Su omisión de esta característica forense clave socava la exhaustividad de su crítica.<br><br>Si bien proponen un valioso “protocolo mínimo” para futuros análisis, incluyendo tipificación HLA y evaluación ciega, admiten que “no existe un protocolo científico estándar para su examen” (JFSR, p. 86) y no aplican este protocolo a ninguno de los casos que critican. Esto socava la solidez de su rechazo científico.<br><br>...Si su escepticismo debe tomarse en serio, debe cumplir con los mismos estándares científicos exigidos a los propios milagros... Hasta entonces, la evidencia de transformación sobrenatural sigue siendo fuerte, y la fe de la Iglesia en la Presencia Real continúa siendo resonada por la ciencia, no deshecha por ella.`,de:"Während der Artikel von Kearse und Ligaj eine gültige Kritik einiger oberflächlicher visueller Ähnlichkeiten zwischen Schimmelwachstum und „blutenden Hostien“ bietet, versäumt er es, sich mit der molekularen, histologischen und immunologischen Tiefe der Beweise auseinanderzusetzen, die eucharistische Wunder stützen. Ihre Experimente mit ungeweihten Waffeln, obwohl wissenschaftlich fundiert innerhalb ihrer Grenzen, replizieren nicht:<ul><li style='margin-left: 20px;'>Kardiale Histologie und intakte Myozyten</li><li style='margin-left: 20px;'>Erhaltung von Immunzellen</li><li style='margin-left: 20px;'>Spezifische biochemische Marker (AB-Blut, Glykophorin A)</li><li style='margin-left: 20px;'>DNA-Identität und Fehlen menschlicher Profilübereinstimmungen</li><li style='margin-left: 20px;'>Strukturelle Integration von Hostie und menschlichem Gewebe</li></ul>Obwohl Kearse und Ligaj anerkennen, dass einige Fälle eucharistischer Wunder histologische Befunde wie Herzgewebe mit „roten Blutkörperchen und weißen Blutkörperchen, einschließlich Makrophagen, Neutrophilen und Basophilen“ (JFSR, S. 81) berichteten, versuchen sie nicht, diese durch moderne Histopathologie zu reproduzieren oder zu widerlegen. Stattdessen äußern sie allgemeine Bedenken hinsichtlich der methodischen Strenge, ohne eine Wunderprobe erneut zu analysieren.<br><br>Sie merken ferner an, dass „die Färbung mit Anti-Glykophorin A bei der Untersuchung von Herzgewebe aus bekannten menschlichen Proben relativ routinemäßig sein mag, aber man fragt sich, ob eine unspezifische Bindung in Kontrollwaffelproben auftreten würde“ (JFSR, S. 82). Dennoch führen sie keine solche Färbung an Kontrollproben durch und wenden auch keine Multiplex-Immunhistochemie an.<br><br>Entscheidend ist, dass Kearse und Ligaj das dokumentierte Phänomen der Fusion zwischen Myokardgewebe und der Brotmatrix unter Transmissions-Elektronenmikroskopie (wie in Sokółka gesehen) weder ansprechen noch erwähnen. Ihre Auslassung dieses zentralen forensischen Merkmals untergräbt die Vollständigkeit ihrer Kritik.<br><br>Während sie ein wertvolles „Mindestprotokoll“ für zukünftige Analysen vorschlagen, einschließlich HLA-Typisierung und verblindeter Bewertung, geben sie zu, dass „kein wissenschaftliches Standardprotokoll für ihre Untersuchung existiert“ (JFSR, S. 86) und wenden dieses Protokoll auf keinen der von ihnen kritisierten Fälle an. Dies untergräbt die Robustheit ihrer wissenschaftlichen Ablehnung.<br><br>...Wenn ihre Skepsis ernst genommen werden soll, muss sie denselben wissenschaftlichen Standards genügen, die von den Wundern selbst verlangt werden... Bis dahin bleiben die Beweise für übernatürliche Verwandlung stark, und der Glaube der Kirche an die Realpräsenz wird weiterhin von der Wissenschaft widerhallen, nicht von ihr zunichtegemacht."},faq:{h4:{en:"FAQ Based on the JFSR Critique",fr:"FAQ Basée sur la Critique JFSR",es:"Preguntas Frecuentes Basadas en la Crítica del JFSR",de:"FAQ basierend auf der JFSR-Kritik"},q1:{en:"Doesn’t the 15% result from the JFSR control tests show that red substances can appear naturally on wafers?",fr:"Le résultat de 15% des tests de contrôle JFSR ne montre-t-il pas que des substances rouges peuvent apparaître naturellement sur les hosties ?",es:"¿El resultado del 15% de las pruebas de control del JFSR no muestra que sustancias rojas pueden aparecer naturalmente en las obleas?",de:"Zeigt das 15%-Ergebnis der JFSR-Kontrolltests nicht, dass rote Substanzen natürlich auf Waffeln erscheinen können?"},a1:{en:"Yes, Kearse and Ligaj successfully demonstrated that Epicoccum nigrum can produce red pigmentation on wheat wafers that superficially resembles blood. However, this result only concerns red fungal growth, not cardiac tissue, not blood, and certainly not intact white blood cells infiltrating the myocardium.",fr:"Oui, Kearse et Ligaj ont démontré avec succès que Epicoccum nigrum peut produire une pigmentation rouge sur les hosties de blé qui ressemble superficiellement à du sang. Cependant, ce résultat ne concerne que la croissance fongique rouge, pas le tissu cardiaque, pas le sang, et certainement pas les globules blancs intacts infiltrant le myocarde.",es:"Sí, Kearse y Ligaj demostraron con éxito que Epicoccum nigrum puede producir una pigmentación roja en las obleas de trigo que se asemeja superficialmente a la sangre. Sin embargo, este resultado solo concierne al crecimiento fúngico rojo, no al tejido cardíaco, no a la sangre, y ciertamente no a los glóbulos blancos intactos que se infiltran en el miocardio.",de:"Ja, Kearse und Ligaj haben erfolgreich gezeigt, dass Epicoccum nigrum auf Weizenwaffeln eine rote Pigmentierung erzeugen kann, die oberflächlich wie Blut aussieht. Allerdings betrifft dieses Ergebnis nur rotes Pilzwachstum, nicht Herzgewebe, nicht Blut und sicherlich keine intakten weißen Blutkörperchen, die das Myokard infiltrieren."},q2:{en:"Do the authors replicate any of the key biological or structural features of the miracles?",fr:"Les auteurs reproduisent-ils l'une des caractéristiques biologiques ou structurelles clés des miracles ?",es:"¿Replican los autores alguna de las características biológicas o estructurales clave de los milagros?",de:"Replizieren die Autoren eines der biologischen oder strukturellen Hauptmerkmale der Wunder?"},a2:{en:"No. Kearse and Ligaj themselves admit their work does not attempt replication of the complex biological structures found in the miracle samples. Their focus is solely on visual mimicry using fungal pigments.",fr:"Non. Kearse et Ligaj admettent eux-mêmes que leur travail ne tente pas de reproduire les structures biologiques complexes trouvées dans les échantillons miraculeux. Leur objectif est uniquement le mimétisme visuel utilisant des pigments fongiques.",es:"No. Kearse y Ligaj admiten ellos mismos que su trabajo no intenta replicar las complejas estructuras biológicas encontradas en las muestras de los milagros. Su enfoque es únicamente en el mimetismo visual usando pigmentos fúngicos.",de:"Nein. Kearse und Ligaj geben selbst zu, dass ihre Arbeit nicht versucht, die komplexen biologischen Strukturen zu replizieren, die in den Wunderproben gefunden wurden. Ihr Fokus liegt ausschließlich auf visueller Mimikry unter Verwendung von Pilzpigmenten."},q3:{en:"Can bacteria or fungi explain the AB blood typing observed in all three miracles?",fr:"Les bactéries ou les champignons peuvent-ils expliquer le groupage sanguin AB observé dans les trois miracles ?",es:"¿Pueden las bacterias u hongos explicar el tipaje sanguíneo AB observado en los tres milagros?",de:"Können Bakterien oder Pilze die in allen drei Wundern beobachtete AB-Blutgruppe erklären?"},a3:{en:"Kearse notes that bacteria can express AB-like antigens, but he does not demonstrate full mimicry of human blood typing. No bacterium expresses this entire human-specific antigenic profile required to test positive as human AB blood.",fr:"Kearse note que les bactéries peuvent exprimer des antigènes de type AB, mais il ne démontre pas un mimétisme complet du groupage sanguin humain. Aucune bactérie n'exprime ce profil antigénique spécifique humain entier nécessaire pour un test positif de sang humain AB.",es:"Kearse señala que las bacterias pueden expresar antígenos tipo AB, pero no demuestra un mimetismo completo del tipaje sanguíneo humano. Ninguna bacteria expresa este perfil antigénico específico humano completo requerido para dar positivo como sangre humana AB.",de:"Kearse merkt an, dass Bakterien AB-ähnliche Antigene exprimieren können, aber er demonstriert keine vollständige Mimikry der menschlichen Blutgruppenbestimmung. Kein Bakterium exprimiert dieses gesamte humanspezifische Antigenprofil, das für einen positiven Test als menschliches AB-Blut erforderlich ist."},q4:{en:"Why didn’t the JFSR study perform STR or HLA typing on the actual miracle samples?",fr:"Pourquoi l'étude JFSR n'a-t-elle pas effectué de typage STR ou HLA sur les échantillons réels de miracles ?",es:"¿Por qué el estudio del JFSR no realizó tipificación STR o HLA en las muestras reales de milagros?",de:"Warum führte die JFSR-Studie keine STR- oder HLA-Typisierung an den tatsächlichen Wunderproben durch?"},a4:{en:"Kearse and Ligaj recommend rigorous DNA protocols such as Short Tandem Repeat (STR) analysis. Yet they do not apply this protocol to any actual Eucharistic miracle sample in their study, relying instead on theoretical critiques.",fr:"Kearse et Ligaj recommandent des protocoles ADN rigoureux tels que l'analyse des répétitions courtes en tandem (STR). Pourtant, ils n'appliquent pas ce protocole à un quelconque échantillon de miracle eucharistique réel dans leur étude, se basant plutôt sur des critiques théoriques.",es:"Kearse y Ligaj recomiendan protocolos de ADN rigurosos como el análisis de repetición en tándem corto (STR). Sin embargo, no aplican este protocolo a ninguna muestra de milagro eucarístico real en su estudio, basándose en cambio en críticas teóricas.",de:"Kearse und Ligaj empfehlen strenge DNA-Protokolle wie die Analyse von Short Tandem Repeats (STR). Dennoch wenden sie dieses Protokoll in ihrer Studie auf keine tatsächliche Probe eines eucharistischen Wunders an und verlassen sich stattdessen auf theoretische Kritiken."},q5:{en:"Isn’t the lack of human DNA evidence in some miracle samples suspicious?",fr:"L'absence de preuves d'ADN humain dans certains échantillons de miracles n'est-elle pas suspecte ?",es:"¿No es sospechosa la falta de evidencia de ADN humano en algunas muestras de milagros?",de:"Ist das Fehlen menschlicher DNA-Beweise in einigen Wunderproben nicht verdächtig?"},a5:{en:"It would be, if it were not for the advanced DNA degradation typical of samples not stored in sterile conditions. But in the case of Buenos Aires, Dr. Zugibe confirmed the sample came from the 'left ventricle of the heart' based on structural histology, which remains valid even if DNA is degraded.",fr:"Ce le serait, s'il n'y avait pas la dégradation avancée de l'ADN typique des échantillons non stockés dans des conditions stériles. Mais dans le cas de Buenos Aires, le Dr Zugibe a confirmé que l'échantillon provenait du « ventricule gauche du cœur » sur la base de l'histologie structurelle, ce qui reste valide même si l'ADN est dégradé.",es:"Lo sería, si no fuera por la avanzada degradación del ADN típica de muestras no almacenadas en condiciones estériles. Pero en el caso de Buenos Aires, el Dr. Zugibe confirmó que la muestra provenía del 'ventrículo izquierdo del corazón' basándose en la histología estructural, lo cual sigue siendo válido incluso si el ADN está degradado.",de:"Das wäre es, wenn es nicht die fortgeschrittene DNA-Degradation gäbe, die typisch für Proben ist, die nicht unter sterilen Bedingungen gelagert werden. Aber im Fall von Buenos Aires bestätigte Dr. Zugibe auf der Grundlage der strukturellen Histologie, dass die Probe aus dem 'linken Ventrikel des Herzens' stammte, was auch bei degradierter DNA gültig bleibt."},q6:{en:"Could human contamination explain the white blood cells and cardiac tissue?",fr:"La contamination humaine pourrait-elle expliquer les globules blancs et le tissu cardiaque ?",es:"¿Podría la contaminación humana explicar los glóbulos blancos y el tejido cardíaco?",de:"Könnte menschliche Kontamination die weißen Blutkörperchen und das Herzgewebe erklären?"},a6:{en:"No. According to Dr. Zugibe’s analysis, the white blood cells were intact and active. He stated: 'These white blood cells had penetrated the tissue, indicating the heart was alive at the moment the sample was taken.' White blood cells do not remain viable in aqueous solutions for more than a few hours, ruling out contamination.",fr:"Non. Selon l'analyse du Dr Zugibe, les globules blancs étaient intacts et actifs. Il a déclaré : « Ces globules blancs avaient pénétré le tissu, indiquant que le cœur était vivant au moment où l'échantillon a été prélevé. » Les globules blancs ne restent pas viables dans des solutions aqueuses pendant plus de quelques heures, excluant la contamination.",es:"No. Según el análisis del Dr. Zugibe, los glóbulos blancos estaban intactos y activos. Declaró: 'Estos glóbulos blancos habían penetrado el tejido, indicando que el corazón estaba vivo en el momento en que se tomó la muestra'. Los glóbulos blancos no permanecen viables en soluciones acuosas por más de unas pocas horas, descartando la contaminación.",de:"Nein. Laut Dr. Zugibes Analyse waren die weißen Blutkörperchen intakt und aktiv. Er erklärte: 'Diese weißen Blutkörperchen waren in das Gewebe eingedrungen, was darauf hindeutet, dass das Herz zum Zeitpunkt der Probenentnahme am Leben war.' Weiße Blutkörperchen bleiben in wässrigen Lösungen nicht länger als ein paar Stunden lebensfähig, was eine Kontamination ausschließt."},q7:{en:"Does the JFSR article explain the microscopic fusion of heart tissue and bread matrix in Sokółka?",fr:"L'article JFSR explique-t-il la fusion microscopique du tissu cardiaque et de la matrice du pain à Sokółka ?",es:"¿El artículo del JFSR explica la fusión microscópica de tejido cardíaco y matriz de pan en Sokółka?",de:"Erklärt der JFSR-Artikel die mikroskopische Fusion von Herzgewebe und Brotmatrix in Sokółka?"},a7:{en:"No. The article does not attempt any electron microscopy comparisons with the Sokółka sample. Polish histopathologists concluded: 'The structure of the heart muscle fibers is deeply intertwined with that of the bread, in a way impossible to achieve with human means.'",fr:"Non. L'article ne tente aucune comparaison par microscopie électronique avec l'échantillon de Sokółka. Les histopathologistes polonais ont conclu : « La structure des fibres musculaires cardiaques est profondément entrelacée avec celle du pain, d'une manière impossible à réaliser avec des moyens humains. »",es:"No. El artículo no intenta ninguna comparación de microscopía electrónica con la muestra de Sokółka. Los histopatólogos polacos concluyeron: 'La estructura de las fibras del músculo cardíaco está profundamente entrelazada con la del pan, de una manera imposible de lograr con medios humanos'.",de:"Nein. Der Artikel versucht keine elektronenmikroskopischen Vergleiche mit der Probe aus Sokółka. Polnische Histopathologen schlossen: 'Die Struktur der Herzmuskelfasern ist tief mit der des Brotes verflochten, auf eine Weise, die mit menschlichen Mitteln unmöglich zu erreichen ist.'"},q8:{en:"Is there evidence that the red substances in the miracles are just fungal pigments?",fr:"Y a-t-il des preuves que les substances rouges dans les miracles sont juste des pigments fongiques ?",es:"¿Hay evidencia de que las sustancias rojas en los milagros son solo pigmentos fúngicos?",de:"Gibt es Beweise dafür, dass die roten Substanzen in den Wundern nur Pilzpigmente sind?"},a8:{en:"No. In Tixtla, the samples were examined and found to contain intact red blood cells, white blood cells, active macrophages, and fresh blood, which are biological components distinct from simple fungal pigments.",fr:"Non. À Tixtla, les échantillons ont été examinés et trouvés contenant des globules rouges intacts, des globules blancs, des macrophages actifs et du sang frais, qui sont des composants biologiques distincts des simples pigments fongiques.",es:"No. En Tixtla, las muestras fueron examinadas y se encontró que contenían glóbulos rojos intactos, glóbulos blancos, macrófagos activos y sangre fresca, que son componentes biológicos distintos de los simples pigmentos fúngicos.",de:"Nein. In Tixtla wurden die Proben untersucht und enthielten intakte rote Blutkörperchen, weiße Blutkörperchen, aktive Makrophagen und frisches Blut, was biologische Komponenten sind, die sich von einfachen Pilzpigmenten unterscheiden."},q9:{en:"Could the Church have planted the tissue in these wafers?",fr:"L'Église aurait-elle pu placer le tissu dans ces hosties ?",es:"¿Podría la Iglesia haber plantado el tejido en estas obleas?",de:"Könnte die Kirche das Gewebe in diese Waffeln gepflanzt haben?"},a9:{en:"This theory would require that living heart tissue under stress be surgically removed and placed into a host without detection within minutes to preserve the white blood cells. As Dr. Spitzer points out, 'the tissue cannot be obtained from a deceased subject' because the cells die too quickly.",fr:"Cette théorie nécessiterait que du tissu cardiaque vivant sous stress soit chirurgicalement retiré et placé dans une hostie sans détection en quelques minutes pour préserver les globules blancs. Comme le souligne le Dr Spitzer, « le tissu ne peut pas être obtenu d'un sujet décédé » car les cellules meurent trop rapidement.",es:"Esta teoría requeriría que tejido cardíaco vivo bajo estrés fuera extirpado quirúrgicamente y colocado en una hostia sin detección en cuestión de minutos para preservar los glóbulos blancos. Como señala el Dr. Spitzer, 'el tejido no se puede obtener de un sujeto fallecido' porque las células mueren demasiado rápido.",de:"Diese Theorie würde erfordern, dass lebendes Herzgewebe unter Stress chirurgisch entfernt und innerhalb von Minuten ohne Entdeckung in eine Hostie eingebracht wird, um die weißen Blutkörperchen zu erhalten. Wie Dr. Spitzer betont, 'kann das Gewebe nicht von einem verstorbenen Subjekt gewonnen werden', da die Zellen zu schnell sterben."},q10:{en:"Does the JFSR article refute or re-analyze the primary tissue samples?",fr:"L'article JFSR réfute-t-il ou réanalyse-t-il les échantillons de tissus primaires ?",es:"¿El artículo del JFSR refuta o reanaliza las muestras de tejido primarias?",de:"Widerlegt oder analysiert der JFSR-Artikel die primären Gewebeproben neu?"},a10:{en:"No. Kearse and Ligaj make it clear: 'This study is not intended to disprove miracles.' Their critique focuses on standardization for future tests, not on undermining the forensic findings already on record.",fr:"Non. Kearse et Ligaj précisent : « Cette étude n'est pas destinée à réfuter les miracles. » Leur critique se concentre sur la standardisation pour les tests futurs, pas sur la sape des conclusions médico-légales déjà enregistrées.",es:"No. Kearse y Ligaj dejan claro: 'Este estudio no pretende refutar milagros'. Su crítica se centra en la estandarización para futuras pruebas, no en socavar los hallazgos forenses ya registrados.",de:"Nein. Kearse und Ligaj stellen klar: 'Diese Studie soll keine Wunder widerlegen.' Ihre Kritik konzentriert sich auf die Standardisierung für zukünftige Tests, nicht darauf, die bereits vorliegenden forensischen Befunde zu untergraben."}},pdf_semantics_name:{en:"The Semantics of Eucharistic Miracles (PDF)",fr:"La Sémantique des Miracles Eucharistiques (PDF)",es:"La Semántica de los Milagros Eucarísticos (PDF)",de:"Die Semantik eucharistischer Wunder (PDF)"},pdf_semantics_url:{en:"/pdfs/eucharistic-semantics.pdf"}},demonic:{h3:{en:"Are Eucharistic miracles demonic?",fr:"Les miracles eucharistiques sont-ils démoniaques ?",es:"¿Son los milagros eucarísticos demoníacos?",de:"Sind eucharistische Wunder dämonisch?"},vid:{en:"Watch: Are Eucharistic miracles demonic?",fr:"Regarder : Les miracles eucharistiques sont-ils démoniaques ?",es:"Ver: ¿Son los milagros eucarísticos demoníacos?",de:"Ansehen: Sind eucharistische Wunder dämonisch?"}},books:{h3:{en:"Books",fr:"Livres",es:"Libros",de:"Bücher"},book1:{title:{en:"Christ, Science, and Reason: What We Can Know about Jesus, Mary, and Miracles",fr:"Christ, Science et Raison : Ce que nous pouvons savoir sur Jésus, Marie et les Miracles",es:"Cristo, Ciencia y Razón: Lo que podemos saber sobre Jesús, María y los Milagros",de:"Christus, Wissenschaft und Vernunft: Was wir über Jesus, Maria und Wunder wissen können"},author:{en:"Book by Robert Spitzer",fr:"Livre de Robert Spitzer",es:"Libro de Robert Spitzer",de:"Buch von Robert Spitzer"},desc:{en:"This is currently the only volume that comprehensively synthesizes these findings and highlights the profound significance of the scientific evidence in support of Jesus, the Eucharist, and Mary. The book makes it abundantly clear that the Catholic Church is not anti-science, and that true science is not anti-God.",fr:"C'est actuellement le seul volume qui synthétise complètement ces découvertes et met en évidence la signification profonde des preuves scientifiques à l'appui de Jésus, de l'Eucharistie et de Marie. Le livre rend abondamment clair que l'Église catholique n'est pas anti-science, et que la vraie science n'est pas anti-Dieu.",es:"Este es actualmente el único volumen que sintetiza exhaustivamente estos hallazgos y destaca el profundo significado de la evidencia científica en apoyo de Jesús, la Eucaristía y María. El libro deja muy claro que la Iglesia Católica no es anti-ciencia, y que la verdadera ciencia no es anti-Dios.",de:"Dies ist derzeit der einzige Band, der diese Erkenntnisse umfassend zusammenfasst und die tiefgreifende Bedeutung der wissenschaftlichen Beweise zur Unterstützung von Jesus, der Eucharistie und Maria hervorhebt. Das Buch macht überdeutlich, dass die katholische Kirche nicht wissenschaftsfeindlich ist und dass wahre Wissenschaft nicht gottfeindlich ist."}},book2:{title:{en:"A Cardiologist Examines Jesus: The Stunning Science Behind Eucharistic Miracles",fr:"Un Cardiologue Examine Jésus : La Science Étonnante Derrière les Miracles Eucharistiques",es:"Un Cardiólogo Examina a Jesús: La Sorprendente Ciencia Detrás de los Milagros Eucarísticos",de:"Ein Kardiologe untersucht Jesus: Die erstaunliche Wissenschaft hinter eucharistischen Wundern"},author:{en:"Dr. Serafini",fr:"Dr Serafini",es:"Dr. Serafini",de:"Dr. Serafini"},desc:{en:"Dr. Serafini rigorously reviews scientific and forensic reports on five major Eucharistic miracles, including Buenos Aires (1996), Tixtla (2006), and Sokolka (2008). He analyzes histological findings of human heart tissue, cardiac pathology indicating severe stress, and immunological evidence of white blood cells. Dr. Serafini emphasizes that these studies were conducted blindly, without the researchers knowing the origin of the samples, ensuring objective results.",fr:"Le Dr Serafini passe en revue rigoureusement les rapports scientifiques et médico-légaux sur cinq miracles eucharistiques majeurs, dont Buenos Aires (1996), Tixtla (2006) et Sokolka (2008). Il analyse les résultats histologiques du tissu cardiaque humain, la pathologie cardiaque indiquant un stress sévère et les preuves immunologiques de globules blancs. Le Dr Serafini souligne que ces études ont été menées en aveugle, sans que les chercheurs ne connaissent l'origine des échantillons, garantissant des résultats objectifs.",es:"El Dr. Serafini revisa rigurosamente los informes científicos y forenses sobre cinco milagros eucarísticos principales, incluidos Buenos Aires (1996), Tixtla (2006) y Sokolka (2008). Analiza los hallazgos histológicos de tejido cardíaco humano, la patología cardíaca que indica estrés severo y la evidencia inmunológica de glóbulos blancos. El Dr. Serafini enfatiza que estos estudios se realizaron a ciegas, sin que los investigadores conocieran el origen de las muestras, asegurando resultados objetivos.",de:"Dr. Serafini überprüft rigoros wissenschaftliche und forensische Berichte über fünf große eucharistische Wunder, darunter Buenos Aires (1996), Tixtla (2006) und Sokolka (2008). Er analysiert histologische Befunde von menschlichem Herzgewebe, Herzpathologie, die auf schweren Stress hinweist, und immunologische Beweise für weiße Blutkörperchen. Dr. Serafini betont, dass diese Studien blind durchgeführt wurden, ohne dass die Forscher die Herkunft der Proben kannten, was objektive Ergebnisse gewährleistet."}}}}};var St={};St.d=(r,e)=>{for(var t in e)St.o(e,t)&&!St.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:e[t]})};St.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);var F=globalThis.pdfjsLib={};St.d(F,{AbortException:()=>nt,AnnotationEditorLayer:()=>Be,AnnotationEditorParamsType:()=>N,AnnotationEditorType:()=>q,AnnotationEditorUIManager:()=>Ue,AnnotationLayer:()=>_r,AnnotationMode:()=>We,ColorPicker:()=>Ce,DOMSVGFactory:()=>zi,DrawLayer:()=>ge,FeatureTest:()=>xe,GlobalWorkerOptions:()=>kt,ImageKind:()=>Bt,InvalidPDFException:()=>Ss,MissingPDFException:()=>st,OPS:()=>Ie,OutputScale:()=>gi,PDFDataRangeTransport:()=>Os,PDFDateString:()=>ks,PDFWorker:()=>ce,PasswordResponses:()=>In,PermissionFlag:()=>Pn,PixelsPerInch:()=>mt,RenderingCancelledException:()=>Ti,TextLayer:()=>xi,UnexpectedResponseException:()=>$t,Util:()=>P,VerbosityLevel:()=>Vt,XfaLayer:()=>Gs,build:()=>rr,createValidAbsoluteUrl:()=>Fn,fetchData:()=>Jt,getDocument:()=>Ya,getFilenameFromUrl:()=>Vn,getPdfFilenameFromUrl:()=>Un,getXfaPageViewport:()=>Kn,isDataScheme:()=>Yt,isPdfFile:()=>Ci,noContextMenu:()=>Le,normalizeUnicode:()=>Hn,setLayerDimensions:()=>et,shadow:()=>G,version:()=>ar});const be=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),ws=[1,0,0,1,0,0],hi=[.001,0,0,.001,0,0],Ln=1e7,ni=1.35,ke={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},We={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Mn="pdfjs_internal_editor_",q={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},N={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},Pn={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},pe={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Bt={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ne={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},yt={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Vt={ERRORS:0,WARNINGS:1,INFOS:5},Ie={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},In={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Ut=Vt.WARNINGS;function Rn(r){Number.isInteger(r)&&(Ut=r)}function Dn(){return Ut}function Kt(r){Ut>=Vt.INFOS&&console.log(`Info: ${r}`)}function B(r){Ut>=Vt.WARNINGS&&console.log(`Warning: ${r}`)}function X(r){throw new Error(r)}function re(r,e){r||X(e)}function Nn(r){switch(r?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Fn(r,e=null,t=null){if(!r)return null;try{if(t&&typeof r=="string"&&(t.addDefaultProtocol&&r.startsWith("www.")&&r.match(/\./g)?.length>=2&&(r=`http://${r}`),t.tryConvertEncoding))try{r=On(r)}catch{}const i=e?new URL(r,e):new URL(r);if(Nn(i))return i}catch{}return null}function G(r,e,t,i=!1){return Object.defineProperty(r,e,{value:t,enumerable:!i,configurable:!0,writable:!1}),t}const $e=(function(){function e(t,i){this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e})();class mi extends $e{constructor(e,t){super(e,"PasswordException"),this.code=t}}class pi extends $e{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Ss extends $e{constructor(e){super(e,"InvalidPDFException")}}class st extends $e{constructor(e){super(e,"MissingPDFException")}}class $t extends $e{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class jn extends $e{constructor(e){super(e,"FormatError")}}class nt extends $e{constructor(e){super(e,"AbortException")}}function Es(r){(typeof r!="object"||r?.length===void 0)&&X("Invalid argument for bytesToString");const e=r.length,t=8192;if(e<t)return String.fromCharCode.apply(null,r);const i=[];for(let s=0;s<e;s+=t){const n=Math.min(s+t,e),a=r.subarray(s,n);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function Xt(r){typeof r!="string"&&X("Invalid argument for stringToBytes");const e=r.length,t=new Uint8Array(e);for(let i=0;i<e;++i)t[i]=r.charCodeAt(i)&255;return t}function qn(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function ki(r){const e=Object.create(null);for(const[t,i]of r)e[t]=i;return e}function zn(){const r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function Bn(){try{return new Function(""),!0}catch{return!1}}class xe{static get isLittleEndian(){return G(this,"isLittleEndian",zn())}static get isEvalSupported(){return G(this,"isEvalSupported",Bn())}static get isOffscreenCanvasSupported(){return G(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof navigator?.platform=="string"?G(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof navigator?.userAgent=="string"&&navigator.userAgent.includes("Firefox")}):G(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){return G(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const ai=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0"));class P{static makeHexColor(e,t,i){return`#${ai[e]}${ai[t]}${ai[i]}`}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const i=e[0]*t[0]+e[1]*t[2]+t[4],s=e[0]*t[1]+e[1]*t[3]+t[5];return[i,s]}static applyInverseTransform(e,t){const i=t[0]*t[3]-t[1]*t[2],s=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,n=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i;return[s,n]}static getAxialAlignedBoundingBox(e,t){const i=this.applyTransform(e,t),s=this.applyTransform(e.slice(2,4),t),n=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(i[0],s[0],n[0],a[0]),Math.min(i[1],s[1],n[1],a[1]),Math.max(i[0],s[0],n[0],a[0]),Math.max(i[1],s[1],n[1],a[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],s=e[0]*t[1]+e[1]*t[3],n=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],o=(i+a)/2,l=Math.sqrt((i+a)**2-4*(i*a-n*s))/2,c=o+l||1,d=o-l||1;return[Math.sqrt(c),Math.sqrt(d)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>s)return null;const n=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return n>a?null:[i,n,s,a]}static#e(e,t,i,s,n,a,o,l,c,d){if(c<=0||c>=1)return;const h=1-c,m=c*c,p=m*c,g=h*(h*(h*e+3*c*t)+3*m*i)+p*s,b=h*(h*(h*n+3*c*a)+3*m*o)+p*l;d[0]=Math.min(d[0],g),d[1]=Math.min(d[1],b),d[2]=Math.max(d[2],g),d[3]=Math.max(d[3],b)}static#t(e,t,i,s,n,a,o,l,c,d,h,m){if(Math.abs(c)<1e-12){Math.abs(d)>=1e-12&&this.#e(e,t,i,s,n,a,o,l,-h/d,m);return}const p=d**2-4*h*c;if(p<0)return;const g=Math.sqrt(p),b=2*c;this.#e(e,t,i,s,n,a,o,l,(-d+g)/b,m),this.#e(e,t,i,s,n,a,o,l,(-d-g)/b,m)}static bezierBoundingBox(e,t,i,s,n,a,o,l,c){return c?(c[0]=Math.min(c[0],e,o),c[1]=Math.min(c[1],t,l),c[2]=Math.max(c[2],e,o),c[3]=Math.max(c[3],t,l)):c=[Math.min(e,o),Math.min(t,l),Math.max(e,o),Math.max(t,l)],this.#t(e,i,n,o,t,s,a,l,3*(-e+3*(i-n)+o),6*(e-2*i+n),3*(i-e),c),this.#t(e,i,n,o,t,s,a,l,3*(-t+3*(s-a)+l),6*(t-2*s+a),3*(s-t),c),c}}function On(r){return decodeURIComponent(escape(r))}let ri=null,Gi=null;function Hn(r){return ri||(ri=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Gi=new Map([["ﬅ","ſt"]])),r.replaceAll(ri,(e,t,i)=>t?t.normalize("NFKC"):Gi.get(i))}function Gn(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const r=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(r);else for(let e=0;e<32;e++)r[e]=Math.floor(Math.random()*255);return Es(r)}const _i="pdfjs_internal_id_",Fe={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function Wn(r){return Uint8Array.prototype.toBase64?r.toBase64():btoa(Es(r))}const qe="http://www.w3.org/2000/svg";class mt{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Jt(r,e="text"){if(At(r,document.baseURI)){const t=await fetch(r);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,i)=>{const s=new XMLHttpRequest;s.open("GET",r,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}i(new Error(s.statusText))}},s.send(null)})}class Tt{constructor({viewBox:e,scale:t,rotation:i,offsetX:s=0,offsetY:n=0,dontFlip:a=!1}){this.viewBox=e,this.scale=t,this.rotation=i,this.offsetX=s,this.offsetY=n;const o=(e[2]+e[0])/2,l=(e[3]+e[1])/2;let c,d,h,m;switch(i%=360,i<0&&(i+=360),i){case 180:c=-1,d=0,h=0,m=1;break;case 90:c=0,d=1,h=1,m=0;break;case 270:c=0,d=-1,h=-1,m=0;break;case 0:c=1,d=0,h=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(h=-h,m=-m);let p,g,b,v;c===0?(p=Math.abs(l-e[1])*t+s,g=Math.abs(o-e[0])*t+n,b=(e[3]-e[1])*t,v=(e[2]-e[0])*t):(p=Math.abs(o-e[0])*t+s,g=Math.abs(l-e[1])*t+n,b=(e[2]-e[0])*t,v=(e[3]-e[1])*t),this.transform=[c*t,d*t,h*t,m*t,p-c*t*o-h*t*l,g-d*t*o-m*t*l],this.width=b,this.height=v}get rawDims(){const{viewBox:e}=this;return G(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:s=this.offsetY,dontFlip:n=!1}={}){return new Tt({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:i,offsetY:s,dontFlip:n})}convertToViewportPoint(e,t){return P.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=P.applyTransform([e[0],e[1]],this.transform),i=P.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){return P.applyInverseTransform([e,t],this.transform)}}class Ti extends $e{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Yt(r){const e=r.length;let t=0;for(;t<e&&r[t].trim()==="";)t++;return r.substring(t,t+5).toLowerCase()==="data:"}function Ci(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function Vn(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function Un(r,e="document.pdf"){if(typeof r!="string")return e;if(Yt(r))return B('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=t.exec(r);let n=i.exec(s[1])||i.exec(s[2])||i.exec(s[3]);if(n&&(n=n[0],n.includes("%")))try{n=i.exec(decodeURIComponent(n))[0]}catch{}return n||e}class Wi{started=Object.create(null);times=[];time(e){e in this.started&&B(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||B(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:i}of this.times)t=Math.max(i.length,t);for(const{name:i,start:s,end:n}of this.times)e.push(`${i.padEnd(t)} ${n-s}ms
`);return e.join("")}}function At(r,e){try{const{protocol:t}=e?new URL(r,e):new URL(r);return t==="http:"||t==="https:"}catch{return!1}}function Le(r){r.preventDefault()}function Vi(r){console.log("Deprecated API usage: "+r)}class ks{static#e;static toDateObject(e){if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const i=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let n=parseInt(t[3],10);n=n>=1&&n<=31?n:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const c=t[7]||"Z";let d=parseInt(t[8],10);d=d>=0&&d<=23?d:0;let h=parseInt(t[9],10)||0;return h=h>=0&&h<=59?h:0,c==="-"?(a+=d,o+=h):c==="+"&&(a-=d,o-=h),new Date(Date.UTC(i,s,n,a,o,l))}}function Kn(r,{scale:e=1,rotation:t=0}){const{width:i,height:s}=r.attributes.style,n=[0,0,parseInt(i),parseInt(s)];return new Tt({viewBox:n,scale:e,rotation:t})}function Li(r){if(r.startsWith("#")){const e=parseInt(r.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(e=>parseInt(e)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(B(`Not a valid color format: "${r}"`),[0,0,0])}function $n(r){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of r.keys()){e.style.color=t;const i=window.getComputedStyle(e).color;r.set(t,Li(i))}e.remove()}function Y(r){const{a:e,b:t,c:i,d:s,e:n,f:a}=r.getTransform();return[e,t,i,s,n,a]}function je(r){const{a:e,b:t,c:i,d:s,e:n,f:a}=r.getTransform().invertSelf();return[e,t,i,s,n,a]}function et(r,e,t=!1,i=!0){if(e instanceof Tt){const{pageWidth:s,pageHeight:n}=e.rawDims,{style:a}=r,o=xe.isCSSRoundSupported,l=`var(--scale-factor) * ${s}px`,c=`var(--scale-factor) * ${n}px`,d=o?`round(down, ${l}, var(--scale-round-x, 1px))`:`calc(${l})`,h=o?`round(down, ${c}, var(--scale-round-y, 1px))`:`calc(${c})`;!t||e.rotation%180===0?(a.width=d,a.height=h):(a.width=h,a.height=d)}i&&r.setAttribute("data-main-rotation",e.rotation)}class gi{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}class Et{#e=null;#t=null;#i;#s=null;#a=null;static#n=null;constructor(e){this.#i=e,Et.#n||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#i._uiManager._signal;e.addEventListener("contextmenu",Le,{signal:t}),e.addEventListener("pointerdown",Et.#l,{signal:t});const i=this.#s=document.createElement("div");i.className="buttons",e.append(i);const s=this.#i.toolbarPosition;if(s){const{style:n}=e,a=this.#i._uiManager.direction==="ltr"?1-s[0]:s[0];n.insetInlineEnd=`${100*a}%`,n.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return this.#u(),e}get div(){return this.#e}static#l(e){e.stopPropagation()}#c(e){this.#i._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()}#d(e){this.#i._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()}#o(e){const t=this.#i._uiManager._signal;e.addEventListener("focusin",this.#c.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Le,{signal:t})}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#a?.shown()}#u(){const{editorType:e,_uiManager:t}=this.#i,i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",Et.#n[e]),this.#o(i),i.addEventListener("click",s=>{t.delete()},{signal:t._signal}),this.#s.append(i)}get#r(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const t=await e.render();this.#o(t),this.#s.prepend(t,this.#r),this.#a=e}addColorPicker(e){this.#t=e;const t=e.renderButton();this.#o(t),this.#s.prepend(t,this.#r)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class Xn{#e=null;#t=null;#i;constructor(e){this.#i=e}#s(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Le,{signal:this.#i._signal});const t=this.#e=document.createElement("div");return t.className="buttons",e.append(t),this.#n(),e}#a(e,t){let i=0,s=0;for(const n of e){const a=n.y+n.height;if(a<i)continue;const o=n.x+(t?n.width:0);if(a>i){s=o,i=a;continue}t?o>s&&(s=o):o<s&&(s=o)}return[t?1-s:s,i]}show(e,t,i){const[s,n]=this.#a(t,i),{style:a}=this.#t||=this.#s();e.append(this.#t),a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*n}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#n(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=this.#i._signal;e.addEventListener("contextmenu",Le,{signal:i}),e.addEventListener("click",()=>{this.#i.highlightSelection("floating_button")},{signal:i}),this.#e.append(e)}}function Ot(r,e,t){for(const i of t)e.addEventListener(i,r[i].bind(r))}function Jn(r){return Math.round(Math.min(255,Math.max(1,255*r))).toString(16).padStart(2,"0")}class Yn{#e=0;get id(){return`${Mn}${this.#e++}`}}class Mi{#e=Gn();#t=0;#i=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const n=s.decode().then(()=>(i.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return G(this,"_isSVGFittingCanvas",n)}async#s(e,t){this.#i||=new Map;let i=this.#i.get(e);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let s;if(typeof t=="string"?(i.url=t,s=await Jt(t,"blob")):t instanceof File?s=i.file=t:t instanceof Blob&&(s=t),s.type==="image/svg+xml"){const n=Mi._isSVGFittingCanvas,a=new FileReader,o=new Image,l=new Promise((c,d)=>{o.onload=()=>{i.bitmap=o,i.isSvg=!0,c()},a.onload=async()=>{const h=i.svgUrl=a.result;o.src=await n?`${h}#svgView(preserveAspectRatio(none))`:h},o.onerror=a.onerror=d});a.readAsDataURL(s),await l}else i.bitmap=await createImageBitmap(s);i.refCounter=1}catch(s){console.error(s),i=null}return this.#i.set(e,i),i&&this.#i.set(i.id,i),i}async getFromFile(e){const{lastModified:t,name:i,size:s,type:n}=e;return this.#s(`${t}_${i}_${s}_${n}`,e)}async getFromUrl(e){return this.#s(e,e)}async getFromBlob(e,t){const i=await t;return this.#s(e,i)}async getFromId(e){this.#i||=new Map;const t=this.#i.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:i}=t;return delete t.blobPromise,this.getFromBlob(t.id,i)}return this.getFromUrl(t.url)}getFromCanvas(e,t){this.#i||=new Map;let i=this.#i.get(e);if(i?.bitmap)return i.refCounter+=1,i;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),i={bitmap:s.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#i.set(e,i),this.#i.set(i.id,i),i}getSvgUrl(e){const t=this.#i.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#i||=new Map;const t=this.#i.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:i}=t;if(!t.url&&!t.file){const s=new OffscreenCanvas(i.width,i.height);s.getContext("bitmaprenderer").transferFromImageBitmap(i),t.blobPromise=s.convertToBlob()}i.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class Zn{#e=[];#t=!1;#i;#s=-1;constructor(e=128){this.#i=e}add({cmd:e,undo:t,post:i,mustExec:s,type:n=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(s&&e(),this.#t)return;const l={cmd:e,undo:t,post:i,type:n};if(this.#s===-1){this.#e.length>0&&(this.#e.length=0),this.#s=0,this.#e.push(l);return}if(a&&this.#e[this.#s].type===n){o&&(l.undo=this.#e[this.#s].undo),this.#e[this.#s]=l;return}const c=this.#s+1;c===this.#i?this.#e.splice(0,1):(this.#s=c,c<this.#e.length&&this.#e.splice(c)),this.#e.push(l)}undo(){if(this.#s===-1)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#s];e(),t?.(),this.#t=!1,this.#s-=1}redo(){if(this.#s<this.#e.length-1){this.#s+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#s];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#s!==-1}hasSomethingToRedo(){return this.#s<this.#e.length-1}destroy(){this.#e=null}}class Ct{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=xe.platform;for(const[i,s,n={}]of e)for(const a of i){const o=a.startsWith("mac+");t&&o?(this.callbacks.set(a.slice(4),{callback:s,options:n}),this.allKeys.add(a.split("+").at(-1))):!t&&!o&&(this.callbacks.set(a,{callback:s,options:n}),this.allKeys.add(a.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(this.#e(t));if(!i)return;const{callback:s,options:{bubbles:n=!1,args:a=[],checker:o=null}}=i;o&&!o(e,t)||(s.bind(e,...a,t)(),n||(t.stopPropagation(),t.preventDefault()))}}class Pi{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return $n(e),G(this,"_colors",e)}convert(e){const t=Li(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[i,s]of this._colors)if(s.every((n,a)=>n===t[a]))return Pi._colorsMapping.get(i);return t}getHexCode(e){const t=this._colors.get(e);return t?P.makeHexColor(...t):e}}class Ue{#e=new AbortController;#t=null;#i=new Map;#s=new Map;#a=null;#n=null;#l=null;#c=new Zn;#d=null;#o=0;#u=new Set;#r=null;#h=null;#p=new Set;#m=!1;#b=!1;#f=!1;#g=null;#y=null;#x=null;#_=null;#S=!1;#E=null;#N=new Yn;#T=!1;#A=!1;#k=null;#C=null;#L=null;#I=null;#w=q.NONE;#v=new Set;#R=null;#D=null;#F=null;#H={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#z=[0,0];#j=null;#q=null;#O=null;#M=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=Ue.prototype,t=a=>a.#q.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),i=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:l}=o;return l!=="text"&&l!=="number"}return!0},s=this.TRANSLATE_SMALL,n=this.TRANSLATE_BIG;return G(this,"_keyboardManager",new Ct([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&a.#q.contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&a.#q.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-n,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[n,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-n],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,n],checker:t}]]))}constructor(e,t,i,s,n,a,o,l,c,d,h){const m=this._signal=this.#e.signal;this.#q=e,this.#O=t,this.#a=i,this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:m}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:m}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:m}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:m}),s._on("setpreference",this.onSetPreference.bind(this),{signal:m}),s._on("switchannotationeditorparams",p=>this.updateParams(p.type,p.value),{signal:m}),this.#ee(),this.#ne(),this.#K(),this.#n=n.annotationStorage,this.#g=n.filterFactory,this.#D=a,this.#_=o||null,this.#m=l,this.#b=c,this.#f=d,this.#I=h||null,this.viewParameters={realScale:mt.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}destroy(){this.#M?.resolve(),this.#M=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#s.values())e.destroy();this.#s.clear(),this.#i.clear(),this.#p.clear(),this.#t=null,this.#v.clear(),this.#c.destroy(),this.#a?.destroy(),this.#E?.hide(),this.#E=null,this.#y&&(clearTimeout(this.#y),this.#y=null),this.#j&&(clearTimeout(this.#j),this.#j=null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#I}get useNewAltTextFlow(){return this.#b}get useNewAltTextWhenAddingImage(){return this.#f}get hcmFilter(){return G(this,"hcmFilter",this.#D?this.#g.addHCMFilter(this.#D.foreground,this.#D.background):"none")}get direction(){return G(this,"direction",getComputedStyle(this.#q).direction)}get highlightColors(){return G(this,"highlightColors",this.#_?new Map(this.#_.split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return G(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){this.#L=e}editAltText(e,t=!1){this.#a?.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":this.#f=t;break}}onPageChanging({pageNumber:e}){this.#o=e-1}focusMainContainer(){this.#q.focus()}findParent(e,t){for(const i of this.#s.values()){const{x:s,y:n,width:a,height:o}=i.div.getBoundingClientRect();if(e>=s&&e<=s+a&&t>=n&&t<=n+o)return i}return null}disableUserSelect(e=!1){this.#O.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#p.add(e)}removeShouldRescale(e){this.#p.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*mt.PDF_TO_CSS_UNITS;for(const t of this.#p)t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#W({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#U(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const i of this.#s.values())if(i.hasTextLayer(e))return i;return null}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:n,focusOffset:a}=t,o=t.toString(),c=this.#W(t).closest(".textLayer"),d=this.getSelectionBoxes(c);if(!d)return;t.empty();const h=this.#U(c),m=this.#w===q.NONE,p=()=>{h?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:d,anchorNode:i,anchorOffset:s,focusNode:n,focusOffset:a,text:o}),m&&this.showAllEditors("highlight",!0,!0)};if(m){this.switchToMode(q.HIGHLIGHT,p);return}p()}#Z(){const e=document.getSelection();if(!e||e.isCollapsed)return;const i=this.#W(e).closest(".textLayer"),s=this.getSelectionBoxes(i);s&&(this.#E||=new Xn(this),this.#E.show(i,s,this.direction==="ltr"))}addToAnnotationStorage(e){!e.isEmpty()&&this.#n&&!this.#n.has(e.id)&&this.#n.setValue(e.id,e)}#Q(){const e=document.getSelection();if(!e||e.isCollapsed){this.#R&&(this.#E?.hide(),this.#R=null,this.#P({hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===this.#R)return;const s=this.#W(e).closest(".textLayer");if(!s){this.#R&&(this.#E?.hide(),this.#R=null,this.#P({hasSelectedText:!1}));return}if(this.#E?.hide(),this.#R=t,this.#P({hasSelectedText:!0}),!(this.#w!==q.HIGHLIGHT&&this.#w!==q.NONE)&&(this.#w===q.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#S=this.isShiftKeyDown,!this.isShiftKeyDown)){const n=this.#w===q.HIGHLIGHT?this.#U(s):null;n?.toggleDrawing();const a=new AbortController,o=this.combinedSignal(a),l=c=>{c.type==="pointerup"&&c.button!==0||(a.abort(),n?.toggleDrawing(!0),c.type==="pointerup"&&this.#V("main_toolbar"))};window.addEventListener("pointerup",l,{signal:o}),window.addEventListener("blur",l,{signal:o})}}#V(e=""){this.#w===q.HIGHLIGHT?this.highlightSelection(e):this.#m&&this.#Z()}#ee(){document.addEventListener("selectionchange",this.#Q.bind(this),{signal:this._signal})}#te(){if(this.#x)return;this.#x=new AbortController;const e=this.combinedSignal(this.#x);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#ie(){this.#x?.abort(),this.#x=null}blur(){if(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#V("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#v)if(t.div.contains(e)){this.#C=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#C)return;const[e,t]=this.#C;this.#C=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}#K(){if(this.#k)return;this.#k=new AbortController;const e=this.combinedSignal(this.#k);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#se(){this.#k?.abort(),this.#k=null}#$(){if(this.#d)return;this.#d=new AbortController;const e=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#X(){this.#d?.abort(),this.#d=null}#ne(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#K(),this.#$()}removeEditListeners(){this.#se(),this.#X()}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const i of this.#h)if(i.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const i of this.#h)if(i.isHandlingMimeForPasting(t.type)){i.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const i of this.#v){const s=i.serialize(!0);s&&t.push(s)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const n of t.items)for(const a of this.#h)if(a.isHandlingMimeForPasting(n.type)){a.paste(n,this.currentLayer);return}let i=t.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(n){B(`paste: "${n.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const s=this.currentLayer;try{const n=[];for(const l of i){const c=await s.deserialize(l);if(!c)return;n.push(c)}const a=()=>{for(const l of n)this.#J(l);this.#Y(n)},o=()=>{for(const l of n)l.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(n){B(`paste: "${n.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#w!==q.NONE&&!this.isEditorHandlingKeyboard&&Ue._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#V("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#P(e){Object.entries(e).some(([i,s])=>this.#H[i]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#H,e)}),this.#w===q.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#B([[N.HIGHLIGHT_FREE,!0]]))}#B(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#te(),this.#$(),this.#P({isEditing:this.#w!==q.NONE,isEmpty:this.#G(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ie(),this.#X(),this.#P({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#h){this.#h=e;for(const t of this.#h)this.#B(t.defaultPropertiesToUpdate)}}getId(){return this.#N.id}get currentLayer(){return this.#s.get(this.#o)}getLayer(e){return this.#s.get(e)}get currentPageIndex(){return this.#o}addLayer(e){this.#s.set(e.pageIndex,e),this.#T?e.enable():e.disable()}removeLayer(e){this.#s.delete(e.pageIndex)}async updateMode(e,t=null,i=!1){if(this.#w!==e&&!(this.#M&&(await this.#M.promise,!this.#M))){if(this.#M=Promise.withResolvers(),this.#w=e,e===q.NONE){this.setEditingState(!1),this.#re(),this.#M.resolve();return}this.setEditingState(!0),await this.#ae(),this.unselectAll();for(const s of this.#s.values())s.updateMode(e);if(!t){i&&this.addNewEditorFromKeyboard(),this.#M.resolve();return}for(const s of this.#i.values())s.annotationElementId===t?(this.setSelected(s),s.enterInEditMode()):s.unselect();this.#M.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==this.#w&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){if(this.#h){switch(e){case N.CREATE:this.currentLayer.addNewEditor();return;case N.HIGHLIGHT_DEFAULT_COLOR:this.#L?.updateColor(t);break;case N.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#F||=new Map).set(e,t),this.showAllEditors("highlight",t);break}for(const i of this.#v)i.updateParams(e,t);for(const i of this.#h)i.updateDefaultParams(e,t)}}showAllEditors(e,t,i=!1){for(const n of this.#i.values())n.editorType===e&&n.show(t);(this.#F?.get(N.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#B([[N.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#A!==e){this.#A=e;for(const t of this.#s.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}async#ae(){if(!this.#T){this.#T=!0;const e=[];for(const t of this.#s.values())e.push(t.enable());await Promise.all(e);for(const t of this.#i.values())t.enable()}}#re(){if(this.unselectAll(),this.#T){this.#T=!1;for(const e of this.#s.values())e.disable();for(const e of this.#i.values())e.disable()}}getEditors(e){const t=[];for(const i of this.#i.values())i.pageIndex===e&&t.push(i);return t}getEditor(e){return this.#i.get(e)}addEditor(e){this.#i.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.focusMainContainer(),this.#y=null},0)),this.#i.delete(e.id),this.unselect(e),(!e.annotationElementId||!this.#u.has(e.annotationElementId))&&this.#n?.remove(e.id)}addDeletedAnnotationElement(e){this.#u.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#u.has(e)}removeDeletedAnnotationElement(e){this.#u.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#J(e){const t=this.#s.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#B(e.propertiesToUpdate))}get#oe(){let e=null;for(e of this.#v);return e}updateUI(e){this.#oe===e&&this.#B(e.propertiesToUpdate)}toggleSelected(e){if(this.#v.has(e)){this.#v.delete(e),e.unselect(),this.#P({hasSelectedEditor:this.hasSelection});return}this.#v.add(e),e.select(),this.#B(e.propertiesToUpdate),this.#P({hasSelectedEditor:!0})}setSelected(e){for(const t of this.#v)t!==e&&t.unselect();this.#v.clear(),this.#v.add(e),e.select(),this.#B(e.propertiesToUpdate),this.#P({hasSelectedEditor:!0})}isSelected(e){return this.#v.has(e)}get firstSelectedEditor(){return this.#v.values().next().value}unselect(e){e.unselect(),this.#v.delete(e),this.#P({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#v.size!==0}get isEnterHandled(){return this.#v.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#P({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#G()})}redo(){this.#c.redo(),this.#P({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#G()})}addCommands(e){this.#c.add(e),this.#P({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#G()})}#G(){if(this.#i.size===0)return!0;if(this.#i.size===1)for(const e of this.#i.values())return e.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...this.#v],t=()=>{for(const s of e)s.remove()},i=()=>{for(const s of e)this.#J(s)};this.addCommands({cmd:t,undo:i,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#Y(e){for(const t of this.#v)t.unselect();this.#v.clear();for(const t of e)t.isEmpty()||(this.#v.add(t),t.select());this.#P({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#v)e.commit();this.#Y(this.#i.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#w!==q.NONE))&&this.hasSelection){for(const e of this.#v)e.unselect();this.#v.clear(),this.#P({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#z[0]+=e,this.#z[1]+=t;const[s,n]=this.#z,a=[...this.#v],o=1e3;this.#j&&clearTimeout(this.#j),this.#j=setTimeout(()=>{this.#j=null,this.#z[0]=this.#z[1]=0,this.addCommands({cmd:()=>{for(const l of a)this.#i.has(l.id)&&l.translateInPage(s,n)},undo:()=>{for(const l of a)this.#i.has(l.id)&&l.translateInPage(-s,-n)},mustExec:!1})},o);for(const l of a)l.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#r=new Map;for(const e of this.#v)this.#r.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#r)return!1;this.disableUserSelect(!1);const e=this.#r;this.#r=null;let t=!1;for(const[{x:s,y:n,pageIndex:a},o]of e)o.newX=s,o.newY=n,o.newPageIndex=a,t||=s!==o.savedX||n!==o.savedY||a!==o.savedPageIndex;if(!t)return!1;const i=(s,n,a,o)=>{if(this.#i.has(s.id)){const l=this.#s.get(o);l?s._setParentAndPosition(l,n,a):(s.pageIndex=o,s.x=n,s.y=a)}};return this.addCommands({cmd:()=>{for(const[s,{newX:n,newY:a,newPageIndex:o}]of e)i(s,n,a,o)},undo:()=>{for(const[s,{savedX:n,savedY:a,savedPageIndex:o}]of e)i(s,n,a,o)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#r)for(const i of this.#r.keys())i.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#v.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#w}get imageManager(){return G(this,"imageManager",new Mi)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let c=0,d=t.rangeCount;c<d;c++)if(!e.contains(t.getRangeAt(c).commonAncestorContainer))return null;const{x:i,y:s,width:n,height:a}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(c,d,h,m)=>({x:(d-s)/a,y:1-(c+h-i)/n,width:m/a,height:h/n});break;case"180":o=(c,d,h,m)=>({x:1-(c+h-i)/n,y:1-(d+m-s)/a,width:h/n,height:m/a});break;case"270":o=(c,d,h,m)=>({x:1-(d+m-s)/a,y:(c-i)/n,width:m/a,height:h/n});break;default:o=(c,d,h,m)=>({x:(c-i)/n,y:(d-s)/a,width:h/n,height:m/a});break}const l=[];for(let c=0,d=t.rangeCount;c<d;c++){const h=t.getRangeAt(c);if(!h.collapsed)for(const{x:m,y:p,width:g,height:b}of h.getClientRects())g===0||b===0||l.push(o(m,p,g,b))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#l||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#l?.delete(e)}renderAnnotationElement(e){const t=this.#l?.get(e.data.id);if(!t)return;const i=this.#n.getRawValue(t);i&&(this.#w===q.NONE&&!i.hasBeenModified||i.renderAnnotationElement(e))}}class Ne{#e=null;#t=!1;#i=null;#s=null;#a=null;#n=null;#l=!1;#c=null;#d=null;#o=null;#u=null;#r=!1;static#h=null;static _l10n=null;constructor(e){this.#d=e,this.#r=e._uiManager.useNewAltTextFlow,Ne.#h||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){Ne._l10n??=e}async render(){const e=this.#i=document.createElement("button");e.className="altText",e.tabIndex="0";const t=this.#s=document.createElement("span");e.append(t),this.#r?(e.classList.add("new"),e.setAttribute("data-l10n-id",Ne.#h.missing),t.setAttribute("data-l10n-id",Ne.#h["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=this.#d._uiManager._signal;e.addEventListener("contextmenu",Le,{signal:i}),e.addEventListener("pointerdown",n=>n.stopPropagation(),{signal:i});const s=n=>{n.preventDefault(),this.#d._uiManager.editAltText(this.#d),this.#r&&this.#d._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#p}})};return e.addEventListener("click",s,{capture:!0,signal:i}),e.addEventListener("keydown",n=>{n.target===e&&n.key==="Enter"&&(this.#l=!0,s(n))},{signal:i}),await this.#m(),e}get#p(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#l}),this.#l=!1)}isEmpty(){return this.#r?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#r?this.#e!==null||!!this.#o:this.isEmpty()}get guessedText(){return this.#o}async setGuessedText(e){this.#e===null&&(this.#o=e,this.#u=await Ne._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#m())}toggleAltTextBadge(e=!1){if(!this.#r||this.#e){this.#c?.remove(),this.#c=null;return}if(!this.#c){const t=this.#c=document.createElement("div");t.className="noAltTextBadge",this.#d.div.append(t)}this.#c.classList.toggle("hidden",!e)}serialize(e){let t=this.#e;return!e&&this.#o===t&&(t=this.#u),{altText:t,decorative:this.#t,guessedText:this.#o,textWithDisclaimer:this.#u}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:t,guessedText:i,textWithDisclaimer:s,cancel:n=!1}){i&&(this.#o=i,this.#u=s),!(this.#e===e&&this.#t===t)&&(n||(this.#e=e,this.#t=t),this.#m())}toggle(e=!1){this.#i&&(!e&&this.#n&&(clearTimeout(this.#n),this.#n=null),this.#i.disabled=!e)}shown(){this.#d._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#p}})}destroy(){this.#i?.remove(),this.#i=null,this.#s=null,this.#a=null,this.#c?.remove(),this.#c=null}async#m(){const e=this.#i;if(!e)return;if(this.#r){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",Ne.#h[this.#p]),this.#s?.setAttribute("data-l10n-id",Ne.#h[`${this.#p}-label`]),!this.#e){this.#a?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#a?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=this.#a;if(!t){this.#a=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${this.#d.id}`;const s=100,n=this.#d._uiManager._signal;n.addEventListener("abort",()=>{clearTimeout(this.#n),this.#n=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#n=setTimeout(()=>{this.#n=null,this.#a.classList.add("show"),this.#d._reportTelemetry({action:"alt_text_tooltip"})},s)},{signal:n}),e.addEventListener("mouseleave",()=>{this.#n&&(clearTimeout(this.#n),this.#n=null),this.#a?.classList.remove("show")},{signal:n})}this.#t?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=this.#e),t.parentNode||e.append(t),this.#d.getImageForAltText()?.setAttribute("aria-describedby",t.id)}}class D{#e=null;#t=null;#i=null;#s=!1;#a=!1;#n=null;#l=null;#c=null;#d="";#o=!1;#u=null;#r=!1;#h=!1;#p=!1;#m=null;#b=0;#f=0;#g=null;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#y=!1;#x=D._zIndex++;static _borderLineWidth=-1;static _colorManager=new Pi;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=D.prototype._resizeWithKeyboard,t=Ue.TRANSLATE_SMALL,i=Ue.TRANSLATE_BIG;return G(this,"_resizerKeyboardManager",new Ct([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],D.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:i,pageHeight:s,pageX:n,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,s],this.pageTranslation=[n,a];const[o,l]=this.parentDimensions;this.x=e.x/o,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return G(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new Qn({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(D._l10n??=e,D._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),D._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);D._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){X("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#y}set _isDraggable(e){this.#y=e,this.div?.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#x}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):this.#F(),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#o?this.#o=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,s){const[n,a]=this.parentDimensions;[i,s]=this.screenToPageTranslation(i,s),this.x=(e+i)/n,this.y=(t+s)/a,this.fixAndSetPosition()}#_([e,t],i,s){[i,s]=this.screenToPageTranslation(i,s),this.x+=i/e,this.y+=s/t,this.fixAndSetPosition()}translate(e,t){this.#_(this.parentDimensions,e,t)}translateInPage(e,t){this.#u||=[this.x,this.y],this.#_(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){this.#u||=[this.x,this.y];const[i,s]=this.parentDimensions;if(this.x+=e/i,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:c,y:d}=this.div.getBoundingClientRect();this.parent.findNewParent(this,c,d)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:n,y:a}=this;const[o,l]=this.getBaseTranslation();n+=o,a+=l,this.div.style.left=`${(100*n).toFixed(2)}%`,this.div.style.top=`${(100*a).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:i}=D,s=i/e,n=i/t;switch(this.rotation){case 90:return[-s,n];case 180:return[s,n];case 270:return[s,-n];default:return[-s,-n]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,i]=this.pageDimensions;let{x:s,y:n,width:a,height:o}=this;if(a*=t,o*=i,s*=t,n*=i,this._mustFixPosition)switch(e){case 0:s=Math.max(0,Math.min(t-a,s)),n=Math.max(0,Math.min(i-o,n));break;case 90:s=Math.max(0,Math.min(t-o,s)),n=Math.min(i,Math.max(a,n));break;case 180:s=Math.min(t,Math.max(a,s)),n=Math.min(i,Math.max(o,n));break;case 270:s=Math.min(t,Math.max(o,s)),n=Math.max(0,Math.min(i-a,n));break}this.x=s/=t,this.y=n/=i;const[l,c]=this.getBaseTranslation();s+=l,n+=c;const{style:d}=this.div;d.left=`${(100*s).toFixed(2)}%`,d.top=`${(100*n).toFixed(2)}%`,this.moveInDOM()}static#S(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return D.#S(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return D.#S(e,t,360-this.parentRotation)}#E(e){switch(e){case 90:{const[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,i]}=this;return[t*e,i*e]}setDims(e,t){const[i,s]=this.parentDimensions;this.div.style.width=`${(100*e/i).toFixed(2)}%`,this.#a||(this.div.style.height=`${(100*t/s).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:i}=e,s=i.endsWith("%"),n=!this.#a&&t.endsWith("%");if(s&&n)return;const[a,o]=this.parentDimensions;s||(e.width=`${(100*parseFloat(i)/a).toFixed(2)}%`),!this.#a&&!n&&(e.height=`${(100*parseFloat(t)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#N(){if(this.#n)return;this.#n=document.createElement("div"),this.#n.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const i of e){const s=document.createElement("div");this.#n.append(s),s.classList.add("resizer",i),s.setAttribute("data-resizer-name",i),s.addEventListener("pointerdown",this.#T.bind(this,i),{signal:t}),s.addEventListener("contextmenu",Le,{signal:t}),s.tabIndex=-1}this.div.prepend(this.#n)}#T(e,t){t.preventDefault();const{isMac:i}=xe.platform;if(t.button!==0||t.ctrlKey&&i)return;this.#i?.toggle(!1);const s=this._isDraggable;this._isDraggable=!1;const n=new AbortController,a=this._uiManager.combinedSignal(n);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#k.bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("contextmenu",Le,{signal:a});const o=this.x,l=this.y,c=this.width,d=this.height,h=this.parent.div.style.cursor,m=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const p=()=>{n.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=h,this.div.style.cursor=m,this.#A(o,l,c,d)};window.addEventListener("pointerup",p,{signal:a}),window.addEventListener("blur",p,{signal:a})}#A(e,t,i,s){const n=this.x,a=this.y,o=this.width,l=this.height;n===e&&a===t&&o===i&&l===s||this.addCommands({cmd:()=>{this.width=o,this.height=l,this.x=n,this.y=a;const[c,d]=this.parentDimensions;this.setDims(c*o,d*l),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=s,this.x=e,this.y=t;const[c,d]=this.parentDimensions;this.setDims(c*i,d*s),this.fixAndSetPosition()},mustExec:!0})}#k(e,t){const[i,s]=this.parentDimensions,n=this.x,a=this.y,o=this.width,l=this.height,c=D.MIN_SIZE/i,d=D.MIN_SIZE/s,h=C=>Math.round(C*1e4)/1e4,m=this.#E(this.rotation),p=(C,R)=>[m[0]*C+m[2]*R,m[1]*C+m[3]*R],g=this.#E(360-this.rotation),b=(C,R)=>[g[0]*C+g[2]*R,g[1]*C+g[3]*R];let v,y,x=!1,w=!1;switch(e){case"topLeft":x=!0,v=(C,R)=>[0,0],y=(C,R)=>[C,R];break;case"topMiddle":v=(C,R)=>[C/2,0],y=(C,R)=>[C/2,R];break;case"topRight":x=!0,v=(C,R)=>[C,0],y=(C,R)=>[0,R];break;case"middleRight":w=!0,v=(C,R)=>[C,R/2],y=(C,R)=>[0,R/2];break;case"bottomRight":x=!0,v=(C,R)=>[C,R],y=(C,R)=>[0,0];break;case"bottomMiddle":v=(C,R)=>[C/2,R],y=(C,R)=>[C/2,0];break;case"bottomLeft":x=!0,v=(C,R)=>[0,R],y=(C,R)=>[C,0];break;case"middleLeft":w=!0,v=(C,R)=>[0,R/2],y=(C,R)=>[C,R/2];break}const A=v(o,l),S=y(o,l);let E=p(...S);const k=h(n+E[0]),_=h(a+E[1]);let T=1,I=1,[M,W]=this.screenToPageTranslation(t.movementX,t.movementY);if([M,W]=b(M/i,W/s),x){const C=Math.hypot(o,l);T=I=Math.max(Math.min(Math.hypot(S[0]-A[0]-M,S[1]-A[1]-W)/C,1/o,1/l),c/o,d/l)}else w?T=Math.max(c,Math.min(1,Math.abs(S[0]-A[0]-M)))/o:I=Math.max(d,Math.min(1,Math.abs(S[1]-A[1]-W)))/l;const O=h(o*T),z=h(l*I);E=p(...y(O,z));const H=k-E[0],j=_-E[1];this.width=O,this.height=z,this.x=H,this.y=j,this.setDims(i*O,s*z),this.fixAndSetPosition()}altTextFinish(){this.#i?.finish()}async addEditToolbar(){return this._editToolbar||this.#h?this._editToolbar:(this._editToolbar=new Et(this),this.div.append(this._editToolbar.render()),this.#i&&await this._editToolbar.addAltText(this.#i),this._editToolbar)}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#i?.destroy())}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#i||(Ne.initialize(D._l10n),this.#i=new Ne(this),this.#e&&(this.#i.data=this.#e,this.#e=null),await this.addEditToolbar())}get altTextData(){return this.#i?.data}set altTextData(e){this.#i&&(this.#i.data=e)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(e){await this.#i?.setGuessedText(e)}serializeAltText(e){return this.#i?.serialize(e)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#s?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.#I();const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[i,s]=this.getInitialTranslation();return this.translate(i,s),Ot(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=xe.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#o=!0,this._isDraggable){this.#L(e);return}this.#C(e)}get isSelected(){return this._uiManager.isSelected(this)}#C(e){const{isMac:t}=xe.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#L(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();const i=new AbortController,s=this._uiManager.combinedSignal(i);if(t){this.div.classList.add("moving"),this.#b=e.clientX,this.#f=e.clientY;const a=o=>{const{clientX:l,clientY:c}=o,[d,h]=this.screenToPageTranslation(l-this.#b,c-this.#f);this.#b=l,this.#f=c,this._uiManager.dragSelectedEditors(d,h)};window.addEventListener("pointermove",a,{passive:!0,capture:!0,signal:s})}const n=()=>{i.abort(),t&&this.div.classList.remove("moving"),this.#o=!1,this._uiManager.endDragSession()||this.#C(e)};window.addEventListener("pointerup",n,{signal:s}),window.addEventListener("blur",n,{signal:s})}moveInDOM(){this.#m&&clearTimeout(this.#m),this.#m=setTimeout(()=>{this.#m=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition()}getRect(e,t,i=this.rotation){const s=this.parentScale,[n,a]=this.pageDimensions,[o,l]=this.pageTranslation,c=e/s,d=t/s,h=this.x*n,m=this.y*a,p=this.width*n,g=this.height*a;switch(i){case 0:return[h+c+o,a-m-d-g+l,h+c+p+o,a-m-d+l];case 90:return[h+d+o,a-m+c+l,h+d+g+o,a-m+c+p+l];case 180:return[h-c-p+o,a-m+d+l,h-c+o,a-m+d+g+l];case 270:return[h-d-g+o,a-m-c-p+l,h-d+o,a-m-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,s,n,a]=e,o=n-i,l=a-s;switch(this.rotation){case 0:return[i,t-a,o,l];case 90:return[i,t-s,l,o];case 180:return[n,t-s,o,l];case 270:return[n,t-a,l,o];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#h=!0}disableEditMode(){this.#h=!1}isInEditMode(){return this.#h}shouldGetKeyboardEvents(){return this.#p}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}#I(){if(this.#c||!this.div)return;this.#c=new AbortController;const e=this._uiManager.combinedSignal(this.#c);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#I()}rotate(e){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){X("An editor must be serializable")}static async deserialize(e,t,i){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i});s.rotation=e.rotation,s.#e=e.accessibilityData;const[n,a]=s.pageDimensions,[o,l,c,d]=s.getRectInCurrentCoords(e.rect,a);return s.x=o/n,s.y=l/a,s.width=c/n,s.height=d/a,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#c?.abort(),this.#c=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#m&&(clearTimeout(this.#m),this.#m=null),this.#F(),this.removeEditToolbar(),this.#g){for(const e of this.#g.values())clearTimeout(e);this.#g=null}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#N(),this.#n.classList.remove("hidden"),Ot(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#n.children;if(!this.#t){this.#t=Array.from(t);const a=this.#w.bind(this),o=this.#v.bind(this),l=this._uiManager._signal;for(const c of this.#t){const d=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",a,{signal:l}),c.addEventListener("blur",o,{signal:l}),c.addEventListener("focus",this.#R.bind(this,d),{signal:l}),c.setAttribute("data-l10n-id",D._l10nResizer[d])}}const i=this.#t[0];let s=0;for(const a of t){if(a===i)break;s++}const n=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(n!==s){if(n<s)for(let o=0;o<s-n;o++)this.#n.append(this.#n.firstChild);else if(n>s)for(let o=0;o<n-s;o++)this.#n.firstChild.before(this.#n.lastChild);let a=0;for(const o of t){const c=this.#t[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",D._l10nResizer[c])}}this.#D(0),this.#p=!0,this.#n.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#w(e){D._resizerKeyboardManager.exec(this,e)}#v(e){this.#p&&e.relatedTarget?.parentNode!==this.#n&&this.#F()}#R(e){this.#d=this.#p?e:""}#D(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#p&&this.#k(this.#d,{movementX:e,movementY:t})}#F(){if(this.#p=!1,this.#D(-1),this.#l){const{savedX:e,savedY:t,savedWidth:i,savedHeight:s}=this.#l;this.#A(e,t,i,s),this.#l=null}}_stopResizingWithKeyboard(){this.#F(),this.div.focus()}select(){if(this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}unselect(){this.#n?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#r}set isEditing(e){this.#r=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){this.#a=!0;const i=e/t,{style:s}=this.div;s.aspectRatio=i,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#g||=new Map;const{action:i}=e;let s=this.#g.get(i);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),this.#g.delete(i),this.#g.size===0&&(this.#g=null)},D._telemetryTimeout),this.#g.set(i,s);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#s=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#s=!0}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const i=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),i.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}}class Qn extends D{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Ui=3285377520,_e=4294901760,De=65535;class _s{constructor(e){this.h1=e?e&4294967295:Ui,this.h2=e?e&4294967295:Ui}update(e){let t,i;if(typeof e=="string"){t=new Uint8Array(e.length*2),i=0;for(let b=0,v=e.length;b<v;b++){const y=e.charCodeAt(b);y<=255?t[i++]=y:(t[i++]=y>>>8,t[i++]=y&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),i=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=i>>2,n=i-s*4,a=new Uint32Array(t.buffer,0,s);let o=0,l=0,c=this.h1,d=this.h2;const h=3432918353,m=461845907,p=h&De,g=m&De;for(let b=0;b<s;b++)b&1?(o=a[b],o=o*h&_e|o*p&De,o=o<<15|o>>>17,o=o*m&_e|o*g&De,c^=o,c=c<<13|c>>>19,c=c*5+3864292196):(l=a[b],l=l*h&_e|l*p&De,l=l<<15|l>>>17,l=l*m&_e|l*g&De,d^=l,d=d<<13|d>>>19,d=d*5+3864292196);switch(o=0,n){case 3:o^=t[s*4+2]<<16;case 2:o^=t[s*4+1]<<8;case 1:o^=t[s*4],o=o*h&_e|o*p&De,o=o<<15|o>>>17,o=o*m&_e|o*g&De,s&1?c^=o:d^=o}this.h1=c,this.h2=d}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&_e|e*36045&De,t=t*4283543511&_e|((t<<16|e>>>16)*2950163797&_e)>>>16,e^=t>>>1,e=e*444984403&_e|e*60499&De,t=t*3301882366&_e|((t<<16|e>>>16)*3120437893&_e)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const fi=Object.freeze({map:null,hash:"",transfer:void 0});class Ii{#e=!1;#t=null;#i=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const i=this.#i.get(e);return i===void 0?t:Object.assign(t,i)}getRawValue(e){return this.#i.get(e)}remove(e){if(this.#i.delete(e),this.#i.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of this.#i.values())if(t instanceof D)return;this.onAnnotationEditor(null)}}setValue(e,t){const i=this.#i.get(e);let s=!1;if(i!==void 0)for(const[n,a]of Object.entries(t))i[n]!==a&&(s=!0,i[n]=a);else s=!0,this.#i.set(e,t);s&&this.#s(),t instanceof D&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return this.#i.has(e)}getAll(){return this.#i.size>0?ki(this.#i):null}setAll(e){for(const[t,i]of Object.entries(e))this.setValue(t,i)}get size(){return this.#i.size}#s(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Ts(this)}get serializable(){if(this.#i.size===0)return fi;const e=new Map,t=new _s,i=[],s=Object.create(null);let n=!1;for(const[a,o]of this.#i){const l=o instanceof D?o.serialize(!1,s):o;l&&(e.set(a,l),t.update(`${a}:${JSON.stringify(l)}`),n||=!!l.bitmap)}if(n)for(const a of e.values())a.bitmap&&i.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:fi}get editorStats(){let e=null;const t=new Map;for(const i of this.#i.values()){if(!(i instanceof D))continue;const s=i.telemetryFinalData;if(!s)continue;const{type:n}=s;t.has(n)||t.set(n,Object.getPrototypeOf(i).constructor),e||=Object.create(null);const a=e[n]||=new Map;for(const[o,l]of Object.entries(s)){if(o==="type")continue;let c=a.get(o);c||(c=new Map,a.set(o,c));const d=c.get(l)??0;c.set(l,d+1)}}for(const[i,s]of t)e[i]=s.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){this.#t=null}get modifiedIds(){if(this.#t)return this.#t;const e=[];for(const t of this.#i.values())!(t instanceof D)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}}class Ts extends Ii{#e;constructor(e){super();const{map:t,hash:i,transfer:s}=e.serializable,n=structuredClone(t,s?{transfer:s}:null);this.#e={map:n,hash:i,transfer:s}}get print(){X("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return G(this,"modifiedIds",{ids:new Set,hash:""})}}class ea{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||this.#e.has(e.loadedName))){if(re(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:s,style:n}=e,a=new FontFace(i,s,n);this.addNativeFontFace(a);try{await a.load(),this.#e.add(i),t?.(e)}catch{B(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}X("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(s){throw B(`Failed to load font '${i.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const s=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return G(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(be||typeof navigator<"u"&&typeof navigator?.userAgent=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),G(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(re(!s.done,"completeRequest() cannot be called twice."),s.done=!0;i.length>0&&i[0].done;){const n=i.shift();setTimeout(n.callback,0)}}const{loadingRequests:i}=this,s={done:!1,complete:t,callback:e};return i.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return G(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function i(A,S){return A.charCodeAt(S)<<24|A.charCodeAt(S+1)<<16|A.charCodeAt(S+2)<<8|A.charCodeAt(S+3)&255}function s(A,S,E,k){const _=A.substring(0,S),T=A.substring(S+E);return _+k+T}let n,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let c=0;function d(A,S){if(++c>30){B("Load test font never loaded."),S();return}if(l.font="30px "+A,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){S();return}setTimeout(d.bind(null,A,S))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let m=this._loadTestFont;m=s(m,976,h.length,h);const g=16,b=1482184792;let v=i(m,g);for(n=0,a=h.length-3;n<a;n+=4)v=v-b+i(h,n)|0;n<h.length&&(v=v-b+i(h+"XXX",n)|0),m=s(m,g,4,qn(v));const y=`url(data:font/opentype;base64,${btoa(m)});`,x=`@font-face {font-family:"${h}";src:${y}}`;this.insertRule(x);const w=this._document.createElement("div");w.style.visibility="hidden",w.style.width=w.style.height="10px",w.style.position="absolute",w.style.top=w.style.left="0px";for(const A of[e.loadedName,h]){const S=this._document.createElement("span");S.textContent="Hi",S.style.fontFamily=A,w.append(S)}this._document.body.append(w),d(h,()=>{w.remove(),t.complete()})}}class ta{constructor(e,{disableFontFace:t=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this.disableFontFace=t===!0,this._inspectFont=i}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${Wn(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let i;try{i=e.get(this.loadedName+"_path_"+t)}catch(n){B(`getPathGenerator - ignoring character: "${n}".`)}if(!Array.isArray(i)||i.length===0)return this.compiledGlyphs[t]=function(n,a){};const s=[];for(let n=0,a=i.length;n<a;)switch(i[n++]){case Fe.BEZIER_CURVE_TO:{const[o,l,c,d,h,m]=i.slice(n,n+6);s.push(p=>p.bezierCurveTo(o,l,c,d,h,m)),n+=6}break;case Fe.MOVE_TO:{const[o,l]=i.slice(n,n+2);s.push(c=>c.moveTo(o,l)),n+=2}break;case Fe.LINE_TO:{const[o,l]=i.slice(n,n+2);s.push(c=>c.lineTo(o,l)),n+=2}break;case Fe.QUADRATIC_CURVE_TO:{const[o,l,c,d]=i.slice(n,n+4);s.push(h=>h.quadraticCurveTo(o,l,c,d)),n+=4}break;case Fe.RESTORE:s.push(o=>o.restore());break;case Fe.SAVE:s.push(o=>o.save());break;case Fe.SCALE:re(s.length===2,"Scale command is only valid at the third position.");break;case Fe.TRANSFORM:{const[o,l,c,d,h,m]=i.slice(n,n+6);s.push(p=>p.transform(o,l,c,d,h,m)),n+=6}break;case Fe.TRANSLATE:{const[o,l]=i.slice(n,n+2);s.push(c=>c.translate(o,l)),n+=2}break}return this.compiledGlyphs[t]=function(a,o){s[0](a),s[1](a),a.scale(o,-o);for(let l=2,c=s.length;l<c;l++)s[l](a)}}}class Cs{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){X("Abstract method `_createCanvas` called.")}}class ia extends Cs{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");return i.width=e,i.height=t,i}}class Ls{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){X("Abstract method `_fetch` called.")}}class Ms extends Ls{async _fetch(e){const t=await Jt(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Xt(t)}}class Ps{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,s,n){return"none"}destroy(e=!1){}}class sa extends Ps{#e;#t;#i;#s;#a;#n;#l=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#s=e,this.#a=t}get#c(){return this.#t||=new Map}get#d(){return this.#n||=new Map}get#o(){if(!this.#i){const e=this.#a.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const i=this.#a.createElementNS(qe,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#i=this.#a.createElementNS(qe,"defs"),e.append(i),i.append(this.#i),this.#a.body.append(e)}return this.#i}#u(e){if(e.length===1){const l=e[0],c=new Array(256);for(let h=0;h<256;h++)c[h]=l[h]/255;const d=c.join(",");return[d,d,d]}const[t,i,s]=e,n=new Array(256),a=new Array(256),o=new Array(256);for(let l=0;l<256;l++)n[l]=t[l]/255,a[l]=i[l]/255,o[l]=s[l]/255;return[n.join(","),a.join(","),o.join(",")]}#r(e){if(this.#e===void 0){this.#e="";const t=this.#a.URL;t!==this.#a.baseURI&&(Yt(t)?B('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=t.split("#",1)[0])}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#c.get(e);if(t)return t;const[i,s,n]=this.#u(e),a=e.length===1?i:`${i}${s}${n}`;if(t=this.#c.get(a),t)return this.#c.set(e,t),t;const o=`g_${this.#s}_transfer_map_${this.#l++}`,l=this.#r(o);this.#c.set(e,l),this.#c.set(a,l);const c=this.#m(o);return this.#f(i,s,n,c),l}addHCMFilter(e,t){const i=`${e}-${t}`,s="base";let n=this.#d.get(s);if(n?.key===i||(n?(n.filter?.remove(),n.key=i,n.url="none",n.filter=null):(n={key:i,url:"none",filter:null},this.#d.set(s,n)),!e||!t))return n.url;const a=this.#y(e);e=P.makeHexColor(...a);const o=this.#y(t);if(t=P.makeHexColor(...o),this.#o.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return n.url;const l=new Array(256);for(let p=0;p<=255;p++){const g=p/255;l[p]=g<=.03928?g/12.92:((g+.055)/1.055)**2.4}const c=l.join(","),d=`g_${this.#s}_hcm_filter`,h=n.filter=this.#m(d);this.#f(c,c,c,h),this.#p(h);const m=(p,g)=>{const b=a[p]/255,v=o[p]/255,y=new Array(g+1);for(let x=0;x<=g;x++)y[x]=b+x/g*(v-b);return y.join(",")};return this.#f(m(0,5),m(1,5),m(2,5),h),n.url=this.#r(d),n.url}addAlphaFilter(e){let t=this.#c.get(e);if(t)return t;const[i]=this.#u([e]),s=`alpha_${i}`;if(t=this.#c.get(s),t)return this.#c.set(e,t),t;const n=`g_${this.#s}_alpha_map_${this.#l++}`,a=this.#r(n);this.#c.set(e,a),this.#c.set(s,a);const o=this.#m(n);return this.#g(i,o),a}addLuminosityFilter(e){let t=this.#c.get(e||"luminosity");if(t)return t;let i,s;if(e?([i]=this.#u([e]),s=`luminosity_${i}`):s="luminosity",t=this.#c.get(s),t)return this.#c.set(e,t),t;const n=`g_${this.#s}_luminosity_map_${this.#l++}`,a=this.#r(n);this.#c.set(e,a),this.#c.set(s,a);const o=this.#m(n);return this.#h(o),e&&this.#g(i,o),a}addHighlightHCMFilter(e,t,i,s,n){const a=`${t}-${i}-${s}-${n}`;let o=this.#d.get(e);if(o?.key===a||(o?(o.filter?.remove(),o.key=a,o.url="none",o.filter=null):(o={key:a,url:"none",filter:null},this.#d.set(e,o)),!t||!i))return o.url;const[l,c]=[t,i].map(this.#y.bind(this));let d=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),h=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[m,p]=[s,n].map(this.#y.bind(this));h<d&&([d,h,m,p]=[h,d,p,m]),this.#o.style.color="";const g=(y,x,w)=>{const A=new Array(256),S=(h-d)/w,E=y/255,k=(x-y)/(255*w);let _=0;for(let T=0;T<=w;T++){const I=Math.round(d+T*S),M=E+T*k;for(let W=_;W<=I;W++)A[W]=M;_=I+1}for(let T=_;T<256;T++)A[T]=A[_-1];return A.join(",")},b=`g_${this.#s}_hcm_${e}_filter`,v=o.filter=this.#m(b);return this.#p(v),this.#f(g(m[0],p[0],5),g(m[1],p[1],5),g(m[2],p[2],5),v),o.url=this.#r(b),o.url}destroy(e=!1){e&&this.#d.size!==0||(this.#i&&(this.#i.parentNode.parentNode.remove(),this.#i=null),this.#t&&(this.#t.clear(),this.#t=null),this.#l=0)}#h(e){const t=this.#a.createElementNS(qe,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#p(e){const t=this.#a.createElementNS(qe,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#m(e){const t=this.#a.createElementNS(qe,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#o.append(t),t}#b(e,t,i){const s=this.#a.createElementNS(qe,t);s.setAttribute("type","discrete"),s.setAttribute("tableValues",i),e.append(s)}#f(e,t,i,s){const n=this.#a.createElementNS(qe,"feComponentTransfer");s.append(n),this.#b(n,"feFuncR",e),this.#b(n,"feFuncG",t),this.#b(n,"feFuncB",i)}#g(e,t){const i=this.#a.createElementNS(qe,"feComponentTransfer");t.append(i),this.#b(i,"feFuncA",e)}#y(e){return this.#o.style.color=e,Li(getComputedStyle(this.#o).getPropertyValue("color"))}}class Is{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(i=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){X("Abstract method `_fetch` called.")}}class Rs extends Is{async _fetch(e){const t=await Jt(e,"arraybuffer");return new Uint8Array(t)}}if(be){var bi=Promise.withResolvers(),yi=null;(async()=>{const e=await Dt(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await Dt(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),i=await Dt(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),s=await Dt(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let n,a;return new Map(Object.entries({fs:e,http:t,https:i,url:s,canvas:n,path2d:a}))})().then(e=>{yi=e,bi.resolve()},e=>{B(`loadPackages: ${e}`),yi=new Map,bi.resolve()})}class Ke{static get promise(){return bi.promise}static get(e){return yi?.get(e)}}async function Ds(r){const t=await Ke.get("fs").promises.readFile(r);return new Uint8Array(t)}class na extends Ps{}class aa extends Cs{_createCanvas(e,t){return Ke.get("canvas").createCanvas(e,t)}}class ra extends Ls{async _fetch(e){return Ds(e)}}class oa extends Is{async _fetch(e){return Ds(e)}}const ve={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function vi(r,e){if(!e)return;const t=e[2]-e[0],i=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,i),r.clip(s)}class Ri{getPattern(){X("Abstract method `getPattern` called.")}}class la extends Ri{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,s){let n;if(s===ve.STROKE||s===ve.FILL){const a=t.current.getClippedPathBoundingBox(s,Y(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,l=Math.ceil(a[3]-a[1])||1,c=t.cachedCanvases.getCanvas("pattern",o,l),d=c.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-a[0],-a[1]),i=P.transform(i,[1,0,0,1,a[0],a[1]]),d.transform(...t.baseTransform),this.matrix&&d.transform(...this.matrix),vi(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),n=e.createPattern(c.canvas,"no-repeat");const h=new DOMMatrix(i);n.setTransform(h)}else vi(e,this._bbox),n=this._createGradient(e);return n}}function oi(r,e,t,i,s,n,a,o){const l=e.coords,c=e.colors,d=r.data,h=r.width*4;let m;l[t+1]>l[i+1]&&(m=t,t=i,i=m,m=n,n=a,a=m),l[i+1]>l[s+1]&&(m=i,i=s,s=m,m=a,a=o,o=m),l[t+1]>l[i+1]&&(m=t,t=i,i=m,m=n,n=a,a=m);const p=(l[t]+e.offsetX)*e.scaleX,g=(l[t+1]+e.offsetY)*e.scaleY,b=(l[i]+e.offsetX)*e.scaleX,v=(l[i+1]+e.offsetY)*e.scaleY,y=(l[s]+e.offsetX)*e.scaleX,x=(l[s+1]+e.offsetY)*e.scaleY;if(g>=x)return;const w=c[n],A=c[n+1],S=c[n+2],E=c[a],k=c[a+1],_=c[a+2],T=c[o],I=c[o+1],M=c[o+2],W=Math.round(g),O=Math.round(x);let z,H,j,C,R,ue,ye,he;for(let Z=W;Z<=O;Z++){if(Z<v){const V=Z<g?0:(g-Z)/(g-v);z=p-(p-b)*V,H=w-(w-E)*V,j=A-(A-k)*V,C=S-(S-_)*V}else{let V;Z>x?V=1:v===x?V=0:V=(v-Z)/(v-x),z=b-(b-y)*V,H=E-(E-T)*V,j=k-(k-I)*V,C=_-(_-M)*V}let $;Z<g?$=0:Z>x?$=1:$=(g-Z)/(g-x),R=p-(p-y)*$,ue=w-(w-T)*$,ye=A-(A-I)*$,he=S-(S-M)*$;const Ae=Math.round(Math.min(z,R)),Me=Math.round(Math.max(z,R));let Q=h*Z+Ae*4;for(let V=Ae;V<=Me;V++)$=(z-V)/(z-R),$<0?$=0:$>1&&($=1),d[Q++]=H-(H-ue)*$|0,d[Q++]=j-(j-ye)*$|0,d[Q++]=C-(C-he)*$|0,d[Q++]=255}}function ca(r,e,t){const i=e.coords,s=e.colors;let n,a;switch(e.type){case"lattice":const o=e.verticesPerRow,l=Math.floor(i.length/o)-1,c=o-1;for(n=0;n<l;n++){let d=n*o;for(let h=0;h<c;h++,d++)oi(r,t,i[d],i[d+1],i[d+o],s[d],s[d+1],s[d+o]),oi(r,t,i[d+o+1],i[d+1],i[d+o],s[d+o+1],s[d+1],s[d+o])}break;case"triangles":for(n=0,a=i.length;n<a;n+=3)oi(r,t,i[n],i[n+1],i[n+2],s[n],s[n+1],s[n+2]);break;default:throw new Error("illegal figure")}}class da extends Ri{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,i){const o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-o,d=Math.ceil(this._bounds[3])-l,h=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),m=Math.min(Math.ceil(Math.abs(d*e[1]*1.1)),3e3),p=c/h,g=d/m,b={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/p,scaleY:1/g},v=h+4,y=m+4,x=i.getCanvas("mesh",v,y),w=x.context,A=w.createImageData(h,m);if(t){const E=A.data;for(let k=0,_=E.length;k<_;k+=4)E[k]=t[0],E[k+1]=t[1],E[k+2]=t[2],E[k+3]=255}for(const E of this._figures)ca(A,E,b);return w.putImageData(A,2,2),{canvas:x.canvas,offsetX:o-2*p,offsetY:l-2*g,scaleX:p,scaleY:g}}getPattern(e,t,i,s){vi(e,this._bbox);let n;if(s===ve.SHADING)n=P.singularValueDecompose2dScale(Y(e));else if(n=P.singularValueDecompose2dScale(t.baseTransform),this.matrix){const o=P.singularValueDecompose2dScale(this.matrix);n=[n[0]*o[0],n[1]*o[1]]}const a=this._createMeshCanvas(n,s===ve.SHADING?null:this._background,t.cachedCanvases);return s!==ve.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class ua extends Ri{getPattern(){return"hotpink"}}function ha(r){switch(r[0]){case"RadialAxial":return new la(r);case"Mesh":return new da(r);case"Dummy":return new ua}throw new Error(`Unknown IR type: ${r[0]}`)}const Ki={COLORED:1,UNCOLORED:2};class Di{static MAX_PATTERN_SIZE=3e3;constructor(e,t,i,s,n){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=i,this.canvasGraphicsFactory=s,this.baseTransform=n}createPatternCanvas(e){const{bbox:t,operatorList:i,paintType:s,tilingType:n,color:a,canvasGraphicsFactory:o}=this;let{xstep:l,ystep:c}=this;l=Math.abs(l),c=Math.abs(c),Kt("TilingType: "+n);const d=t[0],h=t[1],m=t[2],p=t[3],g=m-d,b=p-h,v=P.singularValueDecompose2dScale(this.matrix),y=P.singularValueDecompose2dScale(this.baseTransform),x=v[0]*y[0],w=v[1]*y[1];let A=g,S=b,E=!1,k=!1;const _=Math.ceil(l*x),T=Math.ceil(c*w),I=Math.ceil(g*x),M=Math.ceil(b*w);_>=I?A=l:E=!0,T>=M?S=c:k=!0;const W=this.getSizeAndScale(A,this.ctx.canvas.width,x),O=this.getSizeAndScale(S,this.ctx.canvas.height,w),z=e.cachedCanvases.getCanvas("pattern",W.size,O.size),H=z.context,j=o.createCanvasGraphics(H);if(j.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(j,s,a),H.translate(-W.scale*d,-O.scale*h),j.transform(W.scale,0,0,O.scale,0,0),H.save(),this.clipBbox(j,d,h,m,p),j.baseTransform=Y(j.ctx),j.executeOperatorList(i),j.endDrawing(),H.restore(),E||k){const C=z.canvas;E&&(A=l),k&&(S=c);const R=this.getSizeAndScale(A,this.ctx.canvas.width,x),ue=this.getSizeAndScale(S,this.ctx.canvas.height,w),ye=R.size,he=ue.size,Z=e.cachedCanvases.getCanvas("pattern-workaround",ye,he),$=Z.context,Ae=E?Math.floor(g/l):0,Me=k?Math.floor(b/c):0;for(let Q=0;Q<=Ae;Q++)for(let V=0;V<=Me;V++)$.drawImage(C,ye*Q,he*V,ye,he,0,0,ye,he);return{canvas:Z.canvas,scaleX:R.scale,scaleY:ue.scale,offsetX:d,offsetY:h}}return{canvas:z.canvas,scaleX:W.scale,scaleY:O.scale,offsetX:d,offsetY:h}}getSizeAndScale(e,t,i){const s=Math.max(Di.MAX_PATTERN_SIZE,t);let n=Math.ceil(e*i);return n>=s?n=s:i=n/e,{scale:i,size:n}}clipBbox(e,t,i,s,n){const a=s-t,o=n-i;e.ctx.rect(t,i,a,o),e.current.updateRectMinMax(Y(e.ctx),[t,i,s,n]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,i){const s=e.ctx,n=e.current;switch(t){case Ki.COLORED:const a=this.ctx;s.fillStyle=a.fillStyle,s.strokeStyle=a.strokeStyle,n.fillColor=a.fillStyle,n.strokeColor=a.strokeStyle;break;case Ki.UNCOLORED:const o=P.makeHexColor(i[0],i[1],i[2]);s.fillStyle=o,s.strokeStyle=o,n.fillColor=o,n.strokeColor=o;break;default:throw new jn(`Unsupported paint type: ${t}`)}}getPattern(e,t,i,s){let n=i;s!==ve.SHADING&&(n=P.transform(n,t.baseTransform),this.matrix&&(n=P.transform(n,this.matrix)));const a=this.createPatternCanvas(t);let o=new DOMMatrix(n);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const l=e.createPattern(a.canvas,"repeat");return l.setTransform(o),l}}function ma({src:r,srcPos:e=0,dest:t,width:i,height:s,nonBlackColor:n=4294967295,inverseDecode:a=!1}){const o=xe.isLittleEndian?4278190080:255,[l,c]=a?[n,o]:[o,n],d=i>>3,h=i&7,m=r.length;t=new Uint32Array(t.buffer);let p=0;for(let g=0;g<s;g++){for(const v=e+d;e<v;e++){const y=e<m?r[e]:255;t[p++]=y&128?c:l,t[p++]=y&64?c:l,t[p++]=y&32?c:l,t[p++]=y&16?c:l,t[p++]=y&8?c:l,t[p++]=y&4?c:l,t[p++]=y&2?c:l,t[p++]=y&1?c:l}if(h===0)continue;const b=e<m?r[e++]:255;for(let v=0;v<h;v++)t[p++]=b&1<<7-v?c:l}return{srcPos:e,destPos:p}}const $i=16,Xi=100,pa=15,Ji=10,Yi=1e3,Se=16;function ga(r,e){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){e.save(),this.__originalSave()},r.restore=function(){e.restore(),this.__originalRestore()},r.translate=function(i,s){e.translate(i,s),this.__originalTranslate(i,s)},r.scale=function(i,s){e.scale(i,s),this.__originalScale(i,s)},r.transform=function(i,s,n,a,o,l){e.transform(i,s,n,a,o,l),this.__originalTransform(i,s,n,a,o,l)},r.setTransform=function(i,s,n,a,o,l){e.setTransform(i,s,n,a,o,l),this.__originalSetTransform(i,s,n,a,o,l)},r.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},r.rotate=function(i){e.rotate(i),this.__originalRotate(i)},r.clip=function(i){e.clip(i),this.__originalClip(i)},r.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},r.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},r.bezierCurveTo=function(t,i,s,n,a,o){e.bezierCurveTo(t,i,s,n,a,o),this.__originalBezierCurveTo(t,i,s,n,a,o)},r.rect=function(t,i,s,n){e.rect(t,i,s,n),this.__originalRect(t,i,s,n)},r.closePath=function(){e.closePath(),this.__originalClosePath()},r.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class fa{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,i)):(s=this.canvasFactory.create(t,i),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Nt(r,e,t,i,s,n,a,o,l,c){const[d,h,m,p,g,b]=Y(r);if(h===0&&m===0){const x=a*d+g,w=Math.round(x),A=o*p+b,S=Math.round(A),E=(a+l)*d+g,k=Math.abs(Math.round(E)-w)||1,_=(o+c)*p+b,T=Math.abs(Math.round(_)-S)||1;return r.setTransform(Math.sign(d),0,0,Math.sign(p),w,S),r.drawImage(e,t,i,s,n,0,0,k,T),r.setTransform(d,h,m,p,g,b),[k,T]}if(d===0&&p===0){const x=o*m+g,w=Math.round(x),A=a*h+b,S=Math.round(A),E=(o+c)*m+g,k=Math.abs(Math.round(E)-w)||1,_=(a+l)*h+b,T=Math.abs(Math.round(_)-S)||1;return r.setTransform(0,Math.sign(h),Math.sign(m),0,w,S),r.drawImage(e,t,i,s,n,0,0,T,k),r.setTransform(d,h,m,p,g,b),[T,k]}r.drawImage(e,t,i,s,n,a,o,l,c);const v=Math.hypot(d,h),y=Math.hypot(m,p);return[v*l,y*c]}function ba(r){const{width:e,height:t}=r;if(e>Yi||t>Yi)return null;const i=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),n=e+1;let a=new Uint8Array(n*(t+1)),o,l,c;const d=e+7&-8;let h=new Uint8Array(d*t),m=0;for(const y of r.data){let x=128;for(;x>0;)h[m++]=y&x?0:255,x>>=1}let p=0;for(m=0,h[m]!==0&&(a[0]=1,++p),l=1;l<e;l++)h[m]!==h[m+1]&&(a[l]=h[m]?2:1,++p),m++;for(h[m]!==0&&(a[l]=2,++p),o=1;o<t;o++){m=o*d,c=o*n,h[m-d]!==h[m]&&(a[c]=h[m]?1:8,++p);let y=(h[m]?4:0)+(h[m-d]?8:0);for(l=1;l<e;l++)y=(y>>2)+(h[m+1]?4:0)+(h[m-d+1]?8:0),s[y]&&(a[c+l]=s[y],++p),m++;if(h[m-d]!==h[m]&&(a[c+l]=h[m]?2:4,++p),p>i)return null}for(m=d*(t-1),c=o*n,h[m]!==0&&(a[c]=8,++p),l=1;l<e;l++)h[m]!==h[m+1]&&(a[c+l]=h[m]?4:8,++p),m++;if(h[m]!==0&&(a[c+l]=4,++p),p>i)return null;const g=new Int32Array([0,n,-1,0,-n,0,0,0,1]),b=new Path2D;for(o=0;p&&o<=t;o++){let y=o*n;const x=y+e;for(;y<x&&!a[y];)y++;if(y===x)continue;b.moveTo(y%n,o);const w=y;let A=a[y];do{const S=g[A];do y+=S;while(!a[y]);const E=a[y];E!==5&&E!==10?(A=E,a[y]=0):(A=E&51*A>>4,a[y]&=A>>2|A<<2),b.lineTo(y%n,y/n|0),a[y]||--p}while(w!==y);--o}return h=null,a=null,function(y){y.save(),y.scale(1/e,-1/t),y.translate(0,-t),y.fill(b),y.beginPath(),y.restore()}}class Zi{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=ws,this.textMatrixScale=1,this.fontMatrix=hi,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=pe.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,i){[t,i]=P.applyTransform([t,i],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(e,t){const i=P.applyTransform(t,e),s=P.applyTransform(t.slice(2),e),n=P.applyTransform([t[0],t[3]],e),a=P.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,i[0],s[0],n[0],a[0]),this.minY=Math.min(this.minY,i[1],s[1],n[1],a[1]),this.maxX=Math.max(this.maxX,i[0],s[0],n[0],a[0]),this.maxY=Math.max(this.maxY,i[1],s[1],n[1],a[1])}updateScalingPathMinMax(e,t){P.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,i,s,n,a,o,l,c,d){const h=P.bezierBoundingBox(t,i,s,n,a,o,l,c,d);d||this.updateRectMinMax(e,h)}getPathBoundingBox(e=ve.FILL,t=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(e===ve.STROKE){t||X("Stroke bounding box must include transform.");const s=P.singularValueDecompose2dScale(t),n=s[0]*this.lineWidth/2,a=s[1]*this.lineWidth/2;i[0]-=n,i[1]-=a,i[2]+=n,i[3]+=a}return i}updateClipFromPath(){const e=P.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=ve.FILL,t=null){return P.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function Qi(r,e){if(typeof ImageData<"u"&&e instanceof ImageData){r.putImageData(e,0,0);return}const t=e.height,i=e.width,s=t%Se,n=(t-s)/Se,a=s===0?n:n+1,o=r.createImageData(i,Se);let l=0,c;const d=e.data,h=o.data;let m,p,g,b;if(e.kind===Bt.GRAYSCALE_1BPP){const v=d.byteLength,y=new Uint32Array(h.buffer,0,h.byteLength>>2),x=y.length,w=i+7>>3,A=4294967295,S=xe.isLittleEndian?4278190080:255;for(m=0;m<a;m++){for(g=m<n?Se:s,c=0,p=0;p<g;p++){const E=v-l;let k=0;const _=E>w?i:E*8-7,T=_&-8;let I=0,M=0;for(;k<T;k+=8)M=d[l++],y[c++]=M&128?A:S,y[c++]=M&64?A:S,y[c++]=M&32?A:S,y[c++]=M&16?A:S,y[c++]=M&8?A:S,y[c++]=M&4?A:S,y[c++]=M&2?A:S,y[c++]=M&1?A:S;for(;k<_;k++)I===0&&(M=d[l++],I=128),y[c++]=M&I?A:S,I>>=1}for(;c<x;)y[c++]=0;r.putImageData(o,0,m*Se)}}else if(e.kind===Bt.RGBA_32BPP){for(p=0,b=i*Se*4,m=0;m<n;m++)h.set(d.subarray(l,l+b)),l+=b,r.putImageData(o,0,p),p+=Se;m<a&&(b=i*s*4,h.set(d.subarray(l,l+b)),r.putImageData(o,0,p))}else if(e.kind===Bt.RGB_24BPP)for(g=Se,b=i*g,m=0;m<a;m++){for(m>=n&&(g=s,b=i*g),c=0,p=b;p--;)h[c++]=d[l++],h[c++]=d[l++],h[c++]=d[l++],h[c++]=255;r.putImageData(o,0,m*Se)}else throw new Error(`bad image kind: ${e.kind}`)}function es(r,e){if(e.bitmap){r.drawImage(e.bitmap,0,0);return}const t=e.height,i=e.width,s=t%Se,n=(t-s)/Se,a=s===0?n:n+1,o=r.createImageData(i,Se);let l=0;const c=e.data,d=o.data;for(let h=0;h<a;h++){const m=h<n?Se:s;({srcPos:l}=ma({src:c,srcPos:l,dest:d,width:i,height:m,nonBlackColor:0})),r.putImageData(o,0,h*Se)}}function vt(r,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of t)r[i]!==void 0&&(e[i]=r[i]);r.setLineDash!==void 0&&(e.setLineDash(r.getLineDash()),e.lineDashOffset=r.lineDashOffset)}function Ft(r){if(r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0),!be){const{filter:e}=r;e!=="none"&&e!==""&&(r.filter="none")}}function ts(r,e){if(e)return!0;const t=P.singularValueDecompose2dScale(r);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*mt.PDF_TO_CSS_UNITS);return t[0]<=i&&t[1]<=i}const ya=["butt","round","square"],va=["miter","round","bevel"],xa={},is={};class dt{constructor(e,t,i,s,n,{optionalContentConfig:a,markedContentStack:o=null},l,c){this.ctx=e,this.current=new Zi(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=s,this.filterFactory=n,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new fa(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:s=null}){const n=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,n,a),this.ctx.fillStyle=o,i){const l=this.cachedCanvases.getCanvas("transparent",n,a);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...Y(this.compositeCtx))}this.ctx.save(),Ft(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Y(this.ctx)}executeOperatorList(e,t,i,s){const n=e.argsArray,a=e.fnArray;let o=t||0;const l=n.length;if(l===o)return o;const c=l-o>Ji&&typeof i=="function",d=c?Date.now()+pa:0;let h=0;const m=this.commonObjs,p=this.objs;let g;for(;;){if(s!==void 0&&o===s.nextBreakPoint)return s.breakIt(o,i),o;if(g=a[o],g!==Ie.dependency)this[g].apply(this,n[o]);else for(const b of n[o]){const v=b.startsWith("g_")?m:p;if(!v.has(b))return v.get(b,i),o}if(o++,o===l)return o;if(c&&++h>Ji){if(Date.now()>d)return i(),o;h=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const i=e.width??e.displayWidth,s=e.height??e.displayHeight;let n=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),o=i,l=s,c="prescale1",d,h;for(;n>2&&o>1||a>2&&l>1;){let m=o,p=l;n>2&&o>1&&(m=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),n/=o/m),a>2&&l>1&&(p=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,a/=l/p),d=this.cachedCanvases.getCanvas(c,m,p),h=d.context,h.clearRect(0,0,m,p),h.drawImage(e,0,0,o,l,0,0,m,p),e=d.canvas,o=m,l=p,c=c==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:l}}_createMaskCanvas(e){const t=this.ctx,{width:i,height:s}=e,n=this.current.fillColor,a=this.current.patternFill,o=Y(t);let l,c,d,h;if((e.bitmap||e.data)&&e.count>1){const _=e.bitmap||e.data.buffer;c=JSON.stringify(a?o:[o.slice(0,4),n]),l=this._cachedBitmapsMap.get(_),l||(l=new Map,this._cachedBitmapsMap.set(_,l));const T=l.get(c);if(T&&!a){const I=Math.round(Math.min(o[0],o[2])+o[4]),M=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:T,offsetX:I,offsetY:M}}d=T}d||(h=this.cachedCanvases.getCanvas("maskCanvas",i,s),es(h.context,e));let m=P.transform(o,[1/i,0,0,-1/s,0,0]);m=P.transform(m,[1,0,0,1,0,-s]);const[p,g,b,v]=P.getAxialAlignedBoundingBox([0,0,i,s],m),y=Math.round(b-p)||1,x=Math.round(v-g)||1,w=this.cachedCanvases.getCanvas("fillCanvas",y,x),A=w.context,S=p,E=g;A.translate(-S,-E),A.transform(...m),d||(d=this._scaleImage(h.canvas,je(A)),d=d.img,l&&a&&l.set(c,d)),A.imageSmoothingEnabled=ts(Y(A),e.interpolate),Nt(A,d,0,0,d.width,d.height,0,0,i,s),A.globalCompositeOperation="source-in";const k=P.transform(je(A),[1,0,0,1,-S,-E]);return A.fillStyle=a?n.getPattern(t,this,k,ve.FILL):n,A.fillRect(0,0,i,s),l&&!a&&(this.cachedCanvases.delete("fillCanvas"),l.set(c,w.canvas)),{canvas:w.canvas,offsetX:Math.round(S),offsetY:Math.round(E)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=ya[e]}setLineJoin(e){this.ctx.lineJoin=va[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,e,t);this.suspendedCtx=this.ctx,this.ctx=s.context;const n=this.ctx;n.setTransform(...Y(this.suspendedCtx)),vt(this.suspendedCtx,n),ga(n,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),vt(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,i,s){const n=s[0],a=s[1],o=s[2]-n,l=s[3]-a;o===0||l===0||(this.genericComposeSMask(t.context,i,o,l,t.subtype,t.backdrop,t.transferMap,n,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,s,n,a,o,l,c,d,h){let m=e.canvas,p=l-d,g=c-h;if(a){const v=P.makeHexColor(...a);if(p<0||g<0||p+i>m.width||g+s>m.height){const y=this.cachedCanvases.getCanvas("maskExtension",i,s),x=y.context;x.drawImage(m,-p,-g),x.globalCompositeOperation="destination-atop",x.fillStyle=v,x.fillRect(0,0,i,s),x.globalCompositeOperation="source-over",m=y.canvas,p=g=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const y=new Path2D;y.rect(p,g,i,s),e.clip(y),e.globalCompositeOperation="destination-atop",e.fillStyle=v,e.fillRect(p,g,i,s),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),n==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):n==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));const b=new Path2D;b.rect(l,c,i,s),t.clip(b),t.globalCompositeOperation="destination-in",t.drawImage(m,p,g,i,s,l,c,i,s),t.restore()}save(){this.inSMaskMode?(vt(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),vt(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,i,s,n,a){this.ctx.transform(e,t,i,s,n,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){const s=this.ctx,n=this.current;let a=n.x,o=n.y,l,c;const d=Y(s),h=d[0]===0&&d[3]===0||d[1]===0&&d[2]===0,m=h?i.slice(0):null;for(let p=0,g=0,b=e.length;p<b;p++)switch(e[p]|0){case Ie.rectangle:a=t[g++],o=t[g++];const v=t[g++],y=t[g++],x=a+v,w=o+y;s.moveTo(a,o),v===0||y===0?s.lineTo(x,w):(s.lineTo(x,o),s.lineTo(x,w),s.lineTo(a,w)),h||n.updateRectMinMax(d,[a,o,x,w]),s.closePath();break;case Ie.moveTo:a=t[g++],o=t[g++],s.moveTo(a,o),h||n.updatePathMinMax(d,a,o);break;case Ie.lineTo:a=t[g++],o=t[g++],s.lineTo(a,o),h||n.updatePathMinMax(d,a,o);break;case Ie.curveTo:l=a,c=o,a=t[g+4],o=t[g+5],s.bezierCurveTo(t[g],t[g+1],t[g+2],t[g+3],a,o),n.updateCurvePathMinMax(d,l,c,t[g],t[g+1],t[g+2],t[g+3],a,o,m),g+=6;break;case Ie.curveTo2:l=a,c=o,s.bezierCurveTo(a,o,t[g],t[g+1],t[g+2],t[g+3]),n.updateCurvePathMinMax(d,l,c,a,o,t[g],t[g+1],t[g+2],t[g+3],m),a=t[g+2],o=t[g+3],g+=4;break;case Ie.curveTo3:l=a,c=o,a=t[g+2],o=t[g+3],s.bezierCurveTo(t[g],t[g+1],a,o,a,o),n.updateCurvePathMinMax(d,l,c,t[g],t[g+1],a,o,a,o,m),g+=4;break;case Ie.closePath:s.closePath();break}h&&n.updateScalingPathMinMax(d,m),n.setCurrentPoint(a,o)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,i=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&i?.getPattern?(t.save(),t.strokeStyle=i.getPattern(t,this,je(t),ve.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,i=this.current.fillColor,s=this.current.patternFill;let n=!1;s&&(t.save(),t.fillStyle=i.getPattern(t,this,je(t),ve.FILL),n=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),n&&t.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=xa}eoClip(){this.pendingClip=is}beginText(){this.current.textMatrix=ws,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const i of e)t.setTransform(...i.transform),t.translate(i.x,i.y),i.addToPath(t,i.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){const i=this.commonObjs.get(e),s=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=i.fontMatrix||hi,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&B("Invalid font matrix for font "+e),t<0?(t=-t,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const n=i.loadedName||"sans-serif",a=i.systemFontInfo?.css||`"${n}", ${i.fallbackName}`;let o="normal";i.black?o="900":i.bold&&(o="bold");const l=i.italic?"italic":"normal";let c=t;t<$i?c=$i:t>Xi&&(c=Xi),this.current.fontSizeScale=t/c,this.ctx.font=`${l} ${o} ${c}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,i,s,n,a){this.current.textMatrix=[e,t,i,s,n,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,i,s){const n=this.ctx,a=this.current,o=a.font,l=a.textRenderingMode,c=a.fontSize/a.fontSizeScale,d=l&pe.FILL_STROKE_MASK,h=!!(l&pe.ADD_TO_PATH_FLAG),m=a.patternFill&&!o.missingFile;let p;(o.disableFontFace||h||m)&&(p=o.getPathGenerator(this.commonObjs,e)),o.disableFontFace||m?(n.save(),n.translate(t,i),n.beginPath(),p(n,c),s&&n.setTransform(...s),(d===pe.FILL||d===pe.FILL_STROKE)&&n.fill(),(d===pe.STROKE||d===pe.FILL_STROKE)&&n.stroke(),n.restore()):((d===pe.FILL||d===pe.FILL_STROKE)&&n.fillText(e,t,i),(d===pe.STROKE||d===pe.FILL_STROKE)&&n.strokeText(e,t,i)),h&&(this.pendingTextPaths||=[]).push({transform:Y(n),x:t,y:i,fontSize:c,addToPath:p})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){i=!0;break}return G(this,"isFontSubpixelAAEnabled",i)}showText(e){const t=this.current,i=t.font;if(i.isType3Font)return this.showType3Text(e);const s=t.fontSize;if(s===0)return;const n=this.ctx,a=t.fontSizeScale,o=t.charSpacing,l=t.wordSpacing,c=t.fontDirection,d=t.textHScale*c,h=e.length,m=i.vertical,p=m?1:-1,g=i.defaultVMetrics,b=s*t.fontMatrix[0],v=t.textRenderingMode===pe.FILL&&!i.disableFontFace&&!t.patternFill;n.save(),n.transform(...t.textMatrix),n.translate(t.x,t.y+t.textRise),c>0?n.scale(d,-1):n.scale(d,1);let y;if(t.patternFill){n.save();const E=t.fillColor.getPattern(n,this,je(n),ve.FILL);y=Y(n),n.restore(),n.fillStyle=E}let x=t.lineWidth;const w=t.textMatrixScale;if(w===0||x===0){const E=t.textRenderingMode&pe.FILL_STROKE_MASK;(E===pe.STROKE||E===pe.FILL_STROKE)&&(x=this.getSinglePixelWidth())}else x/=w;if(a!==1&&(n.scale(a,a),x/=a),n.lineWidth=x,i.isInvalidPDFjsFont){const E=[];let k=0;for(const _ of e)E.push(_.unicode),k+=_.width;n.fillText(E.join(""),0,0),t.x+=k*b*d,n.restore(),this.compose();return}let A=0,S;for(S=0;S<h;++S){const E=e[S];if(typeof E=="number"){A+=p*E*s/1e3;continue}let k=!1;const _=(E.isSpace?l:0)+o,T=E.fontChar,I=E.accent;let M,W,O=E.width;if(m){const H=E.vmetric||g,j=-(E.vmetric?H[1]:O*.5)*b,C=H[2]*b;O=H?-H[0]:O,M=j/a,W=(A+C)/a}else M=A/a,W=0;if(i.remeasure&&O>0){const H=n.measureText(T).width*1e3/s*a;if(O<H&&this.isFontSubpixelAAEnabled){const j=O/H;k=!0,n.save(),n.scale(j,1),M/=j}else O!==H&&(M+=(O-H)/2e3*s/a)}if(this.contentVisible&&(E.isInFont||i.missingFile)){if(v&&!I)n.fillText(T,M,W);else if(this.paintChar(T,M,W,y),I){const H=M+s*I.offset.x/a,j=W-s*I.offset.y/a;this.paintChar(I.fontChar,H,j,y)}}const z=m?O*b-_*c:O*b+_*c;A+=z,k&&n.restore()}m?t.y-=A:t.x+=A*d,n.restore(),this.compose()}showType3Text(e){const t=this.ctx,i=this.current,s=i.font,n=i.fontSize,a=i.fontDirection,o=s.vertical?1:-1,l=i.charSpacing,c=i.wordSpacing,d=i.textHScale*a,h=i.fontMatrix||hi,m=e.length,p=i.textRenderingMode===pe.INVISIBLE;let g,b,v,y;if(!(p||n===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...i.textMatrix),t.translate(i.x,i.y),t.scale(d,a),g=0;g<m;++g){if(b=e[g],typeof b=="number"){y=o*b*n/1e3,this.ctx.translate(y,0),i.x+=y*d;continue}const x=(b.isSpace?c:0)+l,w=s.charProcOperatorList[b.operatorListId];if(!w){B(`Type3 character "${b.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=b,this.save(),t.scale(n,n),t.transform(...h),this.executeOperatorList(w),this.restore()),v=P.applyTransform([b.width,0],h)[0]*n+x,t.translate(v,0),i.x+=v*d}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,s,n,a){this.ctx.rect(i,s,n-i,a-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const i=e[1],s=this.baseTransform||Y(this.ctx),n={createCanvasGraphics:a=>new dt(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Di(e,i,this.ctx,n,s)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,i){this.ctx.strokeStyle=this.current.strokeColor=P.makeHexColor(e,t,i)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,i){this.ctx.fillStyle=this.current.fillColor=P.makeHexColor(e,t,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=ha(this.getObject(e)),this.cachedPatterns.set(e,i)),t&&(i.matrix=t),i}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const i=this._getPattern(e);t.fillStyle=i.getPattern(t,this,je(t),ve.SHADING);const s=je(t);if(s){const{width:n,height:a}=t.canvas,[o,l,c,d]=P.getAxialAlignedBoundingBox([0,0,n,a],s);this.ctx.fillRect(o,l,c-o,d-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){X("Should not call beginInlineImage")}beginImageData(){X("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Y(this.ctx),t)){const i=t[2]-t[0],s=t[3]-t[1];this.ctx.rect(t[0],t[1],i,s),this.current.updateRectMinMax(Y(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Kt("TODO: Support non-isolated groups."),e.knockout&&B("Knockout groups not supported.");const i=Y(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=P.getAxialAlignedBoundingBox(e.bbox,Y(t));const n=[0,0,t.canvas.width,t.canvas.height];s=P.intersect(s,n)||[0,0,0,0];const a=Math.floor(s[0]),o=Math.floor(s[1]),l=Math.max(Math.ceil(s[2])-a,1),c=Math.max(Math.ceil(s[3])-o,1);this.current.startNewPathAndClipBox([0,0,l,c]);let d="groupAt"+this.groupLevel;e.smask&&(d+="_smask_"+this.smaskCounter++%2);const h=this.cachedCanvases.getCanvas(d,l,c),m=h.context;m.translate(-a,-o),m.transform(...i),e.smask?this.smaskStack.push({canvas:h.canvas,context:m,offsetX:a,offsetY:o,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,o),t.save()),vt(t,m),this.ctx=m,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=Y(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const n=P.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],s);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(n)}}beginAnnotation(e,t,i,s,n){if(this.#e(),Ft(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const a=t[2]-t[0],o=t[3]-t[1];if(n&&this.annotationCanvasMap){i=i.slice(),i[4]-=t[0],i[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=o;const[l,c]=P.singularValueDecompose2dScale(Y(this.ctx)),{viewportScale:d}=this,h=Math.ceil(a*this.outputScaleX*d),m=Math.ceil(o*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(h,m);const{canvas:p,context:g}=this.annotationCanvas;this.annotationCanvasMap.set(e,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=g,this.ctx.save(),this.ctx.setTransform(l,0,0,-c,0,o*c),Ft(this.ctx)}else Ft(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],a,o),this.ctx.clip(),this.ctx.beginPath()}this.current=new Zi(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const i=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=ba(e)),s.compiled)){s.compiled(i);return}const n=this._createMaskCanvas(e),a=n.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(a,n.offsetX,n.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i=0,s=0,n,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const o=this.ctx;o.save();const l=Y(o);o.transform(t,i,s,n,0,0);const c=this._createMaskCanvas(e);o.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let d=0,h=a.length;d<h;d+=2){const m=P.transform(l,[t,i,s,n,a[d],a[d+1]]),[p,g]=P.applyTransform([0,0],m);o.drawImage(c.canvas,p,g)}o.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,i=this.current.fillColor,s=this.current.patternFill;for(const n of e){const{data:a,width:o,height:l,transform:c}=n,d=this.cachedCanvases.getCanvas("maskCanvas",o,l),h=d.context;h.save();const m=this.getObject(a,n);es(h,m),h.globalCompositeOperation="source-in",h.fillStyle=s?i.getPattern(h,this,je(t),ve.FILL):i,h.fillRect(0,0,o,l),h.restore(),t.save(),t.transform(...c),t.scale(1,-1),Nt(t,d.canvas,0,0,o,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){B("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,i,s){if(!this.contentVisible)return;const n=this.getObject(e);if(!n){B("Dependent image isn't ready yet");return}const a=n.width,o=n.height,l=[];for(let c=0,d=s.length;c<d;c+=2)l.push({transform:[t,0,0,i,s[c],s[c+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(n,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:i,height:s}=e,n=this.cachedCanvases.getCanvas("inlineImage",i,s),a=n.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",n.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,i=e.height,s=this.ctx;if(this.save(),!be){const{filter:o}=s;o!=="none"&&o!==""&&(s.filter="none")}s.scale(1/t,-1/i);let n;if(e.bitmap)n=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)n=e;else{const l=this.cachedCanvases.getCanvas("inlineImage",t,i).context;Qi(l,e),n=this.applyTransferMapsToCanvas(l)}const a=this._scaleImage(n,je(s));s.imageSmoothingEnabled=ts(Y(s),e.interpolate),Nt(s,a.img,0,0,a.paintWidth,a.paintHeight,0,-i,t,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const i=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const n=e.width,a=e.height,l=this.cachedCanvases.getCanvas("inlineImage",n,a).context;Qi(l,e),s=this.applyTransferMapsToCanvas(l)}for(const n of t)i.save(),i.transform(...n.transform),i.scale(1,-1),Nt(i,s,n.x,n.y,n.w,n.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const i=this.ctx;this.pendingClip&&(t||(this.pendingClip===is?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Y(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:i,c:s,d:n}=this.ctx.getTransform();let a,o;if(i===0&&s===0){const l=Math.abs(t),c=Math.abs(n);if(l===c)if(e===0)a=o=1/l;else{const d=l*e;a=o=d<1?1/d:1}else if(e===0)a=1/l,o=1/c;else{const d=l*e,h=c*e;a=d<1?1/d:1,o=h<1?1/h:1}}else{const l=Math.abs(t*n-i*s),c=Math.hypot(t,i),d=Math.hypot(s,n);if(e===0)a=d/l,o=c/l;else{const h=e*l;a=d>h?d/h:1,o=c>h?c/h:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:i}=this.current,[s,n]=this.getScaleForStroking();if(t.lineWidth=i||1,s===1&&n===1){t.stroke();return}const a=t.getLineDash();if(e&&t.save(),t.scale(s,n),a.length>0){const o=Math.max(s,n);t.setLineDash(a.map(l=>l/o)),t.lineDashOffset/=o}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const r in Ie)dt.prototype[r]!==void 0&&(dt.prototype[Ie[r]]=dt.prototype[r]);class kt{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}const jt={DATA:1,ERROR:2},se={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Ee(r){switch(r instanceof Error||typeof r=="object"&&r!==null||X('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new nt(r.message);case"MissingPDFException":return new st(r.message);case"PasswordException":return new mi(r.message,r.code);case"UnexpectedResponseException":return new $t(r.message,r.status);case"UnknownErrorException":return new pi(r.message,r.details);default:return new pi(r.message,r.toString())}}class wt{#e=new AbortController;constructor(e,t,i){this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#s(e);return}if(e.callback){const i=e.callbackId,s=this.callbackCapabilities[i];if(!s)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],e.callback===jt.DATA)s.resolve(e.data);else if(e.callback===jt.ERROR)s.reject(Ee(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const i=this.sourceName,s=e.sourceName,n=this.comObj;new Promise(function(a){a(t(e.data))}).then(function(a){n.postMessage({sourceName:i,targetName:s,callback:jt.DATA,callbackId:e.callbackId,data:a})},function(a){n.postMessage({sourceName:i,targetName:s,callback:jt.ERROR,callbackId:e.callbackId,reason:Ee(a)})});return}if(e.streamId){this.#i(e);return}t(e.data)}on(e,t){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const s=this.callbackId++,n=Promise.withResolvers();this.callbackCapabilities[s]=n;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},i)}catch(a){n.reject(a)}return n.promise}sendWithStream(e,t,i,s){const n=this.streamId++,a=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const d=Promise.withResolvers();return this.streamControllers[n]={controller:c,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:a,targetName:o,action:e,streamId:n,data:t,desiredSize:c.desiredSize},s),d.promise},pull:c=>{const d=Promise.withResolvers();return this.streamControllers[n].pullCall=d,l.postMessage({sourceName:a,targetName:o,stream:se.PULL,streamId:n,desiredSize:c.desiredSize}),d.promise},cancel:c=>{re(c instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[n].cancelCall=d,this.streamControllers[n].isClosed=!0,l.postMessage({sourceName:a,targetName:o,stream:se.CANCEL,streamId:n,reason:Ee(c)}),d.promise}},i)}#i(e){const t=e.streamId,i=this.sourceName,s=e.sourceName,n=this.comObj,a=this,o=this.actionHandler[e.action],l={enqueue(c,d=1,h){if(this.isCancelled)return;const m=this.desiredSize;this.desiredSize-=d,m>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),n.postMessage({sourceName:i,targetName:s,stream:se.ENQUEUE,streamId:t,chunk:c},h)},close(){this.isCancelled||(this.isCancelled=!0,n.postMessage({sourceName:i,targetName:s,stream:se.CLOSE,streamId:t}),delete a.streamSinks[t])},error(c){re(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,n.postMessage({sourceName:i,targetName:s,stream:se.ERROR,streamId:t,reason:Ee(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,new Promise(function(c){c(o(e.data,l))}).then(function(){n.postMessage({sourceName:i,targetName:s,stream:se.START_COMPLETE,streamId:t,success:!0})},function(c){n.postMessage({sourceName:i,targetName:s,stream:se.START_COMPLETE,streamId:t,reason:Ee(c)})})}#s(e){const t=e.streamId,i=this.sourceName,s=e.sourceName,n=this.comObj,a=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case se.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(Ee(e.reason));break;case se.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(Ee(e.reason));break;case se.PULL:if(!o){n.postMessage({sourceName:i,targetName:s,stream:se.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,new Promise(function(l){l(o.onPull?.())}).then(function(){n.postMessage({sourceName:i,targetName:s,stream:se.PULL_COMPLETE,streamId:t,success:!0})},function(l){n.postMessage({sourceName:i,targetName:s,stream:se.PULL_COMPLETE,streamId:t,reason:Ee(l)})});break;case se.ENQUEUE:if(re(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case se.CLOSE:if(re(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),this.#a(a,t);break;case se.ERROR:re(a,"error should have stream controller"),a.controller.error(Ee(e.reason)),this.#a(a,t);break;case se.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(Ee(e.reason)),this.#a(a,t);break;case se.CANCEL:if(!o)break;new Promise(function(l){l(o.onCancel?.(Ee(e.reason)))}).then(function(){n.postMessage({sourceName:i,targetName:s,stream:se.CANCEL_COMPLETE,streamId:t,success:!0})},function(l){n.postMessage({sourceName:i,targetName:s,stream:se.CANCEL_COMPLETE,streamId:t,reason:Ee(l)})}),o.sinkCapability.reject(Ee(e.reason)),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#a(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#e?.abort(),this.#e=null}}class Aa{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}getAll(){return ki(this.#e)}has(e){return this.#e.has(e)}}const lt=Symbol("INTERNAL");class wa{#e=!1;#t=!1;#i=!1;#s=!0;constructor(e,{name:t,intent:i,usage:s,rbGroups:n}){this.#e=!!(e&ke.DISPLAY),this.#t=!!(e&ke.PRINT),this.name=t,this.intent=i,this.usage=s,this.rbGroups=n}get visible(){if(this.#i)return this.#s;if(!this.#s)return!1;const{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,i=!1){e!==lt&&X("Internal method `_setVisible` called."),this.#i=i,this.#s=t}}class Sa{#e=null;#t=new Map;#i=null;#s=null;constructor(e,t=ke.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#s=e.order;for(const i of e.groups)this.#t.set(i.id,new wa(t,i));if(e.baseState==="OFF")for(const i of this.#t.values())i._setVisible(lt,!1);for(const i of e.on)this.#t.get(i)._setVisible(lt,!0);for(const i of e.off)this.#t.get(i)._setVisible(lt,!1);this.#i=this.getHash()}}#a(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let s=1;s<t;s++){const n=e[s];let a;if(Array.isArray(n))a=this.#a(n);else if(this.#t.has(n))a=this.#t.get(n).visible;else return B(`Optional content group not found: ${n}`),!0;switch(i){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return i==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return Kt("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(B(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#a(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!this.#t.has(t))return B(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!this.#t.has(t))return B(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!this.#t.has(t))return B(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!this.#t.has(t))return B(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return B(`Unknown optional content policy ${e.policy}.`),!0}return B(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,i=!0){const s=this.#t.get(e);if(!s){B(`Optional content group not found: ${e}`);return}if(i&&t&&s.rbGroups.length)for(const n of s.rbGroups)for(const a of n)a!==e&&this.#t.get(a)?._setVisible(lt,!1,!0);s._setVisible(lt,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let i;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":i=s;continue}const n=this.#t.get(s);if(n)switch(i){case"ON":this.setVisibility(s,!0,t);break;case"OFF":this.setVisibility(s,!1,t);break;case"Toggle":this.setVisibility(s,!n.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#t.size?this.#s?this.#s.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?ki(this.#t):null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new _s;for(const[t,i]of this.#t)e.update(`${t}:${i.visible}`);return this.#e=e.hexdigest()}}class Ea{constructor(e,{disableRange:t=!1,disableStream:i=!1}){re(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:n,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,n?.length>0){const l=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),e.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const i=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const s=this._rangeReaders.some(function(n){return n._begin!==e?!1:(n._enqueue(i),!0)});re(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){re(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new ka(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new _a(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class ka{constructor(e,t,i=!1,s=null){this._stream=e,this._done=i||!1,this._filename=Ci(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const n of this._queuedChunks)this._loaded+=n.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class _a{constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Ta(r){let e=!0,t=i("filename\\*","i").exec(r);if(t){t=t[1];let d=o(t);return d=unescape(d),d=l(d),d=c(d),n(d)}if(t=a(r),t){const d=c(t);return n(d)}if(t=i("filename","i").exec(r),t){t=t[1];let d=o(t);return d=c(d),n(d)}function i(d,h){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function s(d,h){if(d){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const m=new TextDecoder(d,{fatal:!0}),p=Xt(h);h=m.decode(p),e=!1}catch{}}return h}function n(d){return e&&/[\x80-\xff]/.test(d)&&(d=s("utf-8",d),e&&(d=s("iso-8859-1",d))),d}function a(d){const h=[];let m;const p=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(m=p.exec(d))!==null;){let[,b,v,y]=m;if(b=parseInt(b,10),b in h){if(b===0)break;continue}h[b]=[v,y]}const g=[];for(let b=0;b<h.length&&b in h;++b){let[v,y]=h[b];y=o(y),v&&(y=unescape(y),b===0&&(y=l(y))),g.push(y)}return g.join("")}function o(d){if(d.startsWith('"')){const h=d.slice(1).split('\\"');for(let m=0;m<h.length;++m){const p=h[m].indexOf('"');p!==-1&&(h[m]=h[m].slice(0,p),h.length=m+1),h[m]=h[m].replaceAll(/\\(.)/g,"$1")}d=h.join('"')}return d}function l(d){const h=d.indexOf("'");if(h===-1)return d;const m=d.slice(0,h),g=d.slice(h+1).replace(/^[^']*'/,"");return s(m,g)}function c(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,m,p,g){if(p==="q"||p==="Q")return g=g.replaceAll("_"," "),g=g.replaceAll(/=([0-9a-fA-F]{2})/g,function(b,v){return String.fromCharCode(parseInt(v,16))}),s(m,g);try{g=atob(g)}catch{}return s(m,g)})}return""}function Ni(r,e){const t=new Headers;if(!r||!e||typeof e!="object")return t;for(const i in e){const s=e[i];s!==void 0&&t.append(i,s)}return t}function Fi({responseHeaders:r,isHttp:e,rangeChunkSize:t,disableRange:i}){const s={allowRangeRequests:!1,suggestedLength:void 0},n=parseInt(r.get("Content-Length"),10);return!Number.isInteger(n)||(s.suggestedLength=n,n<=2*t)||i||!e||r.get("Accept-Ranges")!=="bytes"||(r.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function ji(r){const e=r.get("Content-Disposition");if(e){let t=Ta(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Ci(t))return t}return null}function Zt(r,e){return r===404||r===0&&e.startsWith("file:")?new st('Missing PDF "'+e+'".'):new $t(`Unexpected server response (${r}) while retrieving PDF "${e}".`,r)}function Ns(r){return r===200||r===206}function Fs(r,e,t){return{method:"GET",headers:r,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function js(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(B(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class ss{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=Ni(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return re(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Ca(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new La(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class Ca{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const i=new Headers(e.headers),s=t.url;fetch(s,Fs(i,this._withCredentials,this._abortController)).then(n=>{if(!Ns(n.status))throw Zt(n.status,s);this._reader=n.body.getReader(),this._headersCapability.resolve();const a=n.headers,{allowRangeRequests:o,suggestedLength:l}=Fi({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=l||this._contentLength,this._filename=ji(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new nt("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:js(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class La{constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const n=new Headers(e.headers);n.append("Range",`bytes=${t}-${i-1}`);const a=s.url;fetch(a,Fs(n,this._withCredentials,this._abortController)).then(o=>{if(!Ns(o.status))throw Zt(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:js(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const li=200,ci=206;function Ma(r){const e=r.response;return typeof e!="string"?e:Xt(e).buffer}class Pa{constructor({url:e,httpHeaders:t,withCredentials:i}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=Ni(this.isHttp,t),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,i){const s={begin:e,end:t};for(const n in i)s[n]=i[n];return this.request(s)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,i=this.currXhrId++,s=this.pendingRequests[i]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[n,a]of this.headers)t.setRequestHeader(n,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=ci):s.expectedStatus=li,t.responseType="arraybuffer",e.onError&&(t.onerror=function(n){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){const i=this.pendingRequests[e];i&&i.onProgress?.(t)}onStateChange(e,t){const i=this.pendingRequests[e];if(!i)return;const s=i.xhr;if(s.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){i.onError?.(s.status);return}const n=s.status||li;if(!(n===li&&i.expectedStatus===ci)&&n!==i.expectedStatus){i.onError?.(s.status);return}const o=Ma(s);if(n===ci){const l=s.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);i.onDone({begin:parseInt(c[1],10),chunk:o})}else o?i.onDone({begin:0,chunk:o}):i.onError?.(s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class Ia{constructor(e){this._source=e,this._manager=new Pa(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return re(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Ra(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const i=new Da(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class Ra{constructor(e,t){this._manager=e;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(i),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),i=new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map(a=>{const[o,...l]=a.split(": ");return[o,l.join(": ")]})),{allowRangeRequests:s,suggestedLength:n}=Fi({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=n||this._contentLength,this._filename=ji(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Zt(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Da{constructor(e,t,i){this._manager=e;const s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,i,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=Zt(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Na=/^[a-z][a-z0-9\-+.]+:/i;function Fa(r){if(Na.test(r))return new URL(r);const e=Ke.get("url");return new URL(e.pathToFileURL(r))}function qs(r,e,t){return r.protocol==="http:"?Ke.get("http").request(r,{headers:e},t):Ke.get("https").request(r,{headers:e},t)}class ja{constructor(e){this.source=e,this.url=Fa(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=Ni(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return re(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new Ba(this):new qa(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=this.isFsUrl?new Oa(this,e,t):new za(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class zs{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new nt("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Bs{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class qa extends zs{constructor(e){super(e);const t=Object.fromEntries(e.headers),i=s=>{if(s.statusCode===404){const l=new st(`Missing PDF "${this._url}".`);this._storedError=l,this._headersCapability.reject(l);return}this._headersCapability.resolve(),this._setReadableStream(s);const n=new Headers(this._readableStream.headers),{allowRangeRequests:a,suggestedLength:o}=Fi({responseHeaders:n,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=o||this._contentLength,this._filename=ji(n)};this._request=qs(this._url,t,i),this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}}class za extends Bs{constructor(e,t,i){super(e);const s=Object.fromEntries(e.headers);s.Range=`bytes=${t}-${i-1}`;const n=a=>{if(a.statusCode===404){const o=new st(`Missing PDF "${this._url}".`);this._storedError=o;return}this._setReadableStream(a)};this._request=qs(this._url,s,n),this._request.on("error",a=>{this._storedError=a}),this._request.end()}}class Ba extends zs{constructor(e){super(e);const t=Ke.get("fs");t.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new st(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}}class Oa extends Bs{constructor(e,t,i){super(e);const s=Ke.get("fs");this._setReadableStream(s.createReadStream(this._url,{start:t,end:i-1}))}}const Ha=1e5,we=30,Ga=.8;let xi=class Te{#e=Promise.withResolvers();#t=null;#i=!1;#s=!!globalThis.FontInspector?.enabled;#a=null;#n=null;#l=0;#c=0;#d=null;#o=null;#u=0;#r=0;#h=Object.create(null);#p=[];#m=null;#b=[];#f=new WeakMap;#g=null;static#y=new Map;static#x=new Map;static#_=new WeakMap;static#S=null;static#E=new Set;constructor({textContentSource:e,container:t,viewport:i}){if(e instanceof ReadableStream)this.#m=e;else if(typeof e=="object")this.#m=new ReadableStream({start(l){l.enqueue(e),l.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#o=t,this.#r=i.scale*(globalThis.devicePixelRatio||1),this.#u=i.rotation,this.#n={div:null,properties:null,ctx:null};const{pageWidth:s,pageHeight:n,pageX:a,pageY:o}=i.rawDims;this.#g=[1,0,0,-1,-a,o+n],this.#c=s,this.#l=n,Te.#L(),et(t,i),this.#e.promise.finally(()=>{Te.#E.delete(this),this.#n=null,this.#h=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=xe.platform;return G(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#d.read().then(({value:t,done:i})=>{if(i){this.#e.resolve();return}this.#a??=t.lang,Object.assign(this.#h,t.styles),this.#N(t.items),e()},this.#e.reject)};return this.#d=this.#m.getReader(),Te.#E.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const i=e.scale*(globalThis.devicePixelRatio||1),s=e.rotation;if(s!==this.#u&&(t?.(),this.#u=s,et(this.#o,{rotation:s})),i!==this.#r){t?.(),this.#r=i;const n={div:null,properties:null,ctx:Te.#k(this.#a)};for(const a of this.#b)n.properties=this.#f.get(a),n.div=a,this.#A(n)}}cancel(){const e=new nt("TextLayer task cancelled.");this.#d?.cancel(e).catch(()=>{}),this.#d=null,this.#e.reject(e)}get textDivs(){return this.#b}get textContentItemsStr(){return this.#p}#N(e){if(this.#i)return;this.#n.ctx??=Te.#k(this.#a);const t=this.#b,i=this.#p;for(const s of e){if(t.length>Ha){B("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(s.str===void 0){if(s.type==="beginMarkedContentProps"||s.type==="beginMarkedContent"){const n=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),s.id!==null&&this.#t.setAttribute("id",`${s.id}`),n.append(this.#t)}else s.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}i.push(s.str),this.#T(s)}}#T(e){const t=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#b.push(t);const s=P.transform(this.#g,e.transform);let n=Math.atan2(s[1],s[0]);const a=this.#h[e.fontName];a.vertical&&(n+=Math.PI/2);let o=this.#s&&a.fontSubstitution||a.fontFamily;o=Te.fontFamilyMap.get(o)||o;const l=Math.hypot(s[2],s[3]),c=l*Te.#I(o,this.#a);let d,h;n===0?(d=s[4],h=s[5]-c):(d=s[4]+c*Math.sin(n),h=s[5]-c*Math.cos(n));const m="calc(var(--scale-factor)*",p=t.style;this.#t===this.#o?(p.left=`${(100*d/this.#c).toFixed(2)}%`,p.top=`${(100*h/this.#l).toFixed(2)}%`):(p.left=`${m}${d.toFixed(2)}px)`,p.top=`${m}${h.toFixed(2)}px)`),p.fontSize=`${m}${(Te.#S*l).toFixed(2)}px)`,p.fontFamily=o,i.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#s&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),n!==0&&(i.angle=n*(180/Math.PI));let g=!1;if(e.str.length>1)g=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const b=Math.abs(e.transform[0]),v=Math.abs(e.transform[3]);b!==v&&Math.max(b,v)/Math.min(b,v)>1.5&&(g=!0)}if(g&&(i.canvasWidth=a.vertical?e.height:e.width),this.#f.set(t,i),this.#n.div=t,this.#n.properties=i,this.#A(this.#n),i.hasText&&this.#t.append(t),i.hasEOL){const b=document.createElement("br");b.setAttribute("role","presentation"),this.#t.append(b)}}#A(e){const{div:t,properties:i,ctx:s}=e,{style:n}=t;let a="";if(Te.#S>1&&(a=`scale(${1/Te.#S})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:o}=n,{canvasWidth:l,fontSize:c}=i;Te.#C(s,c*this.#r,o);const{width:d}=s.measureText(t.textContent);d>0&&(a=`scaleX(${l*this.#r/d}) ${a}`)}i.angle!==0&&(a=`rotate(${i.angle}deg) ${a}`),a.length>0&&(n.transform=a)}static cleanup(){if(!(this.#E.size>0)){this.#y.clear();for(const{canvas:e}of this.#x.values())e.remove();this.#x.clear()}}static#k(e=null){let t=this.#x.get(e||="");if(!t){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#x.set(e,t),this.#_.set(t,{size:0,family:""})}return t}static#C(e,t,i){const s=this.#_.get(e);t===s.size&&i===s.family||(e.font=`${t}px ${i}`,s.size=t,s.family=i)}static#L(){if(this.#S!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#S=e.getBoundingClientRect().height,e.remove()}static#I(e,t){const i=this.#y.get(e);if(i)return i;const s=this.#k(t);s.canvas.width=s.canvas.height=we,this.#C(s,we,e);const n=s.measureText("");let a=n.fontBoundingBoxAscent,o=Math.abs(n.fontBoundingBoxDescent);if(a){const d=a/(a+o);return this.#y.set(e,d),s.canvas.width=s.canvas.height=0,d}s.strokeStyle="red",s.clearRect(0,0,we,we),s.strokeText("g",0,0);let l=s.getImageData(0,0,we,we).data;o=0;for(let d=l.length-1-3;d>=0;d-=4)if(l[d]>0){o=Math.ceil(d/4/we);break}s.clearRect(0,0,we,we),s.strokeText("A",0,we),l=s.getImageData(0,0,we,we).data,a=0;for(let d=0,h=l.length;d<h;d+=4)if(l[d]>0){a=we-Math.floor(d/4/we);break}s.canvas.width=s.canvas.height=0;const c=a?a/(a+o):Ga;return this.#y.set(e,c),c}};class _t{static textContent(e){const t=[],i={items:t,styles:Object.create(null)};function s(n){if(!n)return;let a=null;const o=n.name;if(o==="#text")a=n.value;else if(_t.shouldBuildText(o))n?.attributes?.textContent?a=n.attributes.textContent:n.value&&(a=n.value);else return;if(a!==null&&t.push({str:a}),!!n.children)for(const l of n.children)s(l)}return s(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const Wa=65536,Va=100,Ua=5e3,Ka=be?aa:ia,$a=be?ra:Ms,Xa=be?na:sa,Ja=be?oa:Rs;function Ya(r={}){typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});const e=new qi,{docId:t}=e,i=r.url?Za(r.url):null,s=r.data?Qa(r.data):null,n=r.httpHeaders||null,a=r.withCredentials===!0,o=r.password??null,l=r.range instanceof Os?r.range:null,c=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:Wa;let d=r.worker instanceof ce?r.worker:null;const h=r.verbosity,m=typeof r.docBaseUrl=="string"&&!Yt(r.docBaseUrl)?r.docBaseUrl:null,p=typeof r.cMapUrl=="string"?r.cMapUrl:null,g=r.cMapPacked!==!1,b=r.CMapReaderFactory||$a,v=typeof r.standardFontDataUrl=="string"?r.standardFontDataUrl:null,y=r.StandardFontDataFactory||Ja,x=r.stopAtErrors!==!0,w=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,A=r.isEvalSupported!==!1,S=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!be,E=typeof r.isChrome=="boolean"?r.isChrome:!xe.platform.isFirefox&&typeof window<"u"&&!!window?.chrome,k=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,_=typeof r.disableFontFace=="boolean"?r.disableFontFace:be,T=r.fontExtraProperties===!0,I=r.enableXfa===!0,M=r.ownerDocument||globalThis.document,W=r.disableRange===!0,O=r.disableStream===!0,z=r.disableAutoFetch===!0,H=r.pdfBug===!0,j=r.CanvasFactory||Ka,C=r.FilterFactory||Xa,R=r.enableHWA===!0,ue=l?l.length:r.length??NaN,ye=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!be&&!_,he=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:b===Ms&&y===Rs&&p&&v&&At(p,document.baseURI)&&At(v,document.baseURI);r.canvasFactory&&Vi("`canvasFactory`-instance option, please use `CanvasFactory` instead."),r.filterFactory&&Vi("`filterFactory`-instance option, please use `FilterFactory` instead.");const Z=null;Rn(h);const $={canvasFactory:new j({ownerDocument:M,enableHWA:R}),filterFactory:new C({docId:t,ownerDocument:M}),cMapReaderFactory:he?null:new b({baseUrl:p,isCompressed:g}),standardFontDataFactory:he?null:new y({baseUrl:v})};if(!d){const Q={verbosity:h,port:kt.workerPort};d=Q.port?ce.fromPort(Q):new ce(Q),e._worker=d}const Ae={docId:t,apiVersion:"4.8.69",data:s,password:o,disableAutoFetch:z,rangeChunkSize:c,length:ue,docBaseUrl:m,enableXfa:I,evaluatorOptions:{maxImageSize:w,disableFontFace:_,ignoreErrors:x,isEvalSupported:A,isOffscreenCanvasSupported:S,isChrome:E,canvasMaxAreaInBytes:k,fontExtraProperties:T,useSystemFonts:ye,cMapUrl:he?p:null,standardFontDataUrl:he?v:null}},Me={disableFontFace:_,fontExtraProperties:T,ownerDocument:M,pdfBug:H,styleElement:Z,loadingParams:{disableAutoFetch:z,enableXfa:I}};return d.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const Q=d.messageHandler.sendWithPromise("GetDocRequest",Ae,s?[s.buffer]:null);let V;if(l)V=new Ea(l,{disableRange:W,disableStream:O});else if(!s){if(!i)throw new Error("getDocument - no `url` parameter provided.");let Re;be?Re=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&At(i)?ss:ja:Re=At(i)?ss:Ia,V=new Re({url:i,length:ue,httpHeaders:n,withCredentials:a,rangeChunkSize:c,disableRange:W,disableStream:O})}return Q.then(Re=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const Pe=new wt(t,Re,d.port),J=new sr(Pe,e,V,Me,$);e._transport=J,Pe.send("Ready",null)})}).catch(e._capability.reject),e}function Za(r){if(r instanceof URL)return r.href;try{return new URL(r,window.location).href}catch{if(be&&typeof r=="string")return r}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Qa(r){if(be&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return Xt(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r?.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function ns(r){return typeof r=="object"&&Number.isInteger(r?.num)&&r.num>=0&&Number.isInteger(r?.gen)&&r.gen>=0}class qi{static#e=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${qi.#e++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}let Os=class{constructor(e,t,i=!1,s=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const i of this._rangeListeners)i(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){X("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class er{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return G(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class tr{#e=null;#t=!1;constructor(e,t,i,s=!1){this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=s?new Wi:null,this._pdfBug=s,this.commonObjs=i.commonObjs,this.objs=new Hs,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:s=0,dontFlip:n=!1}={}){return new Tt({viewBox:this.view,scale:e,rotation:t,offsetX:i,offsetY:s,dontFlip:n})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return G(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,viewport:t,intent:i="display",annotationMode:s=We.ENABLE,transform:n=null,background:a=null,optionalContentConfigPromise:o=null,annotationCanvasMap:l=null,pageColors:c=null,printAnnotationStorage:d=null,isEditing:h=!1}){this._stats?.time("Overall");const m=this._transport.getRenderingIntent(i,s,d,h),{renderingIntent:p,cacheKey:g}=m;this.#t=!1,this.#s(),o||=this._transport.getOptionalContentConfig(p);let b=this._intentStates.get(g);b||(b=Object.create(null),this._intentStates.set(g,b)),b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);const v=!!(p&ke.PRINT);b.displayReadyCapability||(b.displayReadyCapability=Promise.withResolvers(),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(m));const y=A=>{b.renderTasks.delete(x),(this._maybeCleanupAfterRender||v)&&(this.#t=!0),this.#i(!v),A?(x.capability.reject(A),this._abortOperatorList({intentState:b,reason:A instanceof Error?A:new Error(A)})):x.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},x=new ct({callback:y,params:{canvasContext:e,viewport:t,transform:n,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!v,pdfBug:this._pdfBug,pageColors:c});(b.renderTasks||=new Set).add(x);const w=x.task;return Promise.all([b.displayReadyCapability.promise,o]).then(([A,S])=>{if(this.destroyed){y();return}if(this._stats?.time("Rendering"),!(S.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");x.initializeGraphics({transparency:A,optionalContentConfig:S}),x.operatorListChanged()}).catch(y),w}getOperatorList({intent:e="display",annotationMode:t=We.ENABLE,printAnnotationStorage:i=null,isEditing:s=!1}={}){function n(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}const a=this._transport.getRenderingIntent(e,t,i,s,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=n,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||=new Set).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>_t.textContent(i));const t=this.streamTextContent(e);return new Promise(function(i,s){function n(){a.read().then(function({value:l,done:c}){if(c){i(o);return}o.lang??=l.lang,Object.assign(o.styles,l.styles),o.items.push(...l.items),n()},s)}const a=t.getReader(),o={items:[],styles:Object.create(null),lang:null};n()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),this.#t=!1,this.#s(),Promise.all(e)}cleanup(e=!1){this.#t=!0;const t=this.#i(!1);return e&&t&&(this._stats&&=new Wi),t}#i(e=!1){if(this.#s(),!this.#t||this.destroyed)return!1;if(e)return this.#e=setTimeout(()=>{this.#e=null,this.#i(!1)},Ua),!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#s(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(e,t){const i=this._intentStates.get(t);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let i=0,s=e.length;i<s;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const i of t.renderTasks)i.operatorListChanged();e.lastChunk&&this.#i(!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i,modifiedIds:s}){const{map:n,transfer:a}=i,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:n,modifiedIds:s},a).getReader(),c=this._intentStates.get(t);c.streamReader=l;const d=()=>{l.read().then(({value:h,done:m})=>{if(m){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,c),d())},h=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const m of c.renderTasks)m.operatorListChanged();this.#i(!0)}if(c.displayReadyCapability)c.displayReadyCapability.reject(h);else if(c.opListReadCapability)c.opListReadCapability.reject(h);else throw h}})};d()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof Ti){let s=Va;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new nt(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,n]of this._intentStates)if(n===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}class ir{#e=new Map;#t=Promise.resolve();postMessage(e,t){const i={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[s]of this.#e)s.call(this,i)})}addEventListener(e,t,i=null){let s=null;if(i?.signal instanceof AbortSignal){const{signal:n}=i;if(n.aborted){B("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);s=()=>n.removeEventListener("abort",a),n.addEventListener("abort",a)}this.#e.set(t,s)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}class ce{static#e=0;static#t=!1;static#i;static{be&&(this.#t=!0,kt.workerSrc||="./pdf.worker.mjs"),this._isSameOrigin=(e,t)=>{let i;try{if(i=new URL(e),!i.origin||i.origin==="null")return!1}catch{return!1}const s=new URL(t,i);return i.origin===s.origin},this._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}}constructor({name:e=null,port:t=null,verbosity:i=Dn()}={}){if(this.name=e,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if(ce.#i?.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(ce.#i||=new WeakMap).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return be?Promise.all([Ke.promise,this._readyCapability.promise]):this._readyCapability.promise}#s(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new wt("main","worker",e),this._messageHandler.on("ready",function(){}),this.#s()}_initialize(){if(ce.#t||ce.#a){this._setupFakeWorker();return}let{workerSrc:e}=ce;try{ce._isSameOrigin(window.location.href,e)||(e=ce._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),i=new wt("main","worker",t),s=()=>{n.abort(),i.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},n=new AbortController;t.addEventListener("error",()=>{this._webWorker||s()},{signal:n.signal}),i.on("test",o=>{if(n.abort(),this.destroyed||!o){s();return}this._messageHandler=i,this._port=t,this._webWorker=t,this.#s()}),i.on("ready",o=>{if(n.abort(),this.destroyed){s();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const o=new Uint8Array;i.send("test",o,[o.buffer])};a();return}catch{Kt("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){ce.#t||(B("Setting up fake worker."),ce.#t=!0),ce._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new ir;this._port=t;const i=`fake${ce.#e++}`,s=new wt(i+"_worker",i,t);e.setup(s,t),this._messageHandler=new wt(i,i+"_worker",t),this.#s()}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),ce.#i?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){if(!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const t=this.#i?.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new ce(e)}static get workerSrc(){if(kt.workerSrc)return kt.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#a(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){return G(this,"_setupFakeWorkerGlobal",(async()=>this.#a?this.#a:(await import(this.workerSrc)).WorkerMessageHandler)())}}class sr{#e=new Map;#t=new Map;#i=new Map;#s=new Map;#a=null;constructor(e,t,i,s,n){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new Hs,this.fontLoader=new ea({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=n.canvasFactory,this.filterFactory=n.filterFactory,this.cMapReaderFactory=n.cMapReaderFactory,this.standardFontDataFactory=n.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#n(e,t=null){const i=this.#e.get(e);if(i)return i;const s=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,s),s}get annotationStorage(){return G(this,"annotationStorage",new Ii)}getRenderingIntent(e,t=We.ENABLE,i=null,s=!1,n=!1){let a=ke.DISPLAY,o=fi;switch(e){case"any":a=ke.ANY;break;case"display":break;case"print":a=ke.PRINT;break;default:B(`getRenderingIntent - invalid intent: ${e}`)}const l=a&ke.PRINT&&i instanceof Ts?i:this.annotationStorage;switch(t){case We.DISABLE:a+=ke.ANNOTATIONS_DISABLE;break;case We.ENABLE:break;case We.ENABLE_FORMS:a+=ke.ANNOTATIONS_FORMS;break;case We.ENABLE_STORAGE:a+=ke.ANNOTATIONS_STORAGE,o=l.serializable;break;default:B(`getRenderingIntent - invalid annotationMode: ${t}`)}s&&(a+=ke.IS_EDITING),n&&(a+=ke.OPLIST);const{ids:c,hash:d}=l.modifiedIds,h=[a,o.hash,d];return{renderingIntent:a,cacheKey:h.join("_"),annotationStorageSerializable:o,modifiedIds:c}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of this.#t.values())e.push(i._destroy());this.#t.clear(),this.#i.clear(),this.#s.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),xi.cleanup(),this._networkStream?.cancelAllRequests(new nt("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(i,s)=>{re(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=n=>{this._lastProgress={loaded:n.loaded,total:n.total}},s.onPull=()=>{this._fullReader.read().then(function({value:n,done:a}){if(a){s.close();return}re(n instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(n),1,[n])}).catch(n=>{s.error(n)})},s.onCancel=n=>{this._fullReader.cancel(n),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async i=>{await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:n,contentLength:a}=this._fullReader;return(!s||!n)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=o=>{t.onProgress?.({loaded:o.loaded,total:o.total})}),{isStreamingSupported:s,isRangeSupported:n,contentLength:a}}),e.on("GetRangeReader",(i,s)=>{re(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(i.begin,i.end);if(!n){s.close();return}s.onPull=()=>{n.read().then(function({value:a,done:o}){if(o){s.close();return}re(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{n.cancel(a),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new er(i,this))}),e.on("DocException",function(i){let s;switch(i.name){case"PasswordException":s=new mi(i.message,i.code);break;case"InvalidPDFException":s=new Ss(i.message);break;case"MissingPDFException":s=new st(i.message);break;case"UnexpectedResponseException":s=new $t(i.message,i.status);break;case"UnknownErrorException":s=new pi(i.message,i.details);break;default:X("DocException - expected a valid Error.")}t._capability.reject(s)}),e.on("PasswordRequest",i=>{if(this.#a=Promise.withResolvers(),t.onPassword){const s=n=>{n instanceof Error?this.#a.reject(n):this.#a.resolve({password:n})};try{t.onPassword(s,i.code)}catch(n){this.#a.reject(n)}}else this.#a.reject(new mi(i.message,i.code));return this.#a.promise}),e.on("DataLoaded",i=>{t.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;this.#t.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,s,n])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(s){case"Font":const{disableFontFace:a,fontExtraProperties:o,pdfBug:l}=this._params;if("error"in n){const m=n.error;B(`Error during font loading: ${m}`),this.commonObjs.resolve(i,m);break}const c=l&&globalThis.FontInspector?.enabled?(m,p)=>globalThis.FontInspector.fontAdded(m,p):null,d=new ta(n,{disableFontFace:a,inspectFont:c});this.fontLoader.bind(d).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!o&&d.data&&(d.data=null),this.commonObjs.resolve(i,d)});break;case"CopyLocalImage":const{imageRef:h}=n;re(h,"The imageRef must be defined.");for(const m of this.#t.values())for(const[,p]of m.objs)if(p?.ref===h)return p.dataLen?(this.commonObjs.resolve(i,structuredClone(p)),p.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,n);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([i,s,n,a])=>{if(this.destroyed)return;const o=this.#t.get(s);if(!o.objs.has(i)){if(o._intentStates.size===0){a?.bitmap?.close();return}switch(n){case"Image":o.objs.resolve(i,a),a?.dataLen>Ln&&(o._maybeCleanupAfterRender=!0);break;case"Pattern":o.objs.resolve(i,a);break;default:throw new Error(`Got unknown object type ${n}`)}}}),e.on("DocProgress",i=>{this.destroyed||t.onProgress?.({loaded:i.loaded,total:i.total})}),e.on("FetchBuiltInCMap",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(i)}),e.on("FetchStandardFontData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&B("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=this.#i.get(t);if(i)return i;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(n=>{if(this.destroyed)throw new Error("Transport destroyed");n.refStr&&this.#s.set(n.refStr,e);const a=new tr(t,n,this,this._params.pdfBug);return this.#t.set(t,a),a});return this.#i.set(t,s),s}getPageIndex(e){return ns(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#n("GetFieldObjects")}hasJSActions(){return this.#n("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#n("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#n("GetOptionalContentConfig").then(t=>new Sa(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const i=this.messageHandler.sendWithPromise(e,null).then(s=>({info:s[0],metadata:s[1]?new Aa(s[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#t.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),xi.cleanup()}}cachedPageNumber(e){if(!ns(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#s.get(t)??null}}const qt=Symbol("INITIAL_DATA");class Hs{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:qt}}get(e,t=null){if(t){const s=this.#t(e);return s.promise.then(()=>t(s.data)),null}const i=this.#e[e];if(!i||i.data===qt)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const t=this.#e[e];return!!t&&t.data!==qt}resolve(e,t=null){const i=this.#t(e);i.data=t,i.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==qt&&(yield[e,t])}}}class nr{#e=null;constructor(e){this.#e=e,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class ct{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:i,commonObjs:s,annotationCanvasMap:n,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:d=!1,pdfBug:h=!1,pageColors:m=null}){this.callback=e,this.params=t,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=n,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=h,this.pageColors=m,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new nr(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(ct.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ct.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:s,transform:n,background:a}=this.params;this.gfx=new dt(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:n,viewport:s,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),ct.#t.delete(this._canvas),this.callback(e||new Ti(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ct.#t.delete(this._canvas),this.callback())))}}const ar="4.8.69",rr="3634dab10";function as(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function xt(r){return Math.max(0,Math.min(255,255*r))}class rs{static CMYK_G([e,t,i,s]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=xt(e),[e,e,e]}static G_HTML([e]){const t=as(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(xt)}static RGB_HTML(e){return`#${e.map(as).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,i+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,i,s]){return[xt(1-Math.min(1,e+s)),xt(1-Math.min(1,i+s)),xt(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){const s=1-e,n=1-t,a=1-i,o=Math.min(s,n,a);return["CMYK",s,n,a,o]}}class or{create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),i||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){X("Abstract method `_createSVG` called.")}}class zi extends or{_createSVG(e){return document.createElementNS(qe,e)}}class Gs{static setupStorage(e,t,i,s,n){const a=s.getValue(t,{value:null});switch(i.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),n==="print")break;e.addEventListener("input",o=>{s.setValue(t,{value:o.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(a.value===i.attributes.xfaOn?e.setAttribute("checked",!0):a.value===i.attributes.xfaOff&&e.removeAttribute("checked"),n==="print")break;e.addEventListener("change",o=>{s.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),n==="print")break;e.addEventListener("input",o=>{s.setValue(t,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const o of i.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const l=o.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;s.setValue(t,{value:c})});break}}static setAttributes({html:e,element:t,storage:i=null,intent:s,linkService:n}){const{attributes:a}=t,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${s}`);for(const[l,c]of Object.entries(a))if(c!=null)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!o||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,c)}o&&n.addLinkAttributes(e,a.href,a.newWindow),i&&a.dataId&&this.setupStorage(e,a.dataId,t,i)}static render(e){const t=e.annotationStorage,i=e.linkService,s=e.xfaHtml,n=e.intent||"display",a=document.createElement(s.name);s.attributes&&this.setAttributes({html:a,element:s,intent:n,linkService:i});const o=n!=="richText",l=e.div;if(l.append(a),e.viewport){const h=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=h}o&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(s.children.length===0){if(s.value){const h=document.createTextNode(s.value);a.append(h),o&&_t.shouldBuildText(s.name)&&c.push(h)}return{textDivs:c}}const d=[[s,-1,a]];for(;d.length>0;){const[h,m,p]=d.at(-1);if(m+1===h.children.length){d.pop();continue}const g=h.children[++d.at(-1)[1]];if(g===null)continue;const{name:b}=g;if(b==="#text"){const y=document.createTextNode(g.value);c.push(y),p.append(y);continue}const v=g?.attributes?.xmlns?document.createElementNS(g.attributes.xmlns,b):document.createElement(b);if(p.append(v),g.attributes&&this.setAttributes({html:v,element:g,storage:t,intent:n,linkService:i}),g.children?.length>0)d.push([g,-1,v]);else if(g.value){const y=document.createTextNode(g.value);o&&_t.shouldBuildText(b)&&c.push(y),v.append(y)}}for(const h of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))h.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Lt=1e3,lr=9,tt=new WeakSet;function Ge(r){return{width:r[2]-r[0],height:r[3]-r[1]}}class cr{static create(e){switch(e.data.annotationType){case ne.LINK:return new Ws(e);case ne.TEXT:return new dr(e);case ne.WIDGET:switch(e.data.fieldType){case"Tx":return new ur(e);case"Btn":return e.data.radioButton?new Vs(e):e.data.checkBox?new mr(e):new pr(e);case"Ch":return new gr(e);case"Sig":return new hr(e)}return new at(e);case ne.POPUP:return new Ai(e);case ne.FREETEXT:return new Us(e);case ne.LINE:return new br(e);case ne.SQUARE:return new yr(e);case ne.CIRCLE:return new vr(e);case ne.POLYLINE:return new Ks(e);case ne.CARET:return new Ar(e);case ne.INK:return new Bi(e);case ne.POLYGON:return new xr(e);case ne.HIGHLIGHT:return new $s(e);case ne.UNDERLINE:return new wr(e);case ne.SQUIGGLY:return new Sr(e);case ne.STRIKEOUT:return new Er(e);case ne.STAMP:return new Xs(e);case ne.FILEATTACHMENT:return new kr(e);default:return new te(e)}}}class te{#e=null;#t=!1;#i=null;constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:s=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:i}){return!!(e?.str||t?.str||i?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return te._hasPopupData(this.data)}updateEdited(e){if(!this.container)return;this.#e||={rect:this.data.rect.slice(0)};const{rect:t}=e;t&&this.#s(t),this.#i?.popup.updateEdited(e)}resetEdited(){this.#e&&(this.#s(this.#e.rect),this.#i?.popup.resetEdited(),this.#e=null)}#s(e){const{container:{style:t},data:{rect:i,rotation:s},parent:{viewport:{rawDims:{pageWidth:n,pageHeight:a,pageX:o,pageY:l}}}}=this;i?.splice(0,4,...e);const{width:c,height:d}=Ge(e);t.left=`${100*(e[0]-o)/n}%`,t.top=`${100*(a-e[3]+l)/a}%`,s===0?(t.width=`${100*c/n}%`,t.height=`${100*d/a}%`):this.setRotation(s)}_createContainer(e){const{data:t,parent:{page:i,viewport:s}}=this,n=document.createElement("section");n.setAttribute("data-annotation-id",t.id),this instanceof at||(n.tabIndex=Lt);const{style:a}=n;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(n.title=t.alternativeText),t.noRotate&&n.classList.add("norotate"),!t.rect||this instanceof Ai){const{rotation:b}=t;return!t.hasOwnCanvas&&b!==0&&this.setRotation(b,n),n}const{width:o,height:l}=Ge(t.rect);if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const b=t.borderStyle.horizontalCornerRadius,v=t.borderStyle.verticalCornerRadius;if(b>0||v>0){const x=`calc(${b}px * var(--scale-factor)) / calc(${v}px * var(--scale-factor))`;a.borderRadius=x}else if(this instanceof Vs){const x=`calc(${o}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;a.borderRadius=x}switch(t.borderStyle.style){case yt.SOLID:a.borderStyle="solid";break;case yt.DASHED:a.borderStyle="dashed";break;case yt.BEVELED:B("Unimplemented border style: beveled");break;case yt.INSET:B("Unimplemented border style: inset");break;case yt.UNDERLINE:a.borderBottomStyle="solid";break}const y=t.borderColor||null;y?(this.#t=!0,a.borderColor=P.makeHexColor(y[0]|0,y[1]|0,y[2]|0)):a.borderWidth=0}const c=P.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:d,pageHeight:h,pageX:m,pageY:p}=s.rawDims;a.left=`${100*(c[0]-m)/d}%`,a.top=`${100*(c[1]-p)/h}%`;const{rotation:g}=t;return t.hasOwnCanvas||g===0?(a.width=`${100*o/d}%`,a.height=`${100*l/h}%`):this.setRotation(g,n),n}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:s}=this.parent.viewport.rawDims,{width:n,height:a}=Ge(this.data.rect);let o,l;e%180===0?(o=100*n/i,l=100*a/s):(o=100*a/i,l=100*n/s),t.style.width=`${o}%`,t.style.height=`${l}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,i,s)=>{const n=s.detail[t],a=n[0],o=n.slice(1);s.target.style[i]=rs[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[i]:rs[`${a}_rgb`](o)})};return G(this,"_commonActions",{display:t=>{const{display:i}=t.detail,s=i%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:i===1||i===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:i}=t.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const i=t.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const s of Object.keys(t.detail))(e[s]||i[s])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[s,n]of Object.entries(t)){const a=i[s];if(a){const o={detail:{[s]:n},target:e};a(o),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,i,s,n]=this.data.rect.map(b=>Math.fround(b));if(e.length===8){const[b,v,y,x]=e.subarray(2,6);if(s===b&&n===v&&t===y&&i===x)return}const{style:a}=this.container;let o;if(this.#t){const{borderColor:b,borderWidth:v}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${b}" stroke-width="${v}">`],this.container.classList.add("hasBorder")}const l=s-t,c=n-i,{svgFactory:d}=this,h=d.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0);const m=d.createElement("defs");h.append(m);const p=d.createElement("clipPath"),g=`clippath_${this.data.id}`;p.setAttribute("id",g),p.setAttribute("clipPathUnits","objectBoundingBox"),m.append(p);for(let b=2,v=e.length;b<v;b+=8){const y=e[b],x=e[b+1],w=e[b+2],A=e[b+3],S=d.createElement("rect"),E=(w-t)/l,k=(n-x)/c,_=(y-w)/l,T=(x-A)/c;S.setAttribute("x",E),S.setAttribute("y",k),S.setAttribute("width",_),S.setAttribute("height",T),p.append(S),o?.push(`<rect vector-effect="non-scaling-stroke" x="${E}" y="${k}" width="${_}" height="${T}"/>`)}this.#t&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(h),this.container.style.clipPath=`url(#${g})`}_createPopup(){const{data:e}=this,t=this.#i=new Ai({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(t.render())}render(){X("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const i=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:n,id:a,exportValues:o}of s){if(n===-1||a===t)continue;const l=typeof o=="string"?o:null,c=document.querySelector(`[data-element-id="${a}"]`);if(c&&!tt.has(c)){B(`_getElementsByName - element not allowed: ${a}`);continue}i.push({id:a,exportValue:l,domElement:c})}return i}for(const s of document.getElementsByName(e)){const{exportValue:n}=s,a=s.getAttribute("data-element-id");a!==t&&tt.has(s)&&i.push({id:a,exportValue:n,domElement:s})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}}class Ws extends te{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let s=!1;return e.url?(t.addLinkAttributes(i,e.url,e.newWindow),s=!0):e.action?(this._bindNamedAction(i,e.action),s=!0):e.attachment?(this.#t(i,e.attachment,e.attachmentDest),s=!0):e.setOCGState?(this.#i(i,e.setOCGState),s=!0):e.dest?(this._bindLink(i,e.dest),s=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),s=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(i,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(i),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e()}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),this.#e()}#t(e,t,i=null){e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,i),!1),this.#e()}#i(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(t.actions)){const n=i.get(s);n&&(e[n]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:s}}),!1))}e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){B('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(e.onclick=()=>!1);return}e.onclick=()=>{i?.();const{fields:s,refs:n,include:a}=t,o=[];if(s.length!==0||n.length!==0){const d=new Set(n);for(const h of s){const m=this._fieldObjects[h]||[];for(const{id:p}of m)d.add(p)}for(const h of Object.values(this._fieldObjects))for(const m of h)d.has(m.id)===a&&o.push(m)}else for(const d of Object.values(this._fieldObjects))o.push(...d);const l=this.annotationStorage,c=[];for(const d of o){const{id:h}=d;switch(c.push(h),d.type){case"text":{const p=d.defaultValue||"";l.setValue(h,{value:p});break}case"checkbox":case"radiobutton":{const p=d.defaultValue===d.exportValues;l.setValue(h,{value:p});break}case"combobox":case"listbox":{const p=d.defaultValue||"";l.setValue(h,{value:p});break}default:continue}const m=document.querySelector(`[data-element-id="${h}"]`);if(m){if(!tt.has(m)){B(`_bindResetFormAction - element not allowed: ${h}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}}),!1}}}class dr extends te{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class at extends te{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return xe.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,s,n){i.includes("mouse")?e.addEventListener(i,a=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:n(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(i,a=>{if(i==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(i==="focus"){if(t.focused)return;t.focused=!0}n&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:n(a)}})})}_setEventListeners(e,t,i,s){for(const[n,a]of i)(a==="Action"||this.data.actions?.[a])&&((a==="Focus"||a==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,n,a,s),a==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):a==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":P.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||lr,n=e.style;let a;const o=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-o),d=Math.round(c/(ni*s))||1,h=c/d;a=Math.min(s,l(h/ni))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(s,l(c/ni))}n.fontSize=`calc(${a}px * var(--scale-factor))`,n.color=P.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(n.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class ur extends at{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,i,s){const n=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=i),n.setValue(a.id,{[s]:i})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const s=e.getValue(t,{value:this.data.fieldValue});let n=s.value||"";const a=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;a&&n.length>a&&(n=n.slice(0,a));let o=s.formattedValue||this.data.textContent?.join(`
`)||null;o&&this.data.comb&&(o=o.replaceAll(/\s+/g,""));const l={userValue:n,formattedValue:o,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=o??n,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",o??n),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),tt.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=Lt,this._setRequired(i,this.data.required),a&&(i.maxLength=a),i.addEventListener("input",d=>{e.setValue(t,{value:d.target.value}),this.setPropertyOnSiblings(i,"value",d.target.value,"value"),l.formattedValue=null}),i.addEventListener("resetform",d=>{const h=this.data.defaultFieldValue??"";i.value=l.userValue=h,l.formattedValue=null});let c=d=>{const{formattedValue:h}=l;h!=null&&(d.target.value=h),d.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",h=>{if(l.focused)return;const{target:m}=h;l.userValue&&(m.value=l.userValue),l.lastCommittedValue=m.value,l.commitKey=1,this.data.actions?.Focus||(l.focused=!0)}),i.addEventListener("updatefromsandbox",h=>{this.showElementAndHideCanvas(h.target);const m={value(p){l.userValue=p.detail.value??"",e.setValue(t,{value:l.userValue.toString()}),p.target.value=l.userValue},formattedValue(p){const{formattedValue:g}=p.detail;l.formattedValue=g,g!=null&&p.target!==document.activeElement&&(p.target.value=g),e.setValue(t,{formattedValue:g})},selRange(p){p.target.setSelectionRange(...p.detail.selRange)},charLimit:p=>{const{charLimit:g}=p.detail,{target:b}=p;if(g===0){b.removeAttribute("maxLength");return}b.setAttribute("maxLength",g);let v=l.userValue;!v||v.length<=g||(v=v.slice(0,g),b.value=l.userValue=v,e.setValue(t,{value:v}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:1,selStart:b.selectionStart,selEnd:b.selectionEnd}}))}};this._dispatchEventFromSandbox(m,h)}),i.addEventListener("keydown",h=>{l.commitKey=1;let m=-1;if(h.key==="Escape"?m=0:h.key==="Enter"&&!this.data.multiLine?m=2:h.key==="Tab"&&(l.commitKey=3),m===-1)return;const{value:p}=h.target;l.lastCommittedValue!==p&&(l.lastCommittedValue=p,l.userValue=p,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:p,willCommit:!0,commitKey:m,selStart:h.target.selectionStart,selEnd:h.target.selectionEnd}}))});const d=c;c=null,i.addEventListener("blur",h=>{if(!l.focused||!h.relatedTarget)return;this.data.actions?.Blur||(l.focused=!1);const{value:m}=h.target;l.userValue=m,l.lastCommittedValue!==m&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:m,willCommit:!0,commitKey:l.commitKey,selStart:h.target.selectionStart,selEnd:h.target.selectionEnd}}),d(h)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",h=>{l.lastCommittedValue=null;const{data:m,target:p}=h,{value:g,selectionStart:b,selectionEnd:v}=p;let y=b,x=v;switch(h.inputType){case"deleteWordBackward":{const w=g.substring(0,b).match(/\w*[^\w]*$/);w&&(y-=w[0].length);break}case"deleteWordForward":{const w=g.substring(b).match(/^[^\w]*\w*/);w&&(x+=w[0].length);break}case"deleteContentBackward":b===v&&(y-=1);break;case"deleteContentForward":b===v&&(x+=1);break}h.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:g,change:m||"",willCommit:!1,selStart:y,selEnd:x}})}),this._setEventListeners(i,l,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.value)}if(c&&i.addEventListener("blur",c),this.data.comb){const h=(this.data.rect[2]-this.data.rect[0])/a;i.classList.add("comb"),i.style.letterSpacing=`calc(${h}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class hr extends at{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class mr extends at{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let s=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(i,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const n=document.createElement("input");return tt.add(n),n.setAttribute("data-element-id",i),n.disabled=t.readOnly,this._setRequired(n,this.data.required),n.type="checkbox",n.name=t.fieldName,s&&n.setAttribute("checked",!0),n.setAttribute("exportValue",t.exportValue),n.tabIndex=Lt,n.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const c of this._getElementsByName(o,i)){const d=l&&c.exportValue===t.exportValue;c.domElement&&(c.domElement.checked=d),e.setValue(c.id,{value:d})}e.setValue(i,{value:l})}),n.addEventListener("resetform",a=>{const o=t.defaultFieldValue||"Off";a.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(n.addEventListener("updatefromsandbox",a=>{const o={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(i,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(n,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Vs extends at{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,i=t.id;let s=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(i,{value:s})),s)for(const a of this._getElementsByName(t.fieldName,i))e.setValue(a.id,{value:!1});const n=document.createElement("input");if(tt.add(n),n.setAttribute("data-element-id",i),n.disabled=t.readOnly,this._setRequired(n,this.data.required),n.type="radio",n.name=t.fieldName,s&&n.setAttribute("checked",!0),n.tabIndex=Lt,n.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const c of this._getElementsByName(o,i))e.setValue(c.id,{value:!1});e.setValue(i,{value:l})}),n.addEventListener("resetform",a=>{const o=t.defaultFieldValue;a.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;n.addEventListener("updatefromsandbox",o=>{const l={value:c=>{const d=a===c.detail.value;for(const h of this._getElementsByName(c.target.name)){const m=d&&h.id===i;h.domElement&&(h.domElement.checked=m),e.setValue(h.id,{value:m})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(n,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class pr extends Ws{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class gr extends at{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");tt.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=Lt;let n=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",d=>{const h=this.data.defaultFieldValue;for(const m of s.options)m.selected=m.value===h});for(const d of this.data.options){const h=document.createElement("option");h.textContent=d.displayValue,h.value=d.exportValue,i.value.includes(d.exportValue)&&(h.setAttribute("selected",!0),n=!1),s.append(h)}let a=null;if(n){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),s.prepend(d),a=()=>{d.remove(),s.removeEventListener("input",a),a=null},s.addEventListener("input",a)}const o=d=>{const h=d?"value":"textContent",{options:m,multiple:p}=s;return p?Array.prototype.filter.call(m,g=>g.selected).map(g=>g[h]):m.selectedIndex===-1?null:m[m.selectedIndex][h]};let l=o(!1);const c=d=>{const h=d.target.options;return Array.prototype.map.call(h,m=>({displayValue:m.textContent,exportValue:m.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",d=>{const h={value(m){a?.();const p=m.detail.value,g=new Set(Array.isArray(p)?p:[p]);for(const b of s.options)b.selected=g.has(b.value);e.setValue(t,{value:o(!0)}),l=o(!1)},multipleSelection(m){s.multiple=!0},remove(m){const p=s.options,g=m.detail.remove;p[g].selected=!1,s.remove(g),p.length>0&&Array.prototype.findIndex.call(p,v=>v.selected)===-1&&(p[0].selected=!0),e.setValue(t,{value:o(!0),items:c(m)}),l=o(!1)},clear(m){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),l=o(!1)},insert(m){const{index:p,displayValue:g,exportValue:b}=m.detail.insert,v=s.children[p],y=document.createElement("option");y.textContent=g,y.value=b,v?v.before(y):s.append(y),e.setValue(t,{value:o(!0),items:c(m)}),l=o(!1)},items(m){const{items:p}=m.detail;for(;s.length!==0;)s.remove(0);for(const g of p){const{displayValue:b,exportValue:v}=g,y=document.createElement("option");y.textContent=b,y.value=v,s.append(y)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:o(!0),items:c(m)}),l=o(!1)},indices(m){const p=new Set(m.detail.indices);for(const g of m.target.options)g.selected=p.has(g.index);e.setValue(t,{value:o(!0)}),l=o(!1)},editable(m){m.target.disabled=!m.detail.editable}};this._dispatchEventFromSandbox(h,d)}),s.addEventListener("input",d=>{const h=o(!0),m=o(!1);e.setValue(t,{value:h}),d.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:m,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):s.addEventListener("input",function(d){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Ai extends te{constructor(e){const{data:t,elements:i}=e;super(e,{isRenderable:te._hasPopupData(t)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new fr({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",t.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(i=>`${_i}${i}`).join(",")),this.container}}class fr{#e=this.#N.bind(this);#t=this.#C.bind(this);#i=this.#k.bind(this);#s=this.#A.bind(this);#a=null;#n=null;#l=null;#c=null;#d=null;#o=null;#u=null;#r=!1;#h=null;#p=null;#m=null;#b=null;#f=null;#g=null;#y=!1;constructor({container:e,color:t,elements:i,titleObj:s,modificationDate:n,contentsObj:a,richText:o,parent:l,rect:c,parentRect:d,open:h}){this.#n=e,this.#f=s,this.#l=a,this.#b=o,this.#o=l,this.#a=t,this.#m=c,this.#u=d,this.#d=i,this.#c=ks.toDateObject(n),this.trigger=i.flatMap(m=>m.getElementsToTriggerPopup());for(const m of this.trigger)m.addEventListener("click",this.#s),m.addEventListener("mouseenter",this.#i),m.addEventListener("mouseleave",this.#t),m.classList.add("popupTriggerArea");for(const m of i)m.container?.addEventListener("keydown",this.#e);this.#n.hidden=!0,h&&this.#A()}render(){if(this.#h)return;const e=this.#h=document.createElement("div");if(e.className="popup",this.#a){const n=e.style.outlineColor=P.makeHexColor(...this.#a);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${n} 30%, white)`:e.style.backgroundColor=P.makeHexColor(...this.#a.map(o=>Math.floor(.7*(255-o)+o)))}const t=document.createElement("span");t.className="header";const i=document.createElement("h1");if(t.append(i),{dir:i.dir,str:i.textContent}=this.#f,e.append(t),this.#c){const n=document.createElement("span");n.classList.add("popupDate"),n.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),n.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),t.append(n)}const s=this.#x;if(s)Gs.render({xfaHtml:s,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const n=this._formatContents(this.#l);e.append(n)}this.#n.append(e)}get#x(){const e=this.#b,t=this.#l;return e?.str&&(!t?.str||t.str===e.str)&&this.#b.html||null}get#_(){return this.#x?.attributes?.style?.fontSize||0}get#S(){return this.#x?.attributes?.style?.color||null}#E(e){const t=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:this.#S,fontSize:this.#_?`calc(${this.#_}px * var(--scale-factor))`:""}};for(const n of e.split(`
`))t.push({name:"span",value:n,attributes:s});return i}_formatContents({str:e,dir:t}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=t;const s=e.split(/(?:\r\n?|\n)/);for(let n=0,a=s.length;n<a;++n){const o=s[n];i.append(document.createTextNode(o)),n<a-1&&i.append(document.createElement("br"))}return i}#N(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#r)&&this.#A()}updateEdited({rect:e,popupContent:t}){this.#g||={contentsObj:this.#l,richText:this.#b},e&&(this.#p=null),t&&(this.#b=this.#E(t),this.#l=null),this.#h?.remove(),this.#h=null}resetEdited(){this.#g&&({contentsObj:this.#l,richText:this.#b}=this.#g,this.#g=null,this.#h?.remove(),this.#h=null,this.#p=null)}#T(){if(this.#p!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:s,pageY:n}}}=this.#o;let a=!!this.#u,o=a?this.#u:this.#m;for(const g of this.#d)if(!o||P.intersect(g.data.rect,o)!==null){o=g.data.rect,a=!0;break}const l=P.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),d=a?o[2]-o[0]+5:0,h=l[0]+d,m=l[1];this.#p=[100*(h-s)/t,100*(m-n)/i];const{style:p}=this.#n;p.left=`${this.#p[0]}%`,p.top=`${this.#p[1]}%`}#A(){this.#r=!this.#r,this.#r?(this.#k(),this.#n.addEventListener("click",this.#s),this.#n.addEventListener("keydown",this.#e)):(this.#C(),this.#n.removeEventListener("click",this.#s),this.#n.removeEventListener("keydown",this.#e))}#k(){this.#h||this.render(),this.isVisible?this.#r&&this.#n.classList.add("focused"):(this.#T(),this.#n.hidden=!1,this.#n.style.zIndex=parseInt(this.#n.style.zIndex)+1e3)}#C(){this.#n.classList.remove("focused"),!(this.#r||!this.isVisible)&&(this.#n.hidden=!0,this.#n.style.zIndex=parseInt(this.#n.style.zIndex)-1e3)}forceHide(){this.#y=this.isVisible,this.#y&&(this.#n.hidden=!0)}maybeShow(){this.#y&&(this.#h||this.#k(),this.#y=!1,this.#n.hidden=!1)}get isVisible(){return this.#n.hidden===!1}}class Us extends te{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=q.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class br extends te{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:t,height:i}=Ge(e.rect),s=this.svgFactory.create(t,i,!0),n=this.#e=this.svgFactory.createElement("svg:line");return n.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),n.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),n.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),n.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),n.setAttribute("stroke-width",e.borderStyle.width||1),n.setAttribute("stroke","transparent"),n.setAttribute("fill","transparent"),s.append(n),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class yr extends te{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:t,height:i}=Ge(e.rect),s=this.svgFactory.create(t,i,!0),n=e.borderStyle.width,a=this.#e=this.svgFactory.createElement("svg:rect");return a.setAttribute("x",n/2),a.setAttribute("y",n/2),a.setAttribute("width",t-n),a.setAttribute("height",i-n),a.setAttribute("stroke-width",n||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class vr extends te{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:t,height:i}=Ge(e.rect),s=this.svgFactory.create(t,i,!0),n=e.borderStyle.width,a=this.#e=this.svgFactory.createElement("svg:ellipse");return a.setAttribute("cx",t/2),a.setAttribute("cy",i/2),a.setAttribute("rx",t/2-n/2),a.setAttribute("ry",i/2-n/2),a.setAttribute("stroke-width",n||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Ks extends te{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:i,popupRef:s}}=this;if(!t)return this.container;const{width:n,height:a}=Ge(e),o=this.svgFactory.create(n,a,!0);let l=[];for(let d=0,h=t.length;d<h;d+=2){const m=t[d]-e[0],p=e[3]-t[d+1];l.push(`${m},${p}`)}l=l.join(" ");const c=this.#e=this.svgFactory.createElement(this.svgElementName);return c.setAttribute("points",l),c.setAttribute("stroke-width",i.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),o.append(c),this.container.append(o),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class xr extends Ks{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Ar extends te{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Bi extends te{#e=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?q.HIGHLIGHT:q.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,inkLists:t,borderStyle:i,popupRef:s}}=this,{width:n,height:a}=Ge(e),o=this.svgFactory.create(n,a,!0);for(const l of t){let c=[];for(let h=0,m=l.length;h<m;h+=2){const p=l[h]-e[0],g=e[3]-l[h+1];c.push(`${p},${g}`)}c=c.join(" ");const d=this.svgFactory.createElement(this.svgElementName);this.#e.push(d),d.setAttribute("points",c),d.setAttribute("stroke-width",i.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),o.append(d)}return!s&&this.hasPopupData&&this._createPopup(),this.container.append(o),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class $s extends te{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=q.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class wr extends te{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Sr extends te{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Er extends te{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Xs extends te{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=q.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class kr extends te{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let i;t.hasAppearance||t.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#t.bind(this)),this.#e=i;const{isMac:s}=xe.platform;return e.addEventListener("keydown",n=>{n.key==="Enter"&&(s?n.metaKey:n.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),e.append(i),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let _r=class{#e=null;#t=null;#i=new Map;#s=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:s,page:n,viewport:a,structTreeLayer:o}){this.div=e,this.#e=t,this.#t=i,this.#s=o||null,this.page=n,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return this.#i.size>0}async#a(e,t){const i=e.firstChild||e,s=i.id=`${_i}${t}`,n=await this.#s?.getAriaAttributes(s);if(n)for(const[a,o]of n)i.setAttribute(a,o);this.div.append(e),this.#e?.moveElementInDOM(this.div,e,i,!1)}async render(e){const{annotations:t}=e,i=this.div;et(i,this.viewport);const s=new Map,n={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new zi,annotationStorage:e.annotationStorage||new Ii,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const o=a.annotationType===ne.POPUP;if(o){const d=s.get(a.id);if(!d)continue;n.elements=d}else{const{width:d,height:h}=Ge(a.rect);if(d<=0||h<=0)continue}n.data=a;const l=cr.create(n);if(!l.isRenderable)continue;if(!o&&a.popupRef){const d=s.get(a.popupRef);d?d.push(l):s.set(a.popupRef,[l])}const c=l.render();a.hidden&&(c.style.visibility="hidden"),await this.#a(c,a.id),l._isEditable&&(this.#i.set(l.data.id,l),this._annotationEditorUIManager?.renderAnnotationElement(l))}this.#n()}update({viewport:e}){const t=this.div;this.viewport=e,et(t,{rotation:e.rotation}),this.#n(),t.hidden=!1}#n(){if(!this.#t)return;const e=this.div;for(const[t,i]of this.#t){const s=e.querySelector(`[data-annotation-id="${t}"]`);if(!s)continue;i.className="annotationContent";const{firstChild:n}=s;n?n.nodeName==="CANVAS"?n.replaceWith(i):n.classList.contains("annotationContent")?n.after(i):n.before(i):s.append(i)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(e){return this.#i.get(e)}};const zt=/\r\n?|\n/g;class ae extends D{#e;#t="";#i=`${this.id}-editor`;#s=null;#a;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=ae.prototype,t=n=>n.isEmpty(),i=Ue.TRANSLATE_SMALL,s=Ue.TRANSLATE_BIG;return G(this,"_keyboardManager",new Ct([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,s],checker:t}]]))}static _type="freetext";static _editorType=q.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.#e=e.color||ae._defaultColor||D._defaultLineColor,this.#a=e.fontSize||ae._defaultFontSize}static initialize(e,t){D.initialize(e,t);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case N.FREETEXT_SIZE:ae._defaultFontSize=t;break;case N.FREETEXT_COLOR:ae._defaultColor=t;break}}updateParams(e,t){switch(e){case N.FREETEXT_SIZE:this.#n(t);break;case N.FREETEXT_COLOR:this.#l(t);break}}static get defaultPropertiesToUpdate(){return[[N.FREETEXT_SIZE,ae._defaultFontSize],[N.FREETEXT_COLOR,ae._defaultColor||D._defaultLineColor]]}get propertiesToUpdate(){return[[N.FREETEXT_SIZE,this.#a],[N.FREETEXT_COLOR,this.#e]]}#n(e){const t=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--scale-factor))`,this.translate(0,-(s-this.#a)*this.parentScale),this.#a=s,this.#d()},i=this.#a;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:N.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#l(e){const t=s=>{this.#e=this.editorDiv.style.color=s},i=this.#e;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:N.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-ae._internalPadding*e,-(ae._internalPadding+this.#a)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(q.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#s=new AbortController;const e=this._uiManager.combinedSignal(this.#s);this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#i),this._isDraggable=!0,this.#s?.abort(),this.#s=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#c(){const e=[];this.editorDiv.normalize();let t=null;for(const i of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(e.push(ae.#o(i)),t=i);return e.join(`
`)}#d(){const[e,t]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:s,div:n}=this,a=n.style.display,o=n.classList.contains("hidden");n.classList.remove("hidden"),n.style.display="hidden",s.div.append(this.div),i=n.getBoundingClientRect(),n.remove(),n.style.display=a,n.classList.toggle("hidden",o)}this.rotation%180===this.parentRotation%180?(this.width=i.width/e,this.height=i.height/t):(this.width=i.height/e,this.height=i.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#t,t=this.#t=this.#c().trimEnd();if(e===t)return;const i=s=>{if(this.#t=s,!s){this.remove();return}this.#u(),this._uiManager.rebuild(this),this.#d()};this.addCommands({cmd:()=>{i(t)},undo:()=>{i(e)},mustExec:!1}),this.#d()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){ae._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#i),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#a}px * var(--scale-factor))`,i.color=this.#e,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Ot(this,this.div,["dblclick","keydown"]),this.width){const[s,n]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[o,l]=this.getInitialTranslation();[o,l]=this.pageTranslationToScreen(o,l);const[c,d]=this.pageDimensions,[h,m]=this.pageTranslation;let p,g;switch(this.rotation){case 0:p=e+(a[0]-h)/c,g=t+this.height-(a[1]-m)/d;break;case 90:p=e+(a[0]-h)/c,g=t-(a[1]-m)/d,[o,l]=[l,-o];break;case 180:p=e-this.width+(a[0]-h)/c,g=t-(a[1]-m)/d,[o,l]=[-o,-l];break;case 270:p=e+(a[0]-h-this.height*d)/c,g=t+(a[1]-m-this.width*c)/d,[o,l]=[-l,o];break}this.setAt(p*s,g*n,o,l)}else this.setAt(e*s,t*n,this.width*s,this.height*n);this.#u(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#o(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(zt,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:i}=t;if(i.length===1&&i[0]==="text/plain")return;e.preventDefault();const s=ae.#h(t.getData("text")||"").replaceAll(zt,`
`);if(!s)return;const n=window.getSelection();if(!n.rangeCount)return;this.editorDiv.normalize(),n.deleteFromDocument();const a=n.getRangeAt(0);if(!s.includes(`
`)){a.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),n.collapseToStart();return}const{startContainer:o,startOffset:l}=a,c=[],d=[];if(o.nodeType===Node.TEXT_NODE){const p=o.parentElement;if(d.push(o.nodeValue.slice(l).replaceAll(zt,"")),p!==this.editorDiv){let g=c;for(const b of this.editorDiv.childNodes){if(b===p){g=d;continue}g.push(ae.#o(b))}}c.push(o.nodeValue.slice(0,l).replaceAll(zt,""))}else if(o===this.editorDiv){let p=c,g=0;for(const b of this.editorDiv.childNodes)g++===l&&(p=d),p.push(ae.#o(b))}this.#t=`${c.join(`
`)}${s}${d.join(`
`)}`,this.#u();const h=new Range;let m=c.reduce((p,g)=>p+g.length,0);for(const{firstChild:p}of this.editorDiv.childNodes)if(p.nodeType===Node.TEXT_NODE){const g=p.nodeValue.length;if(m<=g){h.setStart(p,m),h.setEnd(p,m);break}m-=g}n.removeAllRanges(),n.addRange(h)}#u(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const e of this.#t.split(`
`)){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#r(){return this.#t.replaceAll(" "," ")}static#h(e){return e.replaceAll(" "," ")}get contentDiv(){return this.editorDiv}static async deserialize(e,t,i){let s=null;if(e instanceof Us){const{data:{defaultAppearanceData:{fontSize:a,fontColor:o},rect:l,rotation:c,id:d,popupRef:h},textContent:m,textPosition:p,parent:{page:{pageNumber:g}}}=e;if(!m||m.length===0)return null;s=e={annotationType:q.FREETEXT,color:Array.from(o),fontSize:a,value:m.join(`
`),position:p,pageIndex:g-1,rect:l.slice(0),rotation:c,id:d,deleted:!1,popupRef:h}}const n=await super.deserialize(e,t,i);return n.#a=e.fontSize,n.#e=P.makeHexColor(...e.color),n.#t=ae.#h(e.value),n.annotationElementId=e.id||null,n._initialData=s,n}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=ae._internalPadding*this.parentScale,i=this.getRect(t,t),s=D._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#e),n={annotationType:q.FREETEXT,color:s,fontSize:this.#a,value:this.#r(),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?n:this.annotationElementId&&!this.#p(n)?null:(n.id=this.annotationElementId,n)}#p(e){const{value:t,fontSize:i,color:s,pageIndex:n}=this._initialData;return this._hasBeenMoved||e.value!==t||e.fontSize!==i||e.color.some((a,o)=>a!==s[o])||e.pageIndex!==n}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(this.deleted)return t;const{style:i}=t;i.fontSize=`calc(${this.#a}px * var(--scale-factor))`,i.color=this.#e,t.replaceChildren();for(const n of this.#t.split(`
`)){const a=document.createElement("div");a.append(n?document.createTextNode(n):document.createElement("br")),t.append(a)}const s=ae._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(s,s),popupContent:this.#t}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class Js{toSVGPath(){X("Abstract method `toSVGPath` must be implemented.")}get box(){X("Abstract getter `box` must be implemented.")}serialize(e,t){X("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){X("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){X("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}class Ze{#e;#t=[];#i;#s;#a=[];#n=new Float64Array(18);#l;#c;#d;#o;#u;#r;#h=[];static#p=8;static#m=2;static#b=Ze.#p+Ze.#m;constructor({x:e,y:t},i,s,n,a,o=0){this.#e=i,this.#r=n*s,this.#s=a,this.#n.set([NaN,NaN,NaN,NaN,e,t],6),this.#i=o,this.#o=Ze.#p*s,this.#d=Ze.#b*s,this.#u=s,this.#h.push(e,t)}isEmpty(){return isNaN(this.#n[8])}#f(){const e=this.#n.subarray(4,6),t=this.#n.subarray(16,18),[i,s,n,a]=this.#e;return[(this.#l+(e[0]-t[0])/2-i)/n,(this.#c+(e[1]-t[1])/2-s)/a,(this.#l+(t[0]-e[0])/2-i)/n,(this.#c+(t[1]-e[1])/2-s)/a]}add({x:e,y:t}){this.#l=e,this.#c=t;const[i,s,n,a]=this.#e;let[o,l,c,d]=this.#n.subarray(8,12);const h=e-c,m=t-d,p=Math.hypot(h,m);if(p<this.#d)return!1;const g=p-this.#o,b=g/p,v=b*h,y=b*m;let x=o,w=l;o=c,l=d,c+=v,d+=y,this.#h?.push(e,t);const A=-y/g,S=v/g,E=A*this.#r,k=S*this.#r;return this.#n.set(this.#n.subarray(2,8),0),this.#n.set([c+E,d+k],4),this.#n.set(this.#n.subarray(14,18),12),this.#n.set([c-E,d-k],16),isNaN(this.#n[6])?(this.#a.length===0&&(this.#n.set([o+E,l+k],2),this.#a.push(NaN,NaN,NaN,NaN,(o+E-i)/n,(l+k-s)/a),this.#n.set([o-E,l-k],14),this.#t.push(NaN,NaN,NaN,NaN,(o-E-i)/n,(l-k-s)/a)),this.#n.set([x,w,o,l,c,d],6),!this.isEmpty()):(this.#n.set([x,w,o,l,c,d],6),Math.abs(Math.atan2(w-l,x-o)-Math.atan2(y,v))<Math.PI/2?([o,l,c,d]=this.#n.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((o+c)/2-i)/n,((l+d)/2-s)/a),[o,l,x,w]=this.#n.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((x+o)/2-i)/n,((w+l)/2-s)/a),!0):([x,w,o,l,c,d]=this.#n.subarray(0,6),this.#a.push(((x+5*o)/6-i)/n,((w+5*l)/6-s)/a,((5*o+c)/6-i)/n,((5*l+d)/6-s)/a,((o+c)/2-i)/n,((l+d)/2-s)/a),[c,d,o,l,x,w]=this.#n.subarray(12,18),this.#t.push(((x+5*o)/6-i)/n,((w+5*l)/6-s)/a,((5*o+c)/6-i)/n,((5*l+d)/6-s)/a,((o+c)/2-i)/n,((l+d)/2-s)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#a,t=this.#t;if(isNaN(this.#n[6])&&!this.isEmpty())return this.#g();const i=[];i.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?i.push(`L${e[s+4]} ${e[s+5]}`):i.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);this.#x(i);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?i.push(`L${t[s+4]} ${t[s+5]}`):i.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);return this.#y(i),i.join(" ")}#g(){const[e,t,i,s]=this.#e,[n,a,o,l]=this.#f();return`M${(this.#n[2]-e)/i} ${(this.#n[3]-t)/s} L${(this.#n[4]-e)/i} ${(this.#n[5]-t)/s} L${n} ${a} L${o} ${l} L${(this.#n[16]-e)/i} ${(this.#n[17]-t)/s} L${(this.#n[14]-e)/i} ${(this.#n[15]-t)/s} Z`}#y(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#x(e){const[t,i,s,n]=this.#e,a=this.#n.subarray(4,6),o=this.#n.subarray(16,18),[l,c,d,h]=this.#f();e.push(`L${(a[0]-t)/s} ${(a[1]-i)/n} L${l} ${c} L${d} ${h} L${(o[0]-t)/s} ${(o[1]-i)/n}`)}newFreeDrawOutline(e,t,i,s,n,a){return new Ys(e,t,i,s,n,a)}getOutlines(){const e=this.#a,t=this.#t,i=this.#n,[s,n,a,o]=this.#e,l=new Float64Array((this.#h?.length??0)+2);for(let h=0,m=l.length-2;h<m;h+=2)l[h]=(this.#h[h]-s)/a,l[h+1]=(this.#h[h+1]-n)/o;if(l[l.length-2]=(this.#l-s)/a,l[l.length-1]=(this.#c-n)/o,isNaN(i[6])&&!this.isEmpty())return this.#_(l);const c=new Float64Array(this.#a.length+24+this.#t.length);let d=e.length;for(let h=0;h<d;h+=2){if(isNaN(e[h])){c[h]=c[h+1]=NaN;continue}c[h]=e[h],c[h+1]=e[h+1]}d=this.#E(c,d);for(let h=t.length-6;h>=6;h-=6)for(let m=0;m<6;m+=2){if(isNaN(t[h+m])){c[d]=c[d+1]=NaN,d+=2;continue}c[d]=t[h+m],c[d+1]=t[h+m+1],d+=2}return this.#S(c,d),this.newFreeDrawOutline(c,l,this.#e,this.#u,this.#i,this.#s)}#_(e){const t=this.#n,[i,s,n,a]=this.#e,[o,l,c,d]=this.#f(),h=new Float64Array(36);return h.set([NaN,NaN,NaN,NaN,(t[2]-i)/n,(t[3]-s)/a,NaN,NaN,NaN,NaN,(t[4]-i)/n,(t[5]-s)/a,NaN,NaN,NaN,NaN,o,l,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,(t[16]-i)/n,(t[17]-s)/a,NaN,NaN,NaN,NaN,(t[14]-i)/n,(t[15]-s)/a],0),this.newFreeDrawOutline(h,e,this.#e,this.#u,this.#i,this.#s)}#S(e,t){const i=this.#t;return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],t),t+=6}#E(e,t){const i=this.#n.subarray(4,6),s=this.#n.subarray(16,18),[n,a,o,l]=this.#e,[c,d,h,m]=this.#f();return e.set([NaN,NaN,NaN,NaN,(i[0]-n)/o,(i[1]-a)/l,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,h,m,NaN,NaN,NaN,NaN,(s[0]-n)/o,(s[1]-a)/l],t),t+=24}}class Ys extends Js{#e;#t=null;#i;#s;#a;#n;#l;constructor(e,t,i,s,n,a){super(),this.#l=e,this.#a=t,this.#e=i,this.#n=s,this.#i=n,this.#s=a,this.#o(a);const{x:o,y:l,width:c,height:d}=this.#t;for(let h=0,m=e.length;h<m;h+=2)e[h]=(e[h]-o)/c,e[h+1]=(e[h+1]-l)/d;for(let h=0,m=t.length;h<m;h+=2)t[h]=(t[h]-o)/c,t[h+1]=(t[h+1]-l)/d}toSVGPath(){const e=[`M${this.#l[4]} ${this.#l[5]}`];for(let t=6,i=this.#l.length;t<i;t+=6){if(isNaN(this.#l[t])){e.push(`L${this.#l[t+4]} ${this.#l[t+5]}`);continue}e.push(`C${this.#l[t]} ${this.#l[t+1]} ${this.#l[t+2]} ${this.#l[t+3]} ${this.#l[t+4]} ${this.#l[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,i,s],n){const a=i-e,o=s-t;let l,c;switch(n){case 0:l=this.#c(this.#l,e,s,a,-o),c=this.#c(this.#a,e,s,a,-o);break;case 90:l=this.#d(this.#l,e,t,a,o),c=this.#d(this.#a,e,t,a,o);break;case 180:l=this.#c(this.#l,i,t,-a,o),c=this.#c(this.#a,i,t,-a,o);break;case 270:l=this.#d(this.#l,i,s,-a,-o),c=this.#d(this.#a,i,s,-a,-o);break}return{outline:Array.from(l),points:[Array.from(c)]}}#c(e,t,i,s,n){const a=new Float64Array(e.length);for(let o=0,l=e.length;o<l;o+=2)a[o]=t+e[o]*s,a[o+1]=i+e[o+1]*n;return a}#d(e,t,i,s,n){const a=new Float64Array(e.length);for(let o=0,l=e.length;o<l;o+=2)a[o]=t+e[o+1]*s,a[o+1]=i+e[o]*n;return a}#o(e){const t=this.#l;let i=t[4],s=t[5],n=i,a=s,o=i,l=s,c=i,d=s;const h=e?Math.max:Math.min;for(let v=6,y=t.length;v<y;v+=6){if(isNaN(t[v]))n=Math.min(n,t[v+4]),a=Math.min(a,t[v+5]),o=Math.max(o,t[v+4]),l=Math.max(l,t[v+5]),d<t[v+5]?(c=t[v+4],d=t[v+5]):d===t[v+5]&&(c=h(c,t[v+4]));else{const x=P.bezierBoundingBox(i,s,...t.slice(v,v+6));n=Math.min(n,x[0]),a=Math.min(a,x[1]),o=Math.max(o,x[2]),l=Math.max(l,x[3]),d<x[3]?(c=x[2],d=x[3]):d===x[3]&&(c=h(c,x[2]))}i=t[v+4],s=t[v+5]}const m=n-this.#i,p=a-this.#i,g=o-n+2*this.#i,b=l-a+2*this.#i;this.#t={x:m,y:p,width:g,height:b,lastPoint:[c,d]}}get box(){return this.#t}newOutliner(e,t,i,s,n,a=0){return new Ze(e,t,i,s,n,a)}getNewOutline(e,t){const{x:i,y:s,width:n,height:a}=this.#t,[o,l,c,d]=this.#e,h=n*c,m=a*d,p=i*c+o,g=s*d+l,b=this.newOutliner({x:this.#a[0]*h+p,y:this.#a[1]*m+g},this.#e,this.#n,e,this.#s,t??this.#i);for(let v=2;v<this.#a.length;v+=2)b.add({x:this.#a[v]*h+p,y:this.#a[v+1]*m+g});return b.getOutlines()}get mustRemoveSelfIntersections(){return!0}}class os{#e;#t=[];#i=[];constructor(e,t=0,i=0,s=!0){let n=1/0,a=-1/0,o=1/0,l=-1/0;const c=10**-4;for(const{x:v,y,width:x,height:w}of e){const A=Math.floor((v-t)/c)*c,S=Math.ceil((v+x+t)/c)*c,E=Math.floor((y-t)/c)*c,k=Math.ceil((y+w+t)/c)*c,_=[A,E,k,!0],T=[S,E,k,!1];this.#t.push(_,T),n=Math.min(n,A),a=Math.max(a,S),o=Math.min(o,E),l=Math.max(l,k)}const d=a-n+2*i,h=l-o+2*i,m=n-i,p=o-i,g=this.#t.at(s?-1:-2),b=[g[0],g[2]];for(const v of this.#t){const[y,x,w]=v;v[0]=(y-m)/d,v[1]=(x-p)/h,v[2]=(w-p)/h}this.#e={x:m,y:p,width:d,height:h,lastPoint:b}}getOutlines(){this.#t.sort((t,i)=>t[0]-i[0]||t[1]-i[1]||t[2]-i[2]);const e=[];for(const t of this.#t)t[3]?(e.push(...this.#c(t)),this.#n(t)):(this.#l(t),e.push(...this.#c(t)));return this.#s(e)}#s(e){const t=[],i=new Set;for(const a of e){const[o,l,c]=a;t.push([o,l,a],[o,c,a])}t.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=t.length;a<o;a+=2){const l=t[a][2],c=t[a+1][2];l.push(c),c.push(l),i.add(l),i.add(c)}const s=[];let n;for(;i.size>0;){const a=i.values().next().value;let[o,l,c,d,h]=a;i.delete(a);let m=o,p=l;for(n=[o,c],s.push(n);;){let g;if(i.has(d))g=d;else if(i.has(h))g=h;else break;i.delete(g),[o,l,c,d,h]=g,m!==o&&(n.push(m,p,o,p===l?l:c),m=o),p=p===l?c:l}n.push(m,p)}return new Tr(s,this.#e)}#a(e){const t=this.#i;let i=0,s=t.length-1;for(;i<=s;){const n=i+s>>1,a=t[n][0];if(a===e)return n;a<e?i=n+1:s=n-1}return s+1}#n([,e,t]){const i=this.#a(e);this.#i.splice(i,0,[e,t])}#l([,e,t]){const i=this.#a(e);for(let s=i;s<this.#i.length;s++){const[n,a]=this.#i[s];if(n!==e)break;if(n===e&&a===t){this.#i.splice(s,1);return}}for(let s=i-1;s>=0;s--){const[n,a]=this.#i[s];if(n!==e)break;if(n===e&&a===t){this.#i.splice(s,1);return}}}#c(e){const[t,i,s]=e,n=[[t,i,s]],a=this.#a(s);for(let o=0;o<a;o++){const[l,c]=this.#i[o];for(let d=0,h=n.length;d<h;d++){const[,m,p]=n[d];if(!(c<=m||p<=l)){if(m>=l){if(p>c)n[d][1]=c;else{if(h===1)return[];n.splice(d,1),d--,h--}continue}n[d][2]=l,p>c&&n.push([t,c,p])}}}return n}}class Tr extends Js{#e;#t;constructor(e,t){super(),this.#t=e,this.#e=t}toSVGPath(){const e=[];for(const t of this.#t){let[i,s]=t;e.push(`M${i} ${s}`);for(let n=2;n<t.length;n+=2){const a=t[n],o=t[n+1];a===i?(e.push(`V${o}`),s=o):o===s&&(e.push(`H${a}`),i=a)}e.push("Z")}return e.join(" ")}serialize([e,t,i,s],n){const a=[],o=i-e,l=s-t;for(const c of this.#t){const d=new Array(c.length);for(let h=0;h<c.length;h+=2)d[h]=e+c[h]*o,d[h+1]=s-c[h+1]*l;a.push(d)}return a}get box(){return this.#e}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}class wi extends Ze{newFreeDrawOutline(e,t,i,s,n,a){return new Cr(e,t,i,s,n,a)}get classNamesForDrawing(){return["highlight","free"]}}class Cr extends Ys{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(e,t,i,s,n,a=0){return new wi(e,t,i,s,n,a)}}class Ce{#e=null;#t=null;#i;#s=null;#a=!1;#n=!1;#l=null;#c;#d=null;#o=null;#u;static#r=null;static get _keyboardManager(){return G(this,"_keyboardManager",new Ct([[["Escape","mac+Escape"],Ce.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Ce.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Ce.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Ce.prototype._moveToPrevious],[["Home","mac+Home"],Ce.prototype._moveToBeginning],[["End","mac+End"],Ce.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#n=!1,this.#u=N.HIGHLIGHT_COLOR,this.#l=e):(this.#n=!0,this.#u=N.HIGHLIGHT_DEFAULT_COLOR),this.#o=e?._uiManager||t,this.#c=this.#o._eventBus,this.#i=e?.color||this.#o?.highlightColors.values().next().value||"#FFFF98",Ce.#r||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=this.#o._signal;e.addEventListener("click",this.#b.bind(this),{signal:t}),e.addEventListener("keydown",this.#m.bind(this),{signal:t});const i=this.#t=document.createElement("span");return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=this.#i,e.append(i),e}renderMainDropdown(){const e=this.#s=this.#h();return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}#h(){const e=document.createElement("div"),t=this.#o._signal;e.addEventListener("contextmenu",Le,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,s]of this.#o.highlightColors){const n=document.createElement("button");n.tabIndex="0",n.role="option",n.setAttribute("data-color",s),n.title=i,n.setAttribute("data-l10n-id",Ce.#r[i]);const a=document.createElement("span");n.append(a),a.className="swatch",a.style.backgroundColor=s,n.setAttribute("aria-selected",s===this.#i),n.addEventListener("click",this.#p.bind(this,s),{signal:t}),e.append(n)}return e.addEventListener("keydown",this.#m.bind(this),{signal:t}),e}#p(e,t){t.stopPropagation(),this.#c.dispatch("switchannotationeditorparams",{source:this,type:this.#u,value:e})}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#b(e);return}const t=e.target.getAttribute("data-color");t&&this.#p(t,e)}_moveToNext(e){if(!this.#g){this.#b(e);return}if(e.target===this.#e){this.#s.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#s?.firstChild||e.target===this.#e){this.#g&&this._hideDropdownFromKeyboard();return}this.#g||this.#b(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#g){this.#b(e);return}this.#s.firstChild?.focus()}_moveToEnd(e){if(!this.#g){this.#b(e);return}this.#s.lastChild?.focus()}#m(e){Ce._keyboardManager.exec(this,e)}#b(e){if(this.#g){this.hideDropdown();return}if(this.#a=e.detail===0,this.#d||(this.#d=new AbortController,window.addEventListener("pointerdown",this.#f.bind(this),{signal:this.#o.combinedSignal(this.#d)})),this.#s){this.#s.classList.remove("hidden");return}const t=this.#s=this.#h();this.#e.append(t)}#f(e){this.#s?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#s?.classList.add("hidden"),this.#d?.abort(),this.#d=null}get#g(){return this.#s&&!this.#s.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#n){if(!this.#g){this.#l?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#s)return;const t=this.#o.highlightColors.values();for(const i of this.#s.children)i.setAttribute("aria-selected",t.next().value===e)}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#s?.remove(),this.#s=null}}class ee extends D{#e=null;#t=0;#i;#s=null;#a=null;#n=null;#l=null;#c=0;#d=null;#o=null;#u=null;#r=!1;#h=null;#p;#m=null;#b="";#f;#g="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=q.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=ee.prototype;return G(this,"_keyboardManager",new Ct([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||ee._defaultColor,this.#f=e.thickness||ee._defaultThickness,this.#p=e.opacity||ee._defaultOpacity,this.#i=e.boxes||null,this.#g=e.methodOfCreation||"",this.#b=e.text||"",this._isDraggable=!1,e.highlightId>-1?(this.#r=!0,this.#x(e),this.#T()):this.#i&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#l=e.focusNode,this.#c=e.focusOffset,this.#y(),this.#T(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#r?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#f,methodOfCreation:this.#g}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#y(){const e=new os(this.#i,.001);this.#o=e.getOutlines(),{x:this.x,y:this.y,width:this.width,height:this.height}=this.#o.box;const t=new os(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#n=t.getOutlines();const{lastPoint:i}=this.#n.box;this.#h=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#x({highlightOutlines:e,highlightId:t,clipPathId:i}){this.#o=e;const s=1.5;if(this.#n=e.getNewOutline(this.#f/2+s,.0025),t>=0)this.#u=t,this.#s=i,this.parent.drawLayer.finalizeLine(t,e),this.#m=this.parent.drawLayer.drawOutline(this.#n);else if(this.parent){const d=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(this.#u,e),this.parent.drawLayer.updateBox(this.#u,ee.#A(this.#o.box,(d-this.rotation+360)%360)),this.parent.drawLayer.updateLine(this.#m,this.#n),this.parent.drawLayer.updateBox(this.#m,ee.#A(this.#n.box,d))}const{x:n,y:a,width:o,height:l}=e.box;switch(this.rotation){case 0:this.x=n,this.y=a,this.width=o,this.height=l;break;case 90:{const[d,h]=this.parentDimensions;this.x=a,this.y=1-n,this.width=o*h/d,this.height=l*d/h;break}case 180:this.x=1-n,this.y=1-a,this.width=o,this.height=l;break;case 270:{const[d,h]=this.parentDimensions;this.x=1-a,this.y=n,this.width=o*h/d,this.height=l*d/h;break}}const{lastPoint:c}=this.#n.box;this.#h=[(c[0]-n)/o,(c[1]-a)/l]}static initialize(e,t){D.initialize(e,t),ee._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case N.HIGHLIGHT_DEFAULT_COLOR:ee._defaultColor=t;break;case N.HIGHLIGHT_THICKNESS:ee._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#h}updateParams(e,t){switch(e){case N.HIGHLIGHT_COLOR:this.#_(t);break;case N.HIGHLIGHT_THICKNESS:this.#S(t);break}}static get defaultPropertiesToUpdate(){return[[N.HIGHLIGHT_DEFAULT_COLOR,ee._defaultColor],[N.HIGHLIGHT_THICKNESS,ee._defaultThickness]]}get propertiesToUpdate(){return[[N.HIGHLIGHT_COLOR,this.color||ee._defaultColor],[N.HIGHLIGHT_THICKNESS,this.#f||ee._defaultThickness],[N.HIGHLIGHT_FREE,this.#r]]}#_(e){const t=(n,a)=>{this.color=n,this.parent?.drawLayer.changeColor(this.#u,n),this.#a?.updateColor(n),this.#p=a,this.parent?.drawLayer.changeOpacity(this.#u,a)},i=this.color,s=this.#p;this.addCommands({cmd:t.bind(this,e,ee._defaultOpacity),undo:t.bind(this,i,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:N.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}#S(e){const t=this.#f,i=s=>{this.#f=s,this.#E(s)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:N.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(this.#a=new Ce({editor:this}),e.addColorPicker(this.#a)),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#L())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#L())}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){this.#N(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#T(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#N():e&&(this.#T(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#E(e){if(!this.#r)return;this.#x({highlightOutlines:this.#o.getNewOutline(e/2)}),this.fixAndSetPosition();const[t,i]=this.parentDimensions;this.setDims(this.width*t,this.height*i)}#N(){this.#u===null||!this.parent||(this.parent.drawLayer.remove(this.#u),this.#u=null,this.parent.drawLayer.remove(this.#m),this.#m=null)}#T(e=this.parent){this.#u===null&&({id:this.#u,clipPathId:this.#s}=e.drawLayer.draw(this.#o,this.color,this.#p),this.#m=e.drawLayer.drawOutline(this.#n),this.#d&&(this.#d.style.clipPath=this.#s))}static#A({x:e,y:t,width:i,height:s},n){switch(n){case 90:return{x:1-t-s,y:e,width:s,height:i};case 180:return{x:1-e-i,y:1-t-s,width:i,height:s};case 270:return{x:t,y:1-e-i,width:s,height:i}}return{x:e,y:t,width:i,height:s}}rotate(e){const{drawLayer:t}=this.parent;let i;this.#r?(e=(e-this.rotation+360)%360,i=ee.#A(this.#o.box,e)):i=ee.#A(this,e),t.rotate(this.#u,e),t.rotate(this.#m,e),t.updateBox(this.#u,i),t.updateBox(this.#m,ee.#A(this.#n.box,e))}render(){if(this.div)return this.div;const e=super.render();this.#b&&(e.setAttribute("aria-label",this.#b),e.setAttribute("role","mark")),this.#r?e.classList.add("free"):this.div.addEventListener("keydown",this.#k.bind(this),{signal:this._uiManager._signal});const t=this.#d=document.createElement("div");e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#s;const[i,s]=this.parentDimensions;return this.setDims(this.width*i,this.height*s),Ot(this,this.#d,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent.drawLayer.addClass(this.#m,"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(this.#m,"hovered")}#k(e){ee._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#C(!0);break;case 1:case 3:this.#C(!1);break}}#C(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#l,this.#c)}select(){super.select(),this.#m&&(this.parent?.drawLayer.removeClass(this.#m,"hovered"),this.parent?.drawLayer.addClass(this.#m,"selected"))}unselect(){super.unselect(),this.#m&&(this.parent?.drawLayer.removeClass(this.#m,"selected"),this.#r||this.#C(!1))}get _mustFixPosition(){return!this.#r}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(this.#u,e),this.parent.drawLayer.show(this.#m,e))}#L(){return this.#r?this.rotation:0}#I(){if(this.#r)return null;const[e,t]=this.pageDimensions,[i,s]=this.pageTranslation,n=this.#i,a=new Float32Array(n.length*8);let o=0;for(const{x:l,y:c,width:d,height:h}of n){const m=l*e+i,p=(1-c-h)*t+s;a[o]=a[o+4]=m,a[o+1]=a[o+3]=p,a[o+2]=a[o+6]=m+d*e,a[o+5]=a[o+7]=p+h*t,o+=8}return a}#w(e){return this.#o.serialize(e,this.#L())}static startHighlighting(e,t,{target:i,x:s,y:n}){const{x:a,y:o,width:l,height:c}=i.getBoundingClientRect(),d=new AbortController,h=e.combinedSignal(d),m=g=>{g.preventDefault(),g.stopPropagation()},p=g=>{d.abort(),this.#R(e,g)};window.addEventListener("blur",p,{signal:h}),window.addEventListener("pointerup",p,{signal:h}),window.addEventListener("pointerdown",m,{capture:!0,passive:!1,signal:h}),window.addEventListener("contextmenu",Le,{signal:h}),i.addEventListener("pointermove",this.#v.bind(this,e),{signal:h}),this._freeHighlight=new wi({x:s,y:n},[a,o,l,c],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static#v(e,t){this._freeHighlight.add(t)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)}static#R(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,t,i){let s=null;if(e instanceof $s){const{data:{quadPoints:g,rect:b,rotation:v,id:y,color:x,opacity:w,popupRef:A},parent:{page:{pageNumber:S}}}=e;s=e={annotationType:q.HIGHLIGHT,color:Array.from(x),opacity:w,quadPoints:g,boxes:null,pageIndex:S-1,rect:b.slice(0),rotation:v,id:y,deleted:!1,popupRef:A}}else if(e instanceof Bi){const{data:{inkLists:g,rect:b,rotation:v,id:y,color:x,borderStyle:{rawWidth:w},popupRef:A},parent:{page:{pageNumber:S}}}=e;s=e={annotationType:q.HIGHLIGHT,color:Array.from(x),thickness:w,inkLists:g,boxes:null,pageIndex:S-1,rect:b.slice(0),rotation:v,id:y,deleted:!1,popupRef:A}}const{color:n,quadPoints:a,inkLists:o,opacity:l}=e,c=await super.deserialize(e,t,i);c.color=P.makeHexColor(...n),c.#p=l||1,o&&(c.#f=e.thickness),c.annotationElementId=e.id||null,c._initialData=s;const[d,h]=c.pageDimensions,[m,p]=c.pageTranslation;if(a){const g=c.#i=[];for(let b=0;b<a.length;b+=8)g.push({x:(a[b]-m)/d,y:1-(a[b+1]-p)/h,width:(a[b+2]-a[b])/d,height:(a[b+1]-a[b+5])/h});c.#y(),c.#T(),c.rotate(c.rotation)}else if(o){c.#r=!0;const g=o[0],b={x:g[0]-m,y:h-(g[1]-p)},v=new wi(b,[0,0,d,h],1,c.#f/2,!0,.001);for(let w=0,A=g.length;w<A;w+=2)b.x=g[w]-m,b.y=h-(g[w+1]-p),v.add(b);const{id:y,clipPathId:x}=t.drawLayer.draw(v,c.color,c._defaultOpacity,!0);c.#x({highlightOutlines:v.getOutlines(),highlightId:y,clipPathId:x}),c.#T()}return c}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=this.getRect(0,0),i=D._colorManager.convert(this.color),s={annotationType:q.HIGHLIGHT,color:i,opacity:this.#p,thickness:this.#f,quadPoints:this.#I(),outlines:this.#w(t),pageIndex:this.pageIndex,rect:t,rotation:this.#L(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#D(s)?null:(s.id=this.annotationElementId,s)}#D(e){const{color:t}=this._initialData;return e.color.some((i,s)=>i!==t[s])}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class de extends D{#e=0;#t=0;#i=null;#s=new Path2D;#a=!1;#n=null;#l=!1;#c=!1;#d=null;#o=null;#u=0;#r=0;#h=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";static _editorType=q.INK;constructor(e){super({...e,name:"inkEditor"}),this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,t){D.initialize(e,t)}static updateDefaultParams(e,t){switch(e){case N.INK_THICKNESS:de._defaultThickness=t;break;case N.INK_COLOR:de._defaultColor=t;break;case N.INK_OPACITY:de._defaultOpacity=t/100;break}}updateParams(e,t){switch(e){case N.INK_THICKNESS:this.#p(t);break;case N.INK_COLOR:this.#m(t);break;case N.INK_OPACITY:this.#b(t);break}}static get defaultPropertiesToUpdate(){return[[N.INK_THICKNESS,de._defaultThickness],[N.INK_COLOR,de._defaultColor||D._defaultLineColor],[N.INK_OPACITY,Math.round(de._defaultOpacity*100)]]}get propertiesToUpdate(){return[[N.INK_THICKNESS,this.thickness||de._defaultThickness],[N.INK_COLOR,this.color||de._defaultColor||D._defaultLineColor],[N.INK_OPACITY,Math.round(100*(this.opacity??de._defaultOpacity))]]}#p(e){const t=s=>{this.thickness=s,this.#M()},i=this.thickness;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:N.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#m(e){const t=s=>{this.color=s,this.#A()},i=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:N.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#b(e){const t=s=>{this.opacity=s,this.#A()};e/=100;const i=this.opacity;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:N.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#I(),this.#w()),this.isAttachedToDOM||(this.parent.add(this),this.#v()),this.#M()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#i&&(clearTimeout(this.#i),this.#i=null),this.#d?.disconnect(),this.#d=null,super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&e===null&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,t]=this.parentDimensions,i=this.width*e,s=this.height*t;this.setDimensions(i,s)}enableEditMode(){this.#a||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.#k())}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.#C())}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#f(){const{parentRotation:e,parentDimensions:[t,i]}=this;switch(e){case 90:return[0,i,i,t];case 180:return[t,i,t,i];case 270:return[t,0,i,t];default:return[0,0,t,i]}}#g(){const{ctx:e,color:t,opacity:i,thickness:s,parentScale:n,scaleFactor:a}=this;e.lineWidth=s*n/a,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${t}${Jn(i)}`}#y(e,t){this.canvas.addEventListener("contextmenu",Le,{signal:this._uiManager._signal}),this.#C(),this.#n=new AbortController;const i=this._uiManager.combinedSignal(this.#n);this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:i}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:i}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:i}),this.isEditing=!0,this.#c||(this.#c=!0,this.#v(),this.thickness||=de._defaultThickness,this.color||=de._defaultColor||D._defaultLineColor,this.opacity??=de._defaultOpacity),this.currentPath.push([e,t]),this.#l=!1,this.#g(),this.#h=()=>{this.#E(),this.#h&&window.requestAnimationFrame(this.#h)},window.requestAnimationFrame(this.#h)}#x(e,t){const[i,s]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===i&&t===s)return;const n=this.currentPath;let a=this.#s;if(n.push([e,t]),this.#l=!0,n.length<=2){a.moveTo(...n[0]),a.lineTo(e,t);return}n.length===3&&(this.#s=a=new Path2D,a.moveTo(...n[0])),this.#N(a,...n.at(-3),...n.at(-2),e,t)}#_(){if(this.currentPath.length===0)return;const e=this.currentPath.at(-1);this.#s.lineTo(...e)}#S(e,t){this.#h=null,e=Math.min(Math.max(e,0),this.canvas.width),t=Math.min(Math.max(t,0),this.canvas.height),this.#x(e,t),this.#_();let i;if(this.currentPath.length!==1)i=this.#T();else{const l=[e,t];i=[[l,l.slice(),l.slice(),l]]}const s=this.#s,n=this.currentPath;this.currentPath=[],this.#s=new Path2D;const a=()=>{this.allRawPaths.push(n),this.paths.push(i),this.bezierPath2D.push(s),this._uiManager.rebuild(this)},o=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#I(),this.#w()),this.#M())};this.addCommands({cmd:a,undo:o,mustExec:!0})}#E(){if(!this.#l)return;this.#l=!1;const e=Math.ceil(this.thickness*this.parentScale),t=this.currentPath.slice(-3),i=t.map(a=>a[0]),s=t.map(a=>a[1]);Math.min(...i)-e,Math.max(...i)+e,Math.min(...s)-e,Math.max(...s)+e;const{ctx:n}=this;n.save(),n.clearRect(0,0,this.canvas.width,this.canvas.height);for(const a of this.bezierPath2D)n.stroke(a);n.stroke(this.#s),n.restore()}#N(e,t,i,s,n,a,o){const l=(t+s)/2,c=(i+n)/2,d=(s+a)/2,h=(n+o)/2;e.bezierCurveTo(l+2*(s-l)/3,c+2*(n-c)/3,d+2*(s-d)/3,h+2*(n-h)/3,d,h)}#T(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const t=[];let i,[s,n]=e[0];for(i=1;i<e.length-2;i++){const[m,p]=e[i],[g,b]=e[i+1],v=(m+g)/2,y=(p+b)/2,x=[s+2*(m-s)/3,n+2*(p-n)/3],w=[v+2*(m-v)/3,y+2*(p-y)/3];t.push([[s,n],x,w,[v,y]]),[s,n]=[v,y]}const[a,o]=e[i],[l,c]=e[i+1],d=[s+2*(a-s)/3,n+2*(o-n)/3],h=[l+2*(a-l)/3,c+2*(o-c)/3];return t.push([[s,n],d,h,[l,c]]),t}#A(){if(this.isEmpty()){this.#D();return}this.#g();const{canvas:e,ctx:t}=this;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),this.#D();for(const i of this.bezierPath2D)t.stroke(i)}commit(){this.#a||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#a=!0,this.div.classList.add("disabled"),this.#M(!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}#k(){if(this.#o)return;this.#o=new AbortController;const e=this._uiManager.combinedSignal(this.#o);this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:e})}#C(){this.pointerdownAC?.abort(),this.pointerdownAC=null}canvasPointerdown(e){e.button!==0||!this.isInEditMode()||this.#a||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),this.#y(e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),this.#x(e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),this.#L(e)}canvasPointerleave(e){this.#L(e)}#L(e){this.#n?.abort(),this.#n=null,this.#k(),this.#i&&clearTimeout(this.#i),this.#i=setTimeout(()=>{this.#i=null,this.canvas.removeEventListener("contextmenu",Le)},10),this.#S(e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#I(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#w(){this.#d=new ResizeObserver(e=>{const t=e[0].contentRect;t.width&&t.height&&this.setDimensions(t.width,t.height)}),this.#d.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#d?.disconnect(),this.#d=null},{once:!0})}get isResizable(){return!this.isEmpty()&&this.#a}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[i,s,n,a]=this.#f();if(this.setAt(i,s,0,0),this.setDims(n,a),this.#I(),this.width){const[o,l]=this.parentDimensions;this.setAspectRatio(this.width*o,this.height*l),this.setAt(e*o,t*l,this.width*o,this.height*l),this.#c=!0,this.#v(),this.setDims(this.width*o,this.height*l),this.#A(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#w(),this.div}#v(){if(!this.#c)return;const[e,t]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*t),this.#D()}setDimensions(e,t){const i=Math.round(e),s=Math.round(t);if(this.#u===i&&this.#r===s)return;this.#u=i,this.#r=s,this.canvas.style.visibility="hidden";const[n,a]=this.parentDimensions;this.width=e/n,this.height=t/a,this.fixAndSetPosition(),this.#a&&this.#R(e,t),this.#v(),this.#A(),this.canvas.style.visibility="visible",this.fixDims()}#R(e,t){const i=this.#O(),s=(e-i)/this.#t,n=(t-i)/this.#e;this.scaleFactor=Math.min(s,n)}#D(){const e=this.#O()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)}static#F(e){const t=new Path2D;for(let i=0,s=e.length;i<s;i++){const[n,a,o,l]=e[i];i===0&&t.moveTo(...n),t.bezierCurveTo(a[0],a[1],o[0],o[1],l[0],l[1])}return t}static#H(e,t,i){const[s,n,a,o]=t;switch(i){case 0:for(let l=0,c=e.length;l<c;l+=2)e[l]+=s,e[l+1]=o-e[l+1];break;case 90:for(let l=0,c=e.length;l<c;l+=2){const d=e[l];e[l]=e[l+1]+s,e[l+1]=d+n}break;case 180:for(let l=0,c=e.length;l<c;l+=2)e[l]=a-e[l],e[l+1]+=n;break;case 270:for(let l=0,c=e.length;l<c;l+=2){const d=e[l];e[l]=a-e[l+1],e[l+1]=o-d}break;default:throw new Error("Invalid rotation")}return e}static#z(e,t,i){const[s,n,a,o]=t;switch(i){case 0:for(let l=0,c=e.length;l<c;l+=2)e[l]-=s,e[l+1]=o-e[l+1];break;case 90:for(let l=0,c=e.length;l<c;l+=2){const d=e[l];e[l]=e[l+1]-n,e[l+1]=d-s}break;case 180:for(let l=0,c=e.length;l<c;l+=2)e[l]=a-e[l],e[l+1]-=n;break;case 270:for(let l=0,c=e.length;l<c;l+=2){const d=e[l];e[l]=o-e[l+1],e[l+1]=a-d}break;default:throw new Error("Invalid rotation")}return e}#j(e,t,i,s){const n=[],a=this.thickness/2,o=e*t+a,l=e*i+a;for(const c of this.paths){const d=[],h=[];for(let m=0,p=c.length;m<p;m++){const[g,b,v,y]=c[m];if(g[0]===y[0]&&g[1]===y[1]&&p===1){const I=e*g[0]+o,M=e*g[1]+l;d.push(I,M),h.push(I,M);break}const x=e*g[0]+o,w=e*g[1]+l,A=e*b[0]+o,S=e*b[1]+l,E=e*v[0]+o,k=e*v[1]+l,_=e*y[0]+o,T=e*y[1]+l;m===0&&(d.push(x,w),h.push(x,w)),d.push(A,S,E,k,_,T),h.push(A,S),m===p-1&&h.push(_,T)}n.push({bezier:de.#H(d,s,this.rotation),points:de.#H(h,s,this.rotation)})}return n}#q(){let e=1/0,t=-1/0,i=1/0,s=-1/0;for(const n of this.paths)for(const[a,o,l,c]of n){const d=P.bezierBoundingBox(...a,...o,...l,...c);e=Math.min(e,d[0]),i=Math.min(i,d[1]),t=Math.max(t,d[2]),s=Math.max(s,d[3])}return[e,i,t,s]}#O(){return this.#a?Math.ceil(this.thickness*this.parentScale):0}#M(e=!1){if(this.isEmpty())return;if(!this.#a){this.#A();return}const t=this.#q(),i=this.#O();this.#t=Math.max(D.MIN_SIZE,t[2]-t[0]),this.#e=Math.max(D.MIN_SIZE,t[3]-t[1]);const s=Math.ceil(i+this.#t*this.scaleFactor),n=Math.ceil(i+this.#e*this.scaleFactor),[a,o]=this.parentDimensions;this.width=s/a,this.height=n/o,this.setAspectRatio(s,n);const l=this.translationX,c=this.translationY;this.translationX=-t[0],this.translationY=-t[1],this.#v(),this.#A(),this.#u=s,this.#r=n,this.setDims(s,n);const d=e?i/this.scaleFactor/2:0;this.translate(l-this.translationX-d,c-this.translationY-d)}static async deserialize(e,t,i){if(e instanceof Bi)return null;const s=await super.deserialize(e,t,i);s.thickness=e.thickness,s.color=P.makeHexColor(...e.color),s.opacity=e.opacity;const[n,a]=s.pageDimensions,o=s.width*n,l=s.height*a,c=s.parentScale,d=e.thickness/2;s.#a=!0,s.#u=Math.round(o),s.#r=Math.round(l);const{paths:h,rect:m,rotation:p}=e;for(let{bezier:b}of h){b=de.#z(b,m,p);const v=[];s.paths.push(v);let y=c*(b[0]-d),x=c*(b[1]-d);for(let A=2,S=b.length;A<S;A+=6){const E=c*(b[A]-d),k=c*(b[A+1]-d),_=c*(b[A+2]-d),T=c*(b[A+3]-d),I=c*(b[A+4]-d),M=c*(b[A+5]-d);v.push([[y,x],[E,k],[_,T],[I,M]]),y=I,x=M}const w=this.#F(v);s.bezierPath2D.push(w)}const g=s.#q();return s.#t=Math.max(D.MIN_SIZE,g[2]-g[0]),s.#e=Math.max(D.MIN_SIZE,g[3]-g[1]),s.#R(o,l),s}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),t=D._colorManager.convert(this.ctx.strokeStyle);return{annotationType:q.INK,color:t,thickness:this.thickness,opacity:this.opacity,paths:this.#j(this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}class Oi extends D{#e=null;#t=null;#i=null;#s=null;#a=null;#n="";#l=null;#c=null;#d=null;#o=!1;#u=!1;static _type="stamp";static _editorType=q.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#s=e.bitmapUrl,this.#a=e.bitmapFile}static initialize(e,t){D.initialize(e,t)}static get supportedTypes(){return G(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(t=>`image/${t}`))}static get supportedTypesStr(){return G(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(q.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#r(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#o=e.isSvg),e.file&&(this.#n=e.file.name),this.#m()}#h(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#l){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:n,height:a}=e||this.copyCanvas(null,null,!0).imageData,o=await i.guess({name:"altText",request:{data:s,width:n,height:a,channels:s.length/(n*a)}});if(!o)throw new Error("No response from the AI service.");if(o.error)throw new Error("Error from the AI service.");if(o.cancel)return null;if(!o.output)throw new Error("No valid response from the AI service.");const l=o.output;return await this.setGuessedAltText(l),t&&!this.hasAltTextData()&&(this.altTextData={alt:l,decorative:!1}),l}#p(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(i=>this.#r(i,!0)).finally(()=>this.#h());return}if(this.#s){const i=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(i).then(s=>this.#r(s)).finally(()=>this.#h());return}if(this.#a){const i=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(i).then(s=>this.#r(s)).finally(()=>this.#h());return}const e=document.createElement("input");e.type="file",e.accept=Oi.supportedTypesStr;const t=this._uiManager._signal;this.#i=new Promise(i=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#r(s)}i()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),i()},{signal:t})}).finally(()=>this.#h()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#l?.remove(),this.#l=null,this.#c?.disconnect(),this.#c=null,this.#d&&(clearTimeout(this.#d),this.#d=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#p();return}super.rebuild(),this.div!==null&&(this.#t&&this.#l===null&&this.#p(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#i||this.#e||this.#s||this.#a||this.#t)}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),this.#e?this.#m():this.#p(),this.width&&!this.annotationElementId){const[i,s]=this.parentDimensions;this.setAt(e*i,t*s,this.width*i,this.height*s)}return this.div}#m(){const{div:e}=this;let{width:t,height:i}=this.#e;const[s,n]=this.pageDimensions,a=.75;if(this.width)t=this.width*s,i=this.height*n;else if(t>a*s||i>a*n){const d=Math.min(a*s/t,a*n/i);t*=d,i*=d}const[o,l]=this.parentDimensions;this.setDims(t*o/s,i*l/n),this._uiManager.enableWaiting(!1);const c=this.#l=document.createElement("canvas");c.setAttribute("role","img"),this.addContainer(c),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#g(t,i),this.#x(),this.#u||(this.parent.addUndoableEditor(this),this.#u=!0),this._reportTelemetry({action:"inserted_image"}),this.#n&&c.setAttribute("aria-label",this.#n)}copyCanvas(e,t,i=!1){e||(e=224);const{width:s,height:n}=this.#e,a=new gi;let o=this.#e,l=s,c=n,d=null;if(t){if(s>t||n>t){const E=Math.min(t/s,t/n);l=Math.floor(s*E),c=Math.floor(n*E)}d=document.createElement("canvas");const m=d.width=Math.ceil(l*a.sx),p=d.height=Math.ceil(c*a.sy);this.#o||(o=this.#f(m,p));const g=d.getContext("2d");g.filter=this._uiManager.hcmFilter;let b="white",v="#cfcfd8";this._uiManager.hcmFilter!=="none"?v="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(b="#8f8f9d",v="#42414d");const y=15,x=y*a.sx,w=y*a.sy,A=new OffscreenCanvas(x*2,w*2),S=A.getContext("2d");S.fillStyle=b,S.fillRect(0,0,x*2,w*2),S.fillStyle=v,S.fillRect(0,0,x,w),S.fillRect(x,w,x,w),g.fillStyle=g.createPattern(A,"repeat"),g.fillRect(0,0,m,p),g.drawImage(o,0,0,o.width,o.height,0,0,m,p)}let h=null;if(i){let m,p;if(a.symmetric&&o.width<e&&o.height<e)m=o.width,p=o.height;else if(o=this.#e,s>e||n>e){const v=Math.min(e/s,e/n);m=Math.floor(s*v),p=Math.floor(n*v),this.#o||(o=this.#f(m,p))}const b=new OffscreenCanvas(m,p).getContext("2d",{willReadFrequently:!0});b.drawImage(o,0,0,o.width,o.height,0,0,m,p),h={width:m,height:p,data:b.getImageData(0,0,m,p).data}}return{canvas:d,width:l,height:c,imageData:h}}#b(e,t){const[i,s]=this.parentDimensions;this.width=e/i,this.height=t/s,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#d!==null&&clearTimeout(this.#d);const n=200;this.#d=setTimeout(()=>{this.#d=null,this.#g(e,t)},n)}#f(e,t){const{width:i,height:s}=this.#e;let n=i,a=s,o=this.#e;for(;n>2*e||a>2*t;){const l=n,c=a;n>2*e&&(n=n>=16384?Math.floor(n/2)-1:Math.ceil(n/2)),a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const d=new OffscreenCanvas(n,a);d.getContext("2d").drawImage(o,0,0,l,c,0,0,n,a),o=d.transferToImageBitmap()}return o}#g(e,t){const i=new gi,s=Math.ceil(e*i.sx),n=Math.ceil(t*i.sy),a=this.#l;if(!a||a.width===s&&a.height===n)return;a.width=s,a.height=n;const o=this.#o?this.#e:this.#f(s,n),l=a.getContext("2d");l.filter=this._uiManager.hcmFilter,l.drawImage(o,0,0,o.width,o.height,0,0,s,n)}getImageForAltText(){return this.#l}#y(e){if(e){if(this.#o){const s=this._uiManager.imageManager.getSvgUrl(this.#t);if(s)return s}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#o){const[t,i]=this.pageDimensions,s=Math.round(this.width*t*mt.PDF_TO_CSS_UNITS),n=Math.round(this.height*i*mt.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(s,n);return a.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,s,n),a.transferToImageBitmap()}return structuredClone(this.#e)}#x(){this._uiManager._signal&&(this.#c=new ResizeObserver(e=>{const t=e[0].contentRect;t.width&&t.height&&this.#b(t.width,t.height)}),this.#c.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#c?.disconnect(),this.#c=null},{once:!0}))}static async deserialize(e,t,i){let s=null;if(e instanceof Xs){const{data:{rect:g,rotation:b,id:v,structParent:y,popupRef:x},container:w,parent:{page:{pageNumber:A}}}=e,S=w.querySelector("canvas"),E=i.imageManager.getFromCanvas(w.id,S);S.remove();const k=(await t._structTree.getAriaAttributes(`${_i}${v}`))?.get("aria-label")||"";s=e={annotationType:q.STAMP,bitmapId:E.id,bitmap:E.bitmap,pageIndex:A-1,rect:g.slice(0),rotation:b,id:v,deleted:!1,accessibilityData:{decorative:!1,altText:k},isSvg:!1,structParent:y,popupRef:x}}const n=await super.deserialize(e,t,i),{rect:a,bitmap:o,bitmapUrl:l,bitmapId:c,isSvg:d,accessibilityData:h}=e;c&&i.imageManager.isValidId(c)?(n.#t=c,o&&(n.#e=o)):n.#s=l,n.#o=d;const[m,p]=n.pageDimensions;return n.width=(a[2]-a[0])/m,n.height=(a[3]-a[1])/p,n.annotationElementId=e.id||null,h&&(n.altTextData=h),n._initialData=s,n.#u=!!s,n}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:q.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#o,structTreeParentId:this._structTreeParentId};if(e)return i.bitmapUrl=this.#y(!0),i.accessibilityData=this.serializeAltText(!0),i;const{decorative:s,altText:n}=this.serializeAltText(!1);if(!s&&n&&(i.accessibilityData={type:"Figure",alt:n}),this.annotationElementId){const o=this.#_(i);if(o.isSame)return null;o.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,t===null)return i;t.stamps||=new Map;const a=this.#o?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:a,serialized:i}),i.bitmap=this.#y(!1);else if(this.#o){const o=t.stamps.get(this.#t);a>o.area&&(o.area=a,o.serialized.bitmap.close(),o.serialized.bitmap=this.#y(!1))}return i}#_(e){const{rect:t,pageIndex:i,accessibilityData:{altText:s}}=this._initialData,n=e.rect.every((l,c)=>Math.abs(l-t[c])<1),a=e.pageIndex===i,o=(e.accessibilityData?.alt||"")===s;return{isSame:n&&a&&o,isSameAltText:o}}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}class Be{#e;#t=!1;#i=null;#s=null;#a=null;#n=new Map;#l=!1;#c=!1;#d=!1;#o=null;#u=null;#r;static _initialized=!1;static#h=new Map([ae,de,Oi,ee].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:t,div:i,structTreeLayer:s,accessibilityManager:n,annotationLayer:a,drawLayer:o,textLayer:l,viewport:c,l10n:d}){const h=[...Be.#h.values()];if(!Be._initialized){Be._initialized=!0;for(const m of h)m.initialize(d,e)}e.registerEditorTypes(h),this.#r=e,this.pageIndex=t,this.div=i,this.#e=n,this.#i=a,this.viewport=c,this.#o=l,this.drawLayer=o,this._structTree=s,this.#r.addLayer(this)}get isEmpty(){return this.#n.size===0}get isInvisible(){return this.isEmpty&&this.#r.getMode()===q.NONE}updateToolbar(e){this.#r.updateToolbar(e)}updateMode(e=this.#r.getMode()){switch(this.#g(),e){case q.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case q.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case q.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const i of Be.#h.values())t.toggle(`${i._type}Editing`,e===i._editorType);this.div.hidden=!1}hasTextLayer(e){return e===this.#o?.div}addInkEditorIfNeeded(e){if(this.#r.getMode()!==q.INK)return;if(!e){for(const i of this.#n.values())if(i.isEmpty()){i.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){this.#r.setEditingState(e)}addCommands(e){this.#r.addCommands(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#i?.div.classList.toggle("disabled",!e)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const i of this.#n.values())i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#r.removeChangedExistingAnnotation(i),e.add(i.annotationElementId));if(!this.#i)return;const t=this.#i.getEditableAnnotations();for(const i of t){if(i.hide(),this.#r.isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const s=await this.deserialize(i);s&&(this.addOrRebuild(s),s.enableEditing())}}disable(){this.#d=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const s of this.#n.values())if(s.disableEditing(),!!s.annotationElementId){if(s.serialize()!==null){e.set(s.annotationElementId,s);continue}else t.set(s.annotationElementId,s);this.getEditableAnnotation(s.annotationElementId)?.show(),s.remove()}if(this.#i){const s=this.#i.getEditableAnnotations();for(const n of s){const{id:a}=n.data;if(this.#r.isDeletedAnnotationElement(a))continue;let o=t.get(a);if(o){o.resetAnnotationElement(n),o.show(!1),n.show();continue}o=e.get(a),o&&(this.#r.addChangedExistingAnnotation(o),o.renderAnnotationElement(n)&&o.show(!1)),n.show()}}this.#g(),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const s of Be.#h.values())i.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#d=!1}getEditableAnnotation(e){return this.#i?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#r.getActive()!==e&&this.#r.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#o?.div&&!this.#u){this.#u=new AbortController;const e=this.#r.combinedSignal(this.#u);this.#o.div.addEventListener("pointerdown",this.#p.bind(this),{signal:e}),this.#o.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#o?.div&&this.#u&&(this.#u.abort(),this.#u=null,this.#o.div.classList.remove("highlighting"))}#p(e){this.#r.unselectAll();const{target:t}=e;if(t===this.#o.div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&this.#o.div.contains(t)){const{isMac:i}=xe.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#r.showAllEditors("highlight",!0,!0),this.#o.div.classList.add("free"),this.toggleDrawing(),ee.startHighlighting(this,this.#r.direction==="ltr",{target:this.#o.div,x:e.x,y:e.y}),this.#o.div.addEventListener("pointerup",()=>{this.#o.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#r._signal}),e.preventDefault()}}enableClick(){if(this.#s)return;this.#s=new AbortController;const e=this.#r.combinedSignal(this.#s);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:e})}disableClick(){this.#s?.abort(),this.#s=null}attach(e){this.#n.set(e.id,e);const{annotationElementId:t}=e;t&&this.#r.isDeletedAnnotationElement(t)&&this.#r.removeDeletedAnnotationElement(e)}detach(e){this.#n.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#d&&e.annotationElementId&&this.#r.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#r.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,this.#c||this.addInkEditorIfNeeded(!1)}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#r.addDeletedAnnotationElement(e.annotationElementId),D.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#r.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),this.#r.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!this.#a&&(e._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#r._signal}),t.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:t,undo:i,mustExec:!1})}getNextId(){return this.#r.getId()}get#m(){return Be.#h.get(this.#r.getMode())}combinedSignal(e){return this.#r.combinedSignal(e)}#b(e){const t=this.#m;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#m?.canCreateNewEmptyEditor()}pasteEditor(e,t){this.#r.updateToolbar(e),this.#r.updateMode(e);const{offsetX:i,offsetY:s}=this.#f(),n=this.getNextId(),a=this.#b({parent:this,id:n,x:i,y:s,uiManager:this.#r,isCentered:!0,...t});a&&this.add(a)}async deserialize(e){return await Be.#h.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#r)||null}createAndAddNewEditor(e,t,i={}){const s=this.getNextId(),n=this.#b({parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:this.#r,isCentered:t,...i});return n&&this.add(n),n}#f(){const{x:e,y:t,width:i,height:s}=this.div.getBoundingClientRect(),n=Math.max(0,e),a=Math.max(0,t),o=Math.min(window.innerWidth,e+i),l=Math.min(window.innerHeight,t+s),c=(n+o)/2-e,d=(a+l)/2-t,[h,m]=this.viewport.rotation%180===0?[c,d]:[d,c];return{offsetX:h,offsetY:m}}addNewEditor(){this.createAndAddNewEditor(this.#f(),!0)}setSelected(e){this.#r.setSelected(e)}toggleSelected(e){this.#r.toggleSelected(e)}unselect(e){this.#r.unselect(e)}pointerup(e){const{isMac:t}=xe.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&this.#l){if(this.#l=!1,!this.#t){this.#t=!0;return}if(this.#r.getMode()===q.STAMP){this.#r.unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(this.#r.getMode()===q.HIGHLIGHT&&this.enableTextSelection(),this.#l){this.#l=!1;return}const{isMac:t}=xe.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;this.#l=!0;const i=this.#r.getActive();this.#t=!i||i.isEmpty()}findNewParent(e,t,i){const s=this.#r.findParent(t,i);return s===null||s===this?!1:(s.changeParent(e),!0)}destroy(){this.#r.getActive()?.parent===this&&(this.#r.commitOrRemove(),this.#r.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const e of this.#n.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#n.clear(),this.#r.removeLayer(this)}#g(){this.#c=!0;for(const e of this.#n.values())e.isEmpty()&&e.remove();this.#c=!1}render({viewport:e}){this.viewport=e,et(this.div,e);for(const t of this.#r.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){this.#r.commitOrRemove(),this.#g();const t=this.viewport.rotation,i=e.rotation;if(this.viewport=e,et(this.div,{rotation:i}),t!==i)for(const s of this.#n.values())s.rotate(i);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#r.viewParameters.realScale}}class ge{#e=null;#t=0;#i=new Map;#s=new Map;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#i.size>0)for(const t of this.#i.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return G(this,"_svgFactory",new zi)}static#a(e,{x:t=0,y:i=0,width:s=1,height:n=1}={}){const{style:a}=e;a.top=`${100*i}%`,a.left=`${100*t}%`,a.width=`${100*s}%`,a.height=`${100*n}%`}#n(e){const t=ge._svgFactory.create(1,1,!0);return this.#e.append(t),t.setAttribute("aria-hidden",!0),ge.#a(t,e),t}#l(e,t){const i=ge._svgFactory.createElement("clipPath");e.append(i);const s=`clip_${t}`;i.setAttribute("id",s),i.setAttribute("clipPathUnits","objectBoundingBox");const n=ge._svgFactory.createElement("use");return i.append(n),n.setAttribute("href",`#${t}`),n.classList.add("clip"),s}draw(e,t,i,s=!1){const n=this.#t++,a=this.#n(e.box);a.classList.add(...e.classNamesForDrawing);const o=ge._svgFactory.createElement("defs");a.append(o);const l=ge._svgFactory.createElement("path");o.append(l);const c=`path_p${this.pageIndex}_${n}`;l.setAttribute("id",c),l.setAttribute("d",e.toSVGPath()),s&&this.#s.set(n,l);const d=this.#l(o,c),h=ge._svgFactory.createElement("use");return a.append(h),a.setAttribute("fill",t),a.setAttribute("fill-opacity",i),h.setAttribute("href",`#${c}`),this.#i.set(n,a),{id:n,clipPathId:`url(#${d})`}}drawOutline(e){const t=this.#t++,i=this.#n(e.box);i.classList.add(...e.classNamesForOutlining);const s=ge._svgFactory.createElement("defs");i.append(s);const n=ge._svgFactory.createElement("path");s.append(n);const a=`path_p${this.pageIndex}_${t}`;n.setAttribute("id",a),n.setAttribute("d",e.toSVGPath()),n.setAttribute("vector-effect","non-scaling-stroke");let o;if(e.mustRemoveSelfIntersections){const d=ge._svgFactory.createElement("mask");s.append(d),o=`mask_p${this.pageIndex}_${t}`,d.setAttribute("id",o),d.setAttribute("maskUnits","objectBoundingBox");const h=ge._svgFactory.createElement("rect");d.append(h),h.setAttribute("width","1"),h.setAttribute("height","1"),h.setAttribute("fill","white");const m=ge._svgFactory.createElement("use");d.append(m),m.setAttribute("href",`#${a}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}const l=ge._svgFactory.createElement("use");i.append(l),l.setAttribute("href",`#${a}`),o&&l.setAttribute("mask",`url(#${o})`);const c=l.cloneNode();return i.append(c),l.classList.add("mainOutline"),c.classList.add("secondaryOutline"),this.#i.set(t,i),t}finalizeLine(e,t){const i=this.#s.get(e);this.#s.delete(e),this.updateBox(e,t.box),i.setAttribute("d",t.toSVGPath())}updateLine(e,t){this.#i.get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}updatePath(e,t){this.#s.get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){ge.#a(this.#i.get(e),t)}show(e,t){this.#i.get(e).classList.toggle("hidden",!t)}rotate(e,t){this.#i.get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){this.#i.get(e).setAttribute("fill",t)}changeOpacity(e,t){this.#i.get(e).setAttribute("fill-opacity",t)}addClass(e,t){this.#i.get(e).classList.add(t)}removeClass(e,t){this.#i.get(e).classList.remove(t)}getSVGRoot(e){return this.#i.get(e)}remove(e){this.#s.delete(e),this.#e!==null&&(this.#i.get(e).remove(),this.#i.delete(e))}destroy(){this.#e=null;for(const e of this.#i.values())e.remove();this.#i.clear(),this.#s.clear()}}F.AbortException;F.AnnotationEditorLayer;F.AnnotationEditorParamsType;F.AnnotationEditorType;F.AnnotationEditorUIManager;var Zs=F.AnnotationLayer,Qs=F.AnnotationMode;F.ColorPicker;F.DOMSVGFactory;F.DrawLayer;F.FeatureTest;var Hi=F.GlobalWorkerOptions;F.ImageKind;F.InvalidPDFException;F.MissingPDFException;F.OPS;F.OutputScale;var Lr=F.PDFDataRangeTransport;F.PDFDateString;F.PDFWorker;F.PasswordResponses;F.PermissionFlag;F.PixelsPerInch;F.RenderingCancelledException;var en=F.TextLayer;F.UnexpectedResponseException;F.Util;F.VerbosityLevel;F.XfaLayer;F.build;F.createValidAbsoluteUrl;F.fetchData;var tn=F.getDocument;F.getFilenameFromUrl;F.getPdfFilenameFromUrl;F.getXfaPageViewport;F.isDataScheme;F.isPdfFile;F.noContextMenu;F.normalizeUnicode;F.setLayerDimensions;F.shadow;var sn=F.version;const Mr=Object.freeze(Object.defineProperty({__proto__:null,AnnotationLayer:Zs,AnnotationMode:Qs,GlobalWorkerOptions:Hi,PDFDataRangeTransport:Lr,TextLayer:en,getDocument:tn,version:sn},Symbol.toStringTag,{value:"Module"}));var le=function(r,e,t){if(t||arguments.length===2)for(var i=0,s=e.length,n;i<s;i++)(n||!(i in e))&&(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return r.concat(n||Array.prototype.slice.call(e))},Pr=["onCopy","onCut","onPaste"],Ir=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],Rr=["onFocus","onBlur"],Dr=["onInput","onInvalid","onReset","onSubmit"],Nr=["onLoad","onError"],Fr=["onKeyDown","onKeyPress","onKeyUp"],jr=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],qr=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],zr=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],Br=["onSelect"],Or=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],Hr=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],Gr=["onScroll"],Wr=["onWheel"],Vr=["onAnimationStart","onAnimationEnd","onAnimationIteration"],Ur=["onTransitionEnd"],Kr=["onToggle"],$r=["onChange"],Xr=le(le(le(le(le(le(le(le(le(le(le(le(le(le(le(le(le(le([],Pr,!0),Ir,!0),Rr,!0),Dr,!0),Nr,!0),Fr,!0),jr,!0),qr,!0),zr,!0),Br,!0),Or,!0),Hr,!0),Gr,!0),Wr,!0),Vr,!0),Ur,!0),$r,!0),Kr,!0);function nn(r,e){var t={};return Xr.forEach(function(i){var s=r[i];s&&(e?t[i]=(function(n){return s(n,e(i))}):t[i]=s)}),t}function Mt(r){var e=!1,t=new Promise(function(i,s){r.then(function(n){return!e&&i(n)}).catch(function(n){return!e&&s(n)})});return{promise:t,cancel:function(){e=!0}}}var Jr="Invariant failed";function U(r,e){if(!r)throw new Error(Jr)}var di,ls;function Yr(){if(ls)return di;ls=1;var r=function(){};return di=r,di}var Zr=Yr();const fe=wn(Zr);var cs=Object.prototype.hasOwnProperty;function ds(r,e,t){for(t of r.keys())if(ut(t,e))return t}function ut(r,e){var t,i,s;if(r===e)return!0;if(r&&e&&(t=r.constructor)===e.constructor){if(t===Date)return r.getTime()===e.getTime();if(t===RegExp)return r.toString()===e.toString();if(t===Array){if((i=r.length)===e.length)for(;i--&&ut(r[i],e[i]););return i===-1}if(t===Set){if(r.size!==e.size)return!1;for(i of r)if(s=i,s&&typeof s=="object"&&(s=ds(e,s),!s)||!e.has(s))return!1;return!0}if(t===Map){if(r.size!==e.size)return!1;for(i of r)if(s=i[0],s&&typeof s=="object"&&(s=ds(e,s),!s)||!ut(i[1],e.get(s)))return!1;return!0}if(t===ArrayBuffer)r=new Uint8Array(r),e=new Uint8Array(e);else if(t===DataView){if((i=r.byteLength)===e.byteLength)for(;i--&&r.getInt8(i)===e.getInt8(i););return i===-1}if(ArrayBuffer.isView(r)){if((i=r.byteLength)===e.byteLength)for(;i--&&r[i]===e[i];);return i===-1}if(!t||typeof r=="object"){i=0;for(t in r)if(cs.call(r,t)&&++i&&!cs.call(e,t)||!(t in e)||!ut(r[t],e[t]))return!1;return Object.keys(e).length===i}}return r!==r&&e!==e}const an=L.createContext(null);function ht({children:r,type:e}){return u.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:r})}const Qr="noopener noreferrer nofollow";class eo{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return U(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){U(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(t=>{U(this.pdfDocument),U(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{U(Array.isArray(t));const i=t[0];new Promise(s=>{U(this.pdfDocument),i instanceof Object?this.pdfDocument.getPageIndex(i).then(n=>{s(n)}).catch(()=>{U(!1)}):typeof i=="number"?s(i):U(!1)}).then(s=>{const n=s+1;U(this.pdfViewer),U(n>=1&&n<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:s,pageNumber:n})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const t=e-1;U(this.pdfViewer),U(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}addLinkAttributes(e,t,i){e.href=t,e.rel=this.externalLinkRel||Qr,e.target=i?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const us={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},Qt=typeof window<"u",rn=Qt&&window.location.protocol==="file:";function to(r){return typeof r<"u"}function Je(r){return to(r)&&r!==null}function io(r){return typeof r=="string"}function so(r){return r instanceof ArrayBuffer}function no(r){return U(Qt),r instanceof Blob}function Si(r){return io(r)&&/^data:/.test(r)}function hs(r){U(Si(r));const[e="",t=""]=r.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function ao(){return Qt&&window.devicePixelRatio||1}const on="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function ms(){fe(!rn,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${on}`)}function ro(){fe(!rn,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${on}`)}function it(r){r?.cancel&&r.cancel()}function Ei(r,e){return Object.defineProperty(r,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(r,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(r,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(r,"originalHeight",{get(){return this.view[3]},configurable:!0}),r}function oo(r){return r.name==="RenderingCancelledException"}function lo(r){return new Promise((e,t)=>{const i=new FileReader;i.onload=()=>{if(!i.result)return t(new Error("Error while reading a file."));e(i.result)},i.onerror=s=>{if(!s.target)return t(new Error("Error while reading a file."));const{error:n}=s.target;if(!n)return t(new Error("Error while reading a file."));switch(n.code){case n.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case n.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case n.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},i.readAsArrayBuffer(r)})}function co(r,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return r}}function pt(){return L.useReducer(co,{value:void 0,error:void 0})}var uo=function(r,e,t,i){function s(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(d){try{c(i.next(d))}catch(h){a(h)}}function l(d){try{c(i.throw(d))}catch(h){a(h)}}function c(d){d.done?n(d.value):s(d.value).then(o,l)}c((i=i.apply(r,e||[])).next())})},ps=function(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(r);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(r,i[s])&&(t[i[s]]=r[i[s]]);return t};const{PDFDataRangeTransport:ho}=Mr,mo=(r,e)=>{switch(e){case us.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");r(t);break}case us.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");r(t);break}}};function gs(r){return typeof r=="object"&&r!==null&&("data"in r||"range"in r||"url"in r)}const po=L.forwardRef(function(e,t){var{children:i,className:s,error:n="Failed to load PDF file.",externalLinkRel:a,externalLinkTarget:o,file:l,inputRef:c,imageResourcesPath:d,loading:h="Loading PDF…",noData:m="No PDF file specified.",onItemClick:p,onLoadError:g,onLoadProgress:b,onLoadSuccess:v,onPassword:y=mo,onSourceError:x,onSourceSuccess:w,options:A,renderMode:S,rotate:E}=e,k=ps(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[_,T]=pt(),{value:I,error:M}=_,[W,O]=pt(),{value:z,error:H}=W,j=L.useRef(new eo),C=L.useRef([]),R=L.useRef(void 0),ue=L.useRef(void 0);l&&l!==R.current&&gs(l)&&(fe(!ut(l,R.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),R.current=l),A&&A!==ue.current&&(fe(!ut(A,ue.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),ue.current=A);const ye=L.useRef({scrollPageIntoView:K=>{const{dest:ie,pageNumber:me,pageIndex:oe=me-1}=K;if(p){p({dest:ie,pageIndex:oe,pageNumber:me});return}const rt=C.current[oe];if(rt){rt.scrollIntoView();return}fe(!1,`An internal link leading to page ${me} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});L.useImperativeHandle(t,()=>({linkService:j,pages:C,viewer:ye}),[]);function he(){w&&w()}function Z(){M&&(fe(!1,M.toString()),x&&x(M))}function $(){T({type:"RESET"})}L.useEffect($,[l,T]);const Ae=L.useCallback(()=>uo(this,void 0,void 0,function*(){if(!l)return null;if(typeof l=="string")return Si(l)?{data:hs(l)}:(ms(),{url:l});if(l instanceof ho)return{range:l};if(so(l))return{data:l};if(Qt&&no(l))return{data:yield lo(l)};if(U(typeof l=="object"),U(gs(l)),"url"in l&&typeof l.url=="string"){if(Si(l.url)){const{url:K}=l,ie=ps(l,["url"]),me=hs(K);return Object.assign({data:me},ie)}ms()}return l}),[l]);L.useEffect(()=>{const K=Mt(Ae());return K.promise.then(ie=>{T({type:"RESOLVE",value:ie})}).catch(ie=>{T({type:"REJECT",error:ie})}),()=>{it(K)}},[Ae,T]),L.useEffect(()=>{if(!(typeof I>"u")){if(I===!1){Z();return}he()}},[I]);function Me(){z&&(v&&v(z),C.current=new Array(z.numPages),j.current.setDocument(z))}function Q(){H&&(fe(!1,H.toString()),g&&g(H))}L.useEffect(function(){O({type:"RESET"})},[O,I]),L.useEffect(function(){if(!I)return;const ie=A?Object.assign(Object.assign({},I),A):I,me=tn(ie);b&&(me.onProgress=b),y&&(me.onPassword=y);const oe=me,rt=oe.promise.then(bt=>{O({type:"RESOLVE",value:bt})}).catch(bt=>{oe.destroyed||O({type:"REJECT",error:bt})});return()=>{rt.finally(()=>oe.destroy())}},[A,O,I]),L.useEffect(()=>{if(!(typeof z>"u")){if(z===!1){Q();return}Me()}},[z]),L.useEffect(function(){j.current.setViewer(ye.current),j.current.setExternalLinkRel(a),j.current.setExternalLinkTarget(o)},[a,o]);const V=L.useCallback((K,ie)=>{C.current[K]=ie},[]),Re=L.useCallback(K=>{delete C.current[K]},[]),Pe=L.useMemo(()=>({imageResourcesPath:d,linkService:j.current,onItemClick:p,pdf:z,registerPage:V,renderMode:S,rotate:E,unregisterPage:Re}),[d,p,z,V,S,E,Re]),J=L.useMemo(()=>nn(k,()=>z),[k,z]);function gt(){return u.jsx(an.Provider,{value:Pe,children:i})}function ft(){return l?z==null?u.jsx(ht,{type:"loading",children:typeof h=="function"?h():h}):z===!1?u.jsx(ht,{type:"error",children:typeof n=="function"?n():n}):gt():u.jsx(ht,{type:"no-data",children:typeof m=="function"?m():m})}return u.jsx("div",Object.assign({className:Ht("react-pdf__Document",s),ref:c,style:{"--scale-factor":"1"}},J,{children:ft()}))});function ln(){return L.useContext(an)}function cn(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=r.filter(Boolean);if(t.length<=1){var i=t[0];return i||null}return function(n){t.forEach(function(a){typeof a=="function"?a(n):a&&(a.current=n)})}}const dn=L.createContext(null),un={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},go=/^H(\d+)$/;function fo(r){return r in un}function ei(r){return"children"in r}function hn(r){return ei(r)?r.children.length===1&&0 in r.children&&"id"in r.children[0]:!1}function bo(r){const e={};if(ei(r)){const{role:t}=r,i=t.match(go);if(i)e.role="heading",e["aria-level"]=Number(i[1]);else if(fo(t)){const s=un[t];s&&(e.role=s)}}return e}function mn(r){const e={};if(ei(r)){if(r.alt!==void 0&&(e["aria-label"]=r.alt),r.lang!==void 0&&(e.lang=r.lang),hn(r)){const[t]=r.children;if(t){const i=mn(t);return Object.assign(Object.assign({},e),i)}}}else"id"in r&&(e["aria-owns"]=r.id);return e}function yo(r){return r?Object.assign(Object.assign({},bo(r)),mn(r)):null}function pn({className:r,node:e}){const t=L.useMemo(()=>yo(e),[e]),i=L.useMemo(()=>!ei(e)||hn(e)?null:e.children.map((s,n)=>u.jsx(pn,{node:s},n)),[e]);return u.jsx("span",Object.assign({className:r},t,{children:i}))}function ti(){return L.useContext(dn)}function vo(){const r=ti();U(r);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=r,[i,s]=pt(),{value:n,error:a}=i,{customTextRenderer:o,page:l}=r;function c(){n&&t&&t(n)}function d(){a&&(fe(!1,a.toString()),e&&e(a))}return L.useEffect(function(){s({type:"RESET"})},[s,l]),L.useEffect(function(){if(o||!l)return;const m=Mt(l.getStructTree()),p=m;return m.promise.then(g=>{s({type:"RESOLVE",value:g})}).catch(g=>{s({type:"REJECT",error:g})}),()=>it(p)},[o,l,s]),L.useEffect(()=>{if(n!==void 0){if(n===!1){d();return}c()}},[n]),n?u.jsx(pn,{className:"react-pdf__Page__structTree structTree",node:n}):null}const fs=Qs;function xo(r){const e=ti();U(e);const t=Object.assign(Object.assign({},e),r),{_className:i,canvasBackground:s,devicePixelRatio:n=ao(),onRenderError:a,onRenderSuccess:o,page:l,renderForms:c,renderTextLayer:d,rotate:h,scale:m}=t,{canvasRef:p}=r;U(l);const g=L.useRef(null);function b(){l&&o&&o(Ei(l,m))}function v(A){oo(A)||(fe(!1,A.toString()),a&&a(A))}const y=L.useMemo(()=>l.getViewport({scale:m*n,rotation:h}),[n,l,h,m]),x=L.useMemo(()=>l.getViewport({scale:m,rotation:h}),[l,h,m]);L.useEffect(function(){if(!l)return;l.cleanup();const{current:S}=g;if(!S)return;S.width=y.width,S.height=y.height,S.style.width=`${Math.floor(x.width)}px`,S.style.height=`${Math.floor(x.height)}px`,S.style.visibility="hidden";const E={annotationMode:c?fs.ENABLE_FORMS:fs.ENABLE,canvasContext:S.getContext("2d",{alpha:!1}),viewport:y};s&&(E.background=s);const k=l.render(E),_=k;return k.promise.then(()=>{S.style.visibility="",b()}).catch(v),()=>it(_)},[s,l,c,y,x]);const w=L.useCallback(()=>{const{current:A}=g;A&&(A.width=0,A.height=0)},[]);return L.useEffect(()=>w,[w]),u.jsx("canvas",{className:`${i}__canvas`,dir:"ltr",ref:cn(p,g),style:{display:"block",userSelect:"none"},children:d?u.jsx(vo,{}):null})}function Ao(r){return"str"in r}function wo(){const r=ti();U(r);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:i,onRenderTextLayerError:s,onRenderTextLayerSuccess:n,page:a,pageIndex:o,pageNumber:l,rotate:c,scale:d}=r;U(a);const[h,m]=pt(),{value:p,error:g}=h,b=L.useRef(null);fe(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function v(){p&&i&&i(p)}function y(){g&&(fe(!1,g.toString()),t&&t(g))}L.useEffect(function(){m({type:"RESET"})},[a,m]),L.useEffect(function(){if(!a)return;const _=Mt(a.getTextContent()),T=_;return _.promise.then(I=>{m({type:"RESOLVE",value:I})}).catch(I=>{m({type:"REJECT",error:I})}),()=>it(T)},[a,m]),L.useEffect(()=>{if(p!==void 0){if(p===!1){y();return}v()}},[p]);const x=L.useCallback(()=>{n&&n()},[n]),w=L.useCallback(k=>{fe(!1,k.toString()),s&&s(k)},[s]);function A(){const k=b.current;k&&k.classList.add("selecting")}function S(){const k=b.current;k&&k.classList.remove("selecting")}const E=L.useMemo(()=>a.getViewport({scale:d,rotation:c}),[a,c,d]);return L.useLayoutEffect(function(){if(!a||!p)return;const{current:_}=b;if(!_)return;_.innerHTML="";const T=a.streamTextContent({includeMarkedContent:!0}),I={container:_,textContentSource:T,viewport:E},M=new en(I),W=M;return M.render().then(()=>{const O=document.createElement("div");O.className="endOfContent",_.append(O);const z=_.querySelectorAll('[role="presentation"]');if(e){let H=0;p.items.forEach((j,C)=>{if(!Ao(j))return;const R=z[H];if(!R)return;const ue=e(Object.assign({pageIndex:o,pageNumber:l,itemIndex:C},j));R.innerHTML=ue,H+=j.str&&j.hasEOL?2:1})}x()}).catch(w),()=>it(W)},[e,w,x,a,o,l,p,E]),u.jsx("div",{className:Ht("react-pdf__Page__textContent","textLayer"),onMouseUp:S,onMouseDown:A,ref:b})}function So(){const r=ln(),e=ti();U(e);const t=Object.assign(Object.assign({},r),e),{imageResourcesPath:i,linkService:s,onGetAnnotationsError:n,onGetAnnotationsSuccess:a,onRenderAnnotationLayerError:o,onRenderAnnotationLayerSuccess:l,page:c,pdf:d,renderForms:h,rotate:m,scale:p=1}=t;U(d),U(c),U(s);const[g,b]=pt(),{value:v,error:y}=g,x=L.useRef(null);fe(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function w(){v&&a&&a(v)}function A(){y&&(fe(!1,y.toString()),n&&n(y))}L.useEffect(function(){b({type:"RESET"})},[b,c]),L.useEffect(function(){if(!c)return;const T=Mt(c.getAnnotations()),I=T;return T.promise.then(M=>{b({type:"RESOLVE",value:M})}).catch(M=>{b({type:"REJECT",error:M})}),()=>{it(I)}},[b,c]),L.useEffect(()=>{if(v!==void 0){if(v===!1){A();return}w()}},[v]);function S(){l&&l()}function E(_){fe(!1,`${_}`),o&&o(_)}const k=L.useMemo(()=>c.getViewport({scale:p,rotation:m}),[c,m,p]);return L.useEffect(function(){if(!d||!c||!s||!v)return;const{current:T}=x;if(!T)return;const I=k.clone({dontFlip:!0}),M={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:T,l10n:null,page:c,structTreeLayer:null,viewport:I},W={annotations:v,annotationStorage:d.annotationStorage,div:T,imageResourcesPath:i,linkService:s,page:c,renderForms:h,viewport:I};T.innerHTML="";try{new Zs(M).render(W),S()}catch(O){E(O)}return()=>{}},[v,i,s,c,d,h,k]),u.jsx("div",{className:Ht("react-pdf__Page__annotations","annotationLayer"),ref:x})}var Eo=function(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(r);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(r,i[s])&&(t[i[s]]=r[i[s]]);return t};const bs=1;function ko(r){const e=ln(),t=Object.assign(Object.assign({},e),r),{_className:i="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:n,canvasRef:a,children:o,className:l,customRenderer:c,customTextRenderer:d,devicePixelRatio:h,error:m="Failed to load the page.",height:p,inputRef:g,loading:b="Loading page…",noData:v="No page specified.",onGetAnnotationsError:y,onGetAnnotationsSuccess:x,onGetStructTreeError:w,onGetStructTreeSuccess:A,onGetTextError:S,onGetTextSuccess:E,onLoadError:k,onLoadSuccess:_,onRenderAnnotationLayerError:T,onRenderAnnotationLayerSuccess:I,onRenderError:M,onRenderSuccess:W,onRenderTextLayerError:O,onRenderTextLayerSuccess:z,pageIndex:H,pageNumber:j,pdf:C,registerPage:R,renderAnnotationLayer:ue=!0,renderForms:ye=!1,renderMode:he="canvas",renderTextLayer:Z=!0,rotate:$,scale:Ae=bs,unregisterPage:Me,width:Q}=t,V=Eo(t,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[Re,Pe]=pt(),{value:J,error:gt}=Re,ft=L.useRef(null);U(C);const K=Je(j)?j-1:H??null,ie=j??(Je(H)?H+1:null),me=$??(J?J.rotate:null),oe=L.useMemo(()=>{if(!J)return null;let ot=1;const It=Ae??bs;if(Q||p){const Rt=J.getViewport({scale:1,rotation:me});Q?ot=Q/Rt.width:p&&(ot=p/Rt.height)}return It*ot},[p,J,me,Ae,Q]);L.useEffect(function(){return()=>{Je(K)&&s&&Me&&Me(K)}},[s,C,K,Me]);function rt(){if(_){if(!J||!oe)return;_(Ei(J,oe))}if(s&&R){if(!Je(K)||!ft.current)return;R(K,ft.current)}}function bt(){gt&&(fe(!1,gt.toString()),k&&k(gt))}L.useEffect(function(){Pe({type:"RESET"})},[Pe,C,K]),L.useEffect(function(){if(!C||!ie)return;const It=Mt(C.getPage(ie)),Rt=It;return It.promise.then(ii=>{Pe({type:"RESOLVE",value:ii})}).catch(ii=>{Pe({type:"REJECT",error:ii})}),()=>it(Rt)},[Pe,C,ie]),L.useEffect(()=>{if(J!==void 0){if(J===!1){bt();return}rt()}},[J,oe]);const gn=L.useMemo(()=>J&&Je(K)&&ie&&Je(me)&&Je(oe)?{_className:i,canvasBackground:n,customTextRenderer:d,devicePixelRatio:h,onGetAnnotationsError:y,onGetAnnotationsSuccess:x,onGetStructTreeError:w,onGetStructTreeSuccess:A,onGetTextError:S,onGetTextSuccess:E,onRenderAnnotationLayerError:T,onRenderAnnotationLayerSuccess:I,onRenderError:M,onRenderSuccess:W,onRenderTextLayerError:O,onRenderTextLayerSuccess:z,page:J,pageIndex:K,pageNumber:ie,renderForms:ye,renderTextLayer:Z,rotate:me,scale:oe}:null,[i,n,d,h,y,x,w,A,S,E,T,I,M,W,O,z,J,K,ie,ye,Z,me,oe]),fn=L.useMemo(()=>nn(V,()=>J&&(oe?Ei(J,oe):void 0)),[V,J,oe]),Pt=`${K}@${oe}/${me}`;function bn(){switch(he){case"custom":return U(c),u.jsx(c,{},`${Pt}_custom`);case"none":return null;case"canvas":default:return u.jsx(xo,{canvasRef:a},`${Pt}_canvas`)}}function yn(){return Z?u.jsx(wo,{},`${Pt}_text`):null}function vn(){return ue?u.jsx(So,{},`${Pt}_annotations`):null}function xn(){return u.jsxs(dn.Provider,{value:gn,children:[bn(),yn(),vn(),o]})}function An(){return ie?C===null||J===void 0||J===null?u.jsx(ht,{type:"loading",children:typeof b=="function"?b():b}):C===!1||J===!1?u.jsx(ht,{type:"error",children:typeof m=="function"?m():m}):xn():u.jsx(ht,{type:"no-data",children:typeof v=="function"?v():v})}return u.jsx("div",Object.assign({className:Ht(i,l),"data-page-number":ie,ref:cn(g,ft),style:{"--scale-factor":`${oe}`,backgroundColor:n||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},fn,{children:An()}))}ro();Hi.workerSrc="pdf.worker.mjs";Hi.workerSrc=`//unpkg.com/pdfjs-dist@${sn}/build/pdf.worker.min.mjs`;const Ve=({videoId:r,title:e})=>u.jsx("div",{className:"aspect-video w-full rounded-lg overflow-hidden bg-gray-900 border border-gray-800 my-6",children:u.jsx("iframe",{width:"100%",height:"100%",src:`https://www.youtube.com/embed/${r}`,title:e,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"w-full h-full"})}),He=({src:r,title:e})=>{const[t,i]=L.useState(null),[s,n]=L.useState(0),[a,o]=L.useState(1),l=L.useRef(null);L.useEffect(()=>{const m=new ResizeObserver(p=>{p[0]&&n(p[0].contentRect.width)});return l.current&&m.observe(l.current),()=>m.disconnect()},[]);function c({numPages:m}){i(m)}const d=()=>o(m=>Math.min(m+.2,2.5)),h=()=>o(m=>Math.max(m-.2,.5));return u.jsxs("div",{className:"w-full bg-gray-900 border border-gray-800 rounded-lg overflow-hidden my-8 shadow-xl flex flex-col h-[500px] md:h-[700px]",children:[u.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-800 border-b border-gray-700 shrink-0 z-10",children:[u.jsxs("div",{className:"flex items-center gap-2 overflow-hidden flex-1 mr-4",children:[u.jsx("span",{className:"text-red-400 font-bold text-xs uppercase tracking-wider border border-red-400/30 px-2 py-0.5 rounded",children:"PDF"}),u.jsx("span",{className:"text-gray-200 text-sm font-medium truncate",title:e,children:e}),t&&u.jsxs("span",{className:"text-gray-500 text-xs whitespace-nowrap hidden sm:inline",children:["(",t," pages)"]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("div",{className:"flex items-center bg-gray-900 rounded-md border border-gray-700 mr-2",children:[u.jsx("button",{onClick:h,className:"p-1.5 text-gray-400 hover:text-white transition-colors",title:"Zoom Out","aria-label":"Zoom Out",children:u.jsx(En,{size:16})}),u.jsxs("span",{className:"text-xs text-gray-300 font-mono w-12 text-center border-x border-gray-700",children:[Math.round(a*100),"%"]}),u.jsx("button",{onClick:d,className:"p-1.5 text-gray-400 hover:text-white transition-colors",title:"Zoom In","aria-label":"Zoom In",children:u.jsx(kn,{size:16})})]}),u.jsxs("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-1.5 bg-gray-700 hover:bg-blue-600 text-gray-200 hover:text-white rounded text-xs font-medium transition-colors",title:"Download PDF",children:[u.jsx(Tn,{size:14}),u.jsx("span",{className:"hidden sm:inline",children:"Download"})]})]})]}),u.jsx("div",{ref:l,className:"flex-1 overflow-y-auto overflow-x-auto bg-gray-500/10 p-4 relative scroll-smooth text-center",children:u.jsx(po,{file:r,onLoadSuccess:c,loading:u.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-3 text-gray-400 animate-pulse mt-10",children:[u.jsx(xs,{size:32,className:"opacity-50"}),u.jsx("span",{className:"text-sm",children:"Loading Document..."})]}),error:u.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-3 text-red-400 p-6 text-center mt-10",children:[u.jsx(As,{size:32}),u.jsx("p",{className:"text-sm",children:"Unable to load PDF preview."}),u.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"text-xs underline hover:text-red-300",children:"Click here to download directly"})]}),className:"flex flex-col items-center gap-6",children:t&&Array.from(new Array(t),(m,p)=>u.jsx(ko,{pageNumber:p+1,width:s?(s-48)*a:void 0,renderTextLayer:!1,renderAnnotationLayer:!1,className:"shadow-2xl border border-gray-200/5 bg-white transition-all duration-200 ease-out",loading:u.jsx("div",{className:"bg-gray-800 animate-pulse mb-4 rounded-sm",style:{width:s?(s-48)*a:"100%",height:(s?(s-48)*a:500)*1.4}})},`page_${p+1}`))})})]})},Oe=({href:r,text:e,icon:t})=>u.jsxs(Qe.a,{href:r,target:"_blank",rel:"noopener noreferrer",whileHover:{scale:1.05},className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-800/50 hover:bg-gray-800 border border-gray-700 hover:border-gray-600 rounded-lg text-sm text-gray-300 hover:text-white transition-all duration-200",children:[t,u.jsx("span",{children:e})]});function Oo(){const[r,e]=L.useState(null),{language:t}=Gt(),i=Wt,s=()=>{switch(r){case"shroud":return u.jsxs("main",{children:[u.jsx(si,{},"toc-shroud"),u.jsx(_o,{})]});case"marian":return u.jsxs("main",{children:[u.jsx(si,{},"toc-marian"),u.jsx(To,{})]});case"eucharistic":return u.jsxs("main",{children:[u.jsx(si,{},"toc-eucharistic"),u.jsx(Co,{})]});default:return null}};return u.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl relative",children:[u.jsxs(Qe.header,{className:"text-center max-w-4xl mx-auto mb-12 pt-24",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[u.jsx("h1",{className:"text-white text-5xl md:text-6xl font-bold tracking-tight mb-4",children:f(i.title,t)}),u.jsx("p",{className:"text-gray-400 text-lg md:text-xl mb-8",children:f(i.subtitle,t)}),u.jsxs("div",{className:"border-l-4 border-blue-600 px-6 py-4 bg-gray-900/50 rounded-lg max-w-2xl mx-auto text-center",children:[u.jsxs("blockquote",{className:"italic text-gray-300",children:['"',f(i.quote.text,t),'"']}),u.jsxs("cite",{className:"block text-gray-500 mt-2 not-italic",children:["— ",f(i.quote.source,t)]})]})]}),u.jsx(Qe.div,{className:"flex justify-center max-w-5xl mx-auto mb-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 w-fit",children:[u.jsx(ui,{title:f(i.selector.title1,t),icon:u.jsx(xs,{className:"w-6 h-6 text-yellow-300"}),isSelected:r==="shroud",onClick:()=>e("shroud"),colorClass:"hover:border-yellow-300/50",selectedClass:"border-yellow-300/80 bg-yellow-900/20"}),u.jsx(ui,{title:f(i.selector.title2,t),icon:u.jsx(vs,{className:"w-6 h-6 text-blue-300"}),isSelected:r==="marian",onClick:()=>e("marian"),colorClass:"hover:border-blue-300/50",selectedClass:"border-blue-300/80 bg-blue-900/20"}),u.jsx(ui,{title:f(i.selector.title3,t),icon:u.jsx(Sn,{className:"w-6 h-6 text-red-300"}),isSelected:r==="eucharistic",onClick:()=>e("eucharistic"),colorClass:"hover:border-red-300/50",selectedClass:"border-red-300/80 bg-red-900/20"})]})}),u.jsx("p",{className:"text-center text-gray-500 text-sm mb-12",children:f(i.selector.prompt,t)}),u.jsx("div",{className:"max-w-4xl mx-auto",children:u.jsx("div",{className:"prose prose-invert max-w-none prose-h2:text-white prose-h2:mb-6 prose-h3:text-gray-200 prose-h3:mb-4 prose-p:text-gray-300 prose-p:leading-relaxed prose-a:text-blue-400 prose-a:no-underline hover:prose-a:underline prose-li:text-gray-300 prose-li:leading-relaxed",children:s()})})]})}const ui=({title:r,icon:e,isSelected:t,onClick:i,colorClass:s,selectedClass:n})=>u.jsx(Qe.button,{onClick:i,whileHover:{scale:1.03},className:`p-6 rounded-lg border bg-gray-900/50 transition-all duration-300 text-left ${t?n:`border-gray-800 ${s} opacity-60 hover:opacity-100`}`,children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"flex-shrink-0",children:e}),u.jsx("h3",{className:"text-white text-lg font-semibold",children:r})]})}),_o=()=>{const{language:r}=Gt(),e=Wt.shroud;return u.jsxs(Qe.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[u.jsx("h2",{children:f(e.h2,r)}),u.jsx(Ve,{videoId:"OElbxDPsqpw",title:f(e.h2,r)}),u.jsx("p",{children:f(e.p1,r)}),u.jsxs("div",{className:"bg-gray-900/50 border-l-4 border-blue-600 p-6 rounded-r-lg",children:[u.jsxs("p",{className:"italic",children:['"',f(e.q1.text,r),'"']}),u.jsxs("p",{className:"text-gray-500 mt-2",children:["— ",f(e.q1.source,r)]})]}),u.jsx("p",{children:f(e.p2,r)}),u.jsx("h3",{children:f(e.desc.h3,r)}),u.jsxs("ul",{className:"list-none space-y-2 pl-6",children:[u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),u.jsx("span",{dangerouslySetInnerHTML:{__html:f(e.desc.li1,r)}})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),u.jsx("span",{dangerouslySetInnerHTML:{__html:f(e.desc.li2,r)}})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),u.jsx("span",{dangerouslySetInnerHTML:{__html:f(e.desc.li3,r)}})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),u.jsx("span",{dangerouslySetInnerHTML:{__html:f(e.desc.li4,r)}})]})]}),u.jsx("h3",{children:f(e.sci.h3,r)}),u.jsx("h4",{children:f(e.sci.A.h4,r)}),u.jsxs("ul",{className:"list-none space-y-2 pl-6",children:[u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.sci.A.li1,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.sci.A.li2,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.sci.A.li3,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.sci.A.li4,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.sci.A.li5,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.sci.A.li6,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.sci.A.li7,r)]})]}),u.jsxs("div",{className:"bg-gray-900/50 border-l-4 border-purple-600 p-6 rounded-r-lg",children:[u.jsxs("p",{className:"italic",children:['"',f(e.sci.A.q.text,r),'"']}),u.jsxs("p",{className:"text-gray-500 mt-2",children:["— ",f(e.sci.A.q.source,r)]})]}),u.jsx("h4",{children:f(e.sci.B.h4,r)}),u.jsxs("ul",{className:"list-none space-y-2 pl-6",children:[u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.sci.B.li1,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.sci.B.li2,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.sci.B.li3,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.sci.B.li4,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.sci.B.li5,r)]})]}),u.jsxs("div",{className:"bg-gray-900/50 border-l-4 border-purple-600 p-6 rounded-r-lg",children:[u.jsxs("p",{className:"italic",children:['"',f(e.sci.B.q.text,r),'"']}),u.jsxs("p",{className:"text-gray-500 mt-2",children:["— ",f(e.sci.B.q.source,r)]})]}),u.jsx("h3",{children:f(e.c14.h3,r)}),u.jsx("p",{children:f(e.c14.p1,r)}),u.jsxs("ul",{className:"list-none space-y-2 pl-6",children:[u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.c14.li1,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.c14.li2,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.c14.li3,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.c14.li4,r)]})]}),u.jsxs("div",{className:"bg-gray-900/50 border-l-4 border-purple-600 p-6 rounded-r-lg",children:[u.jsxs("p",{className:"italic",children:['"',f(e.c14.q.text,r),'"']}),u.jsxs("p",{className:"text-gray-500 mt-2",children:["— ",f(e.c14.q.source,r)]})]}),u.jsx("h3",{children:f(e.history.h3,r)}),u.jsxs("ul",{className:"list-none space-y-2 pl-6",children:[u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.history.li1,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.history.li2,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.history.li3,r)]})]}),u.jsx("h3",{children:f(e.anomalies.h3,r)}),u.jsx("p",{children:f(e.anomalies.p1,r)}),u.jsxs("ul",{className:"list-none space-y-2 pl-6",children:[u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.anomalies.li1,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.anomalies.li2,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.anomalies.li3,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.anomalies.li4,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.anomalies.li5,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.anomalies.li6,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.anomalies.li7,r)]})]}),u.jsx("p",{children:f(e.anomalies.p2,r)}),u.jsx("h3",{children:f(e.impact.h3,r)}),u.jsxs("ul",{className:"list-none space-y-2 pl-6",children:[u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.impact.li1,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.impact.li2,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.impact.li3,r)]})]}),u.jsxs("div",{className:"bg-gray-900/50 border-l-4 border-blue-600 p-6 rounded-r-lg",children:[u.jsxs("p",{className:"italic",children:['"',f(e.impact.q.text,r),'"']}),u.jsxs("p",{className:"text-gray-500 mt-2",children:["— ",f(e.impact.q.source,r)]})]}),u.jsx("h3",{children:f(e.conclusion.h3,r)}),u.jsx("p",{children:f(e.conclusion.p1,r)}),u.jsxs("div",{className:"bg-gray-900/50 border-l-4 border-blue-600 p-6 rounded-r-lg",children:[u.jsxs("p",{className:"italic",children:['"',f(e.conclusion.q.text,r),'"']}),u.jsxs("p",{className:"text-gray-500 mt-2",children:["— ",f(e.conclusion.q.source,r)]})]}),u.jsx("h3",{children:f(e.sources.h3,r)}),u.jsx(Ve,{videoId:"YT1R2kDPHFA",title:f(e.sources.vid1,r)}),u.jsxs("div",{className:"flex flex-wrap gap-4",children:[u.jsx(Oe,{href:f(e.sources.link1,r),text:"Shroud.com",icon:u.jsx(ze,{size:16})}),u.jsx(Oe,{href:f(e.sources.link2,r),text:"ShroudPhotos.com",icon:u.jsx(ze,{size:16})}),u.jsx(Oe,{href:f(e.sources.link3_url,r),text:f(e.sources.link3_text,r),icon:u.jsx(ze,{size:16})}),u.jsx(Oe,{href:f(e.sources.link4,r),text:"STURP Conclusions",icon:u.jsx(ze,{size:16})}),u.jsx(Oe,{href:f(e.sources.link5,r),text:"Radiocarbon Study",icon:u.jsx(ze,{size:16})}),u.jsx(Oe,{href:f(e.sources.link6,r),text:"X-ray Dating Study",icon:u.jsx(ze,{size:16})}),u.jsx(Oe,{href:f(e.sources.link7,r),text:"Pollen Studies",icon:u.jsx(ze,{size:16})})]}),u.jsx(He,{src:f(e.sources.pdf1_url,r),title:f(e.sources.pdf1_name,r)})]},"shroud")},To=()=>{const{language:r}=Gt(),e=Wt.marian,t=[e.fatima.keySci.li1,e.fatima.keySci.li2,e.fatima.keySci.li3,e.fatima.keySci.li4,e.fatima.keySci.li5],i=[e.fatima.invalid.li1,e.fatima.invalid.li2,e.fatima.invalid.li3,e.fatima.invalid.li4];return u.jsxs(Qe.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[u.jsx("h2",{children:f(e.h2,r)}),u.jsx(Ve,{videoId:"STMjSIORieU",title:f(e.h2,r)}),u.jsx("p",{children:f(e.intro,r)}),u.jsx("h3",{children:f(e.doubleStandard.h3,r)}),u.jsx("p",{children:f(e.doubleStandard.p1,r)}),u.jsx("p",{children:f(e.doubleStandard.p2,r)}),u.jsx("p",{children:f(e.doubleStandard.p3,r)}),u.jsxs("div",{className:"bg-gray-900/30 border border-gray-800 rounded-lg p-6",children:[u.jsx("h4",{className:"text-white mb-3",children:"Key points:"}),u.jsxs("ul",{className:"list-none space-y-2 pl-4",children:[u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.doubleStandard.key.li1,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.doubleStandard.key.li2,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.doubleStandard.key.li3,r)]})]})]}),u.jsx(Ye,{className:"my-12 bg-gray-800"}),u.jsx("h3",{children:f(e.fatima.h3,r)}),u.jsx(Ve,{videoId:"z5YKZHaYVPY",title:f(e.fatima.h3,r)}),u.jsx("p",{children:f(e.fatima.p1,r)}),u.jsx("p",{children:f(e.fatima.p2,r)}),u.jsx("p",{children:f(e.fatima.p3,r)}),u.jsxs("div",{className:"bg-gray-900/30 border border-gray-800 rounded-lg p-6",children:[u.jsx("h4",{className:"text-white mb-3",children:f(e.fatima.facts.h4,r)}),u.jsxs("ul",{className:"list-none space-y-2 pl-4",children:[u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.fatima.facts.li1,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.fatima.facts.li2,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.fatima.facts.li3,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.fatima.facts.li4,r)]})]})]}),u.jsx(He,{src:f(e.fatima.pdf1_url,r),title:f(e.fatima.pdf1_name,r)}),u.jsxs("div",{className:"bg-gray-900/30 border border-gray-800 rounded-lg p-6",children:[u.jsx("h4",{className:"text-white mb-4",children:f(e.fatima.keySci.h4,r)}),u.jsx("div",{className:"space-y-4",children:t.map((s,n)=>{const a=f(s,r),o=a.match(/^(\d+\.\s)(.*)/s),l=o?o[1]:"",c=o?o[2]:a;return u.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-900/50 rounded-lg border border-gray-700 hover:border-blue-700 transition-all duration-300",children:[u.jsx("span",{className:"text-blue-400 font-semibold flex-shrink-0 mt-1",children:l}),u.jsx("span",{className:"text-gray-300 leading-relaxed",dangerouslySetInnerHTML:{__html:c}})]},n)})})]}),u.jsxs("div",{className:"bg-red-900/20 border border-red-800 rounded-lg p-6 mt-6",children:[u.jsx("h4",{className:"text-white mb-4",children:f(e.fatima.invalid.h4,r)}),u.jsx("div",{className:"space-y-4",children:i.map((s,n)=>u.jsxs("div",{className:"flex items-start gap-3 p-3 bg-red-900/30 rounded-lg border border-red-700",children:[u.jsx(As,{className:"text-red-400 mt-1 flex-shrink-0",size:20}),u.jsx("span",{className:"text-gray-300",dangerouslySetInnerHTML:{__html:f(s,r)}})]},n))})]}),u.jsxs("div",{className:"bg-gradient-to-br from-blue-900/20 to-purple-900/20 border border-blue-800 rounded-lg p-6",children:[u.jsx("h4",{className:"text-white mb-2",children:f(e.fatima.conclusion.h4,r)}),u.jsx("p",{className:"text-gray-300",children:f(e.fatima.conclusion.p1,r)})]}),u.jsxs("div",{className:"bg-gray-900/30 border border-gray-800 rounded-lg p-6",children:[u.jsx("h4",{className:"text-white mb-3",children:f(e.fatima.argument.h4,r)}),u.jsx("p",{children:f(e.fatima.argument.p1,r)}),u.jsx(He,{src:f(e.fatima.argument.pdf_url,r),title:f(e.fatima.argument.pdf_name,r)})]}),u.jsx(Ye,{className:"my-12 bg-gray-800"}),u.jsx("h3",{children:f(e.zeitoun.h3,r)}),u.jsx(Ve,{videoId:"A0YRTRezSeM",title:f(e.zeitoun.h3,r)}),u.jsx("p",{children:f(e.zeitoun.p1,r)}),u.jsx("p",{children:f(e.zeitoun.p2,r)}),u.jsx("p",{children:f(e.zeitoun.p3,r)}),u.jsxs("div",{className:"bg-gray-900/30 border border-gray-800 rounded-lg p-6",children:[u.jsx("h4",{className:"text-white mb-3",children:f(e.zeitoun.facts.h4,r)}),u.jsxs("ul",{className:"list-none space-y-2 pl-4",children:[u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.zeitoun.facts.li1,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.zeitoun.facts.li2,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.zeitoun.facts.li3,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.zeitoun.facts.li4,r)]})]})]}),u.jsxs("div",{className:"bg-gray-900/30 border border-gray-800 rounded-lg p-6",children:[u.jsx("h4",{className:"text-white mb-2",children:f(e.zeitoun.book.title,r)}),u.jsxs("p",{className:"text-gray-500 text-sm mb-3",children:["by ",f(e.zeitoun.book.author,r)]}),u.jsx("p",{children:f(e.zeitoun.book.desc,r)}),u.jsx(He,{src:f(e.zeitoun.book.pdf_url,r),title:f(e.zeitoun.book.pdf_name,r)})]}),u.jsx(Ye,{className:"my-12 bg-gray-800"}),u.jsx("h3",{children:f(e.guadalupe.h3,r)}),u.jsx("p",{children:f(e.guadalupe.p1,r)}),u.jsx("p",{children:f(e.guadalupe.p2,r)}),u.jsx("p",{children:f(e.guadalupe.p3,r)}),u.jsx("p",{children:f(e.guadalupe.p4,r)}),u.jsx("p",{children:f(e.guadalupe.p5,r)}),u.jsxs("div",{className:"bg-gray-900/30 border border-gray-800 rounded-lg p-6",children:[u.jsx("h4",{className:"text-white mb-3",children:f(e.guadalupe.anomalies.h4,r)}),u.jsxs("ul",{className:"list-none space-y-2 pl-4",children:[u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.guadalupe.anomalies.li1,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.guadalupe.anomalies.li2,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.guadalupe.anomalies.li3,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.guadalupe.anomalies.li4,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.guadalupe.anomalies.li5,r)]})]})]}),u.jsx(He,{src:f(e.guadalupe.pdf1_url,r),title:f(e.guadalupe.pdf1_name,r)}),u.jsx(He,{src:f(e.guadalupe.pdf2_url,r),title:f(e.guadalupe.pdf2_name,r)}),u.jsx("h3",{children:f(e.conclusion.h3,r)}),u.jsx("p",{children:f(e.conclusion.p1,r)}),u.jsxs("div",{className:"bg-gray-900/30 border border-gray-800 rounded-lg p-6",children:[u.jsx("h4",{className:"text-white mb-3",children:f(e.conclusion.summary.h4,r)}),u.jsxs("ul",{className:"list-none space-y-2 pl-4",children:[u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),u.jsx("span",{dangerouslySetInnerHTML:{__html:f(e.conclusion.summary.li1,r)}})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),u.jsx("span",{dangerouslySetInnerHTML:{__html:f(e.conclusion.summary.li2,r)}})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),u.jsx("span",{dangerouslySetInnerHTML:{__html:f(e.conclusion.summary.li3,r)}})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),u.jsx("span",{dangerouslySetInnerHTML:{__html:f(e.conclusion.summary.li4,r)}})]})]})]})]},"marian")},Co=()=>{const{language:r}=Gt(),e=Wt.eucharistic;return u.jsxs(Qe.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[u.jsx("h2",{children:f(e.h2,r)}),u.jsx(Ve,{videoId:"64onhFuvQjo",title:f(e.h2,r)}),u.jsxs("div",{className:"flex flex-wrap gap-4",children:[u.jsx(Oe,{href:f(e.link1,r),text:"Magis Center",icon:u.jsx(ze,{size:16})}),u.jsx(Oe,{href:f(e.link2,r),text:"SaintBeluga.org",icon:u.jsx(ze,{size:16})})]}),u.jsx("h3",{children:f(e.intro.h3,r)}),u.jsx("p",{dangerouslySetInnerHTML:{__html:f(e.intro.p1,r)}}),u.jsx("p",{children:f(e.intro.p2,r)}),u.jsxs("ul",{className:"list-none space-y-2 pl-6",children:[u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.intro.li1,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.intro.li2,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.intro.li3,r)]})]}),u.jsx("p",{children:f(e.intro.p3,r)}),u.jsx(He,{src:f(e.intro.pdf_url,r),title:f(e.intro.pdf_name,r)}),u.jsx("h3",{children:f(e.buenosAires.h3,r)}),u.jsx("p",{children:f(e.buenosAires.p1,r)}),u.jsx("div",{className:"bg-gray-900/30 border border-gray-800 rounded-lg p-6",children:u.jsxs("ul",{className:"list-none space-y-2 pl-4",children:[u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),u.jsx("span",{dangerouslySetInnerHTML:{__html:f(e.buenosAires.li1,r)}})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),u.jsx("span",{dangerouslySetInnerHTML:{__html:f(e.buenosAires.li2,r)}})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),u.jsx("span",{dangerouslySetInnerHTML:{__html:f(e.buenosAires.li3,r)}})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),u.jsx("span",{dangerouslySetInnerHTML:{__html:f(e.buenosAires.li4,r)}})]})]})}),u.jsx("p",{children:f(e.buenosAires.p2,r)}),u.jsxs("div",{className:"bg-gray-900/30 border border-gray-800 rounded-lg p-6",children:[u.jsx("h4",{className:"text-white mb-3",children:f(e.buenosAires.zugibe.h4,r)}),u.jsx("h5",{className:"text-gray-300 my-4",children:f(e.buenosAires.zugibe.h5,r)}),u.jsx("p",{children:f(e.buenosAires.zugibe.p1,r)}),u.jsxs("ul",{className:"list-none space-y-2 pl-4 my-4",children:[u.jsx("li",{className:"text-gray-300",dangerouslySetInnerHTML:{__html:f(e.buenosAires.zugibe.li1,r)}}),u.jsx("li",{className:"text-gray-300",dangerouslySetInnerHTML:{__html:f(e.buenosAires.zugibe.li2,r)}}),u.jsx("li",{className:"text-gray-300",dangerouslySetInnerHTML:{__html:f(e.buenosAires.zugibe.li3,r)}}),u.jsx("li",{className:"text-gray-300",dangerouslySetInnerHTML:{__html:f(e.buenosAires.zugibe.li4,r)}})]}),u.jsx("h5",{className:"text-gray-300 mb-2",children:f(e.buenosAires.zugibe.conc.h5,r)}),u.jsx("p",{children:f(e.buenosAires.zugibe.conc.p1,r)}),u.jsxs("ul",{className:"list-none space-y-2 pl-4 my-4",children:[u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.buenosAires.zugibe.conc.li1_c,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.buenosAires.zugibe.conc.li2_c,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.buenosAires.zugibe.conc.li3_c,r)]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.buenosAires.zugibe.conc.li4_c,r)]})]}),u.jsx("p",{children:f(e.buenosAires.zugibe.conc.p2,r)}),u.jsx(He,{src:f(e.buenosAires.zugibe.pdf1_url,r),title:f(e.buenosAires.zugibe.pdf1_name,r)})]}),u.jsx(Ye,{className:"my-12 bg-gray-800"}),u.jsx("h3",{children:f(e.tixtla.h3,r)}),u.jsx("p",{children:f(e.tixtla.p1,r)}),u.jsx("div",{className:"bg-gray-900/30 border border-gray-800 rounded-lg p-6",children:u.jsxs("ul",{className:"list-none space-y-2 pl-4",children:[u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),u.jsx("span",{dangerouslySetInnerHTML:{__html:f(e.tixtla.li1,r)}})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),u.jsx("span",{dangerouslySetInnerHTML:{__html:f(e.tixtla.li2,r)}})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),u.jsx("span",{dangerouslySetInnerHTML:{__html:f(e.tixtla.li3,r)}})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),u.jsx("span",{dangerouslySetInnerHTML:{__html:f(e.tixtla.li4,r)}})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),f(e.tixtla.li5,r)]})]})}),u.jsx(Ye,{className:"my-12 bg-gray-800"}),u.jsx("h3",{children:f(e.sokolka.h3,r)}),u.jsx("p",{children:f(e.sokolka.p1,r)}),u.jsx("div",{className:"bg-gray-900/30 border border-gray-800 rounded-lg p-6",children:u.jsxs("ul",{className:"list-none space-y-2 pl-4",children:[u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),u.jsx("span",{dangerouslySetInnerHTML:{__html:f(e.sokolka.li1,r)}})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),u.jsx("span",{dangerouslySetInnerHTML:{__html:f(e.sokolka.li2,r)}})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),u.jsx("span",{dangerouslySetInnerHTML:{__html:f(e.sokolka.li3,r)}})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),u.jsx("span",{dangerouslySetInnerHTML:{__html:f(e.sokolka.li4,r)}})]})]})}),u.jsx("p",{children:f(e.sokolka.p2,r)}),u.jsx(Ye,{className:"my-12 bg-gray-800"}),u.jsx("h3",{children:f(e.lanciano.h3,r)}),u.jsx(Ve,{videoId:"OaoaHNhX1pk",title:f(e.lanciano.vid1,r)}),u.jsx("h4",{children:f(e.lanciano.h4,r)}),u.jsx("p",{children:f(e.lanciano.findings.p1_intro,r)}),u.jsxs("div",{className:"space-y-4 mt-6",children:[u.jsx("div",{className:"bg-gray-900/30 border border-gray-800 rounded-lg p-6",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Xe,{className:"text-green-400 flex-shrink-0 mt-1",size:20}),u.jsxs("div",{children:[u.jsx("h5",{className:"text-white font-semibold mb-1",children:f(e.lanciano.findings.li1_title,r)}),u.jsx("p",{className:"text-gray-400 mb-3",children:f(e.lanciano.findings.li1_desc,r)}),u.jsx("div",{className:"bg-gray-800/50 border-l-4 border-blue-600 p-4 rounded-r-lg",children:u.jsxs("p",{className:"text-gray-300 italic text-sm",children:['"',f(e.lanciano.findings.li1_quote,r),'"']})})]})]})}),u.jsx("div",{className:"bg-gray-900/30 border border-gray-800 rounded-lg p-6",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Xe,{className:"text-green-400 flex-shrink-0 mt-1",size:20}),u.jsxs("div",{children:[u.jsx("h5",{className:"text-white font-semibold mb-1",children:f(e.lanciano.findings.li2_title,r)}),u.jsx("p",{className:"text-gray-400 mb-3",children:f(e.lanciano.findings.li2_desc,r)}),u.jsx("div",{className:"bg-gray-800/50 border-l-4 border-blue-600 p-4 rounded-r-lg",children:u.jsxs("p",{className:"text-gray-300 italic text-sm",children:['"',f(e.lanciano.findings.li2_quote,r),'"']})})]})]})}),u.jsx("div",{className:"bg-gray-900/30 border border-gray-800 rounded-lg p-6",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Xe,{className:"text-green-400 flex-shrink-0 mt-1",size:20}),u.jsxs("div",{children:[u.jsx("h5",{className:"text-white font-semibold mb-1",children:f(e.lanciano.findings.li3_title,r)}),u.jsx("p",{className:"text-gray-400 mb-3",children:f(e.lanciano.findings.li3_desc,r)}),u.jsx("div",{className:"bg-gray-800/50 border-l-4 border-blue-600 p-4 rounded-r-lg",children:u.jsxs("p",{className:"text-gray-300 italic text-sm",children:['"',f(e.lanciano.findings.li3_quote,r),'"']})})]})]})}),u.jsx("div",{className:"bg-gray-900/30 border border-gray-800 rounded-lg p-6",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Xe,{className:"text-green-400 flex-shrink-0 mt-1",size:20}),u.jsxs("div",{children:[u.jsx("h5",{className:"text-white font-semibold mb-1",children:f(e.lanciano.findings.li4_title,r)}),u.jsx("p",{className:"text-gray-400 mb-3",children:f(e.lanciano.findings.li4_desc,r)}),u.jsx("div",{className:"bg-gray-800/50 border-l-4 border-blue-600 p-4 rounded-r-lg",children:u.jsxs("p",{className:"text-gray-300 italic text-sm",children:['"',f(e.lanciano.findings.li4_quote,r),'"']})})]})]})}),u.jsx("div",{className:"bg-gray-900/30 border border-gray-800 rounded-lg p-6",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Xe,{className:"text-green-400 flex-shrink-0 mt-1",size:20}),u.jsxs("div",{children:[u.jsx("h5",{className:"text-white font-semibold mb-1",children:f(e.lanciano.findings.li5_title,r)}),u.jsx("p",{className:"text-gray-400 mb-3",children:f(e.lanciano.findings.li5_desc,r)}),u.jsx("div",{className:"bg-gray-800/50 border-l-4 border-blue-600 p-4 rounded-r-lg",children:u.jsxs("p",{className:"text-gray-300 italic text-sm",children:['"',f(e.lanciano.findings.li5_quote,r),'"']})})]})]})}),u.jsx("div",{className:"bg-gray-900/30 border border-gray-800 rounded-lg p-6",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Xe,{className:"text-green-400 flex-shrink-0 mt-1",size:20}),u.jsxs("div",{children:[u.jsx("h5",{className:"text-white font-semibold mb-1",children:f(e.lanciano.findings.li6_title,r)}),u.jsx("p",{className:"text-gray-400 mb-3",children:f(e.lanciano.findings.li6_desc,r)}),u.jsx("div",{className:"bg-gray-800/50 border-l-4 border-blue-600 p-4 rounded-r-lg",children:u.jsxs("p",{className:"text-gray-300 italic text-sm",children:['"',f(e.lanciano.findings.li6_quote,r),'"']})})]})]})})]}),u.jsxs("div",{className:"bg-gray-900/50 border border-gray-800 rounded-lg p-6 my-6",children:[u.jsx("h5",{className:"text-white mb-3",children:f(e.lanciano.freshness.h5,r)}),u.jsx("p",{className:"text-gray-300",children:f(e.lanciano.freshness.p1,r)}),u.jsx("div",{className:"bg-gray-800/50 border-l-4 border-purple-600 p-4 rounded-r-lg mt-4",children:u.jsxs("p",{className:"text-gray-300 italic text-sm",children:['"',f(e.lanciano.freshness.quote,r),'"']})}),u.jsx("p",{className:"text-gray-400 mt-4",children:f(e.lanciano.freshness.p2,r)})]}),u.jsxs("div",{className:"bg-green-900/10 border border-green-800 rounded-lg p-6 my-6",children:[u.jsx("h5",{className:"text-white mb-3",children:f(e.lanciano.conclusion.h5,r)}),u.jsx("p",{className:"text-gray-300 mb-4",children:f(e.lanciano.conclusion.p1_methods,r)}),u.jsxs("ul",{className:"list-none space-y-2 pl-4 mb-4",children:[u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-green-400 mt-1",children:"•"}),u.jsx("span",{className:"text-gray-300",children:f(e.lanciano.conclusion.li_methods1,r)})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-green-400 mt-1",children:"•"}),u.jsx("span",{className:"text-gray-300",children:f(e.lanciano.conclusion.li_methods2,r)})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-green-400 mt-1",children:"•"}),u.jsx("span",{className:"text-gray-300",children:f(e.lanciano.conclusion.li_methods3,r)})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-green-400 mt-1",children:"•"}),u.jsx("span",{className:"text-gray-300",children:f(e.lanciano.conclusion.li_methods4,r)})]})]}),u.jsx("p",{className:"text-gray-300 mb-4",children:f(e.lanciano.conclusion.p2_results,r)}),u.jsxs("ul",{className:"list-none space-y-2 pl-4",children:[u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-green-400 mt-1",children:"•"}),u.jsx("span",{className:"text-gray-300",children:f(e.lanciano.conclusion.li_results1,r)})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-green-400 mt-1",children:"•"}),u.jsx("span",{className:"text-gray-300",children:f(e.lanciano.conclusion.li_results2,r)})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-green-400 mt-1",children:"•"}),u.jsx("span",{className:"text-gray-300",children:f(e.lanciano.conclusion.li_results3,r)})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-green-400 mt-1",children:"•"}),u.jsx("span",{className:"text-gray-300",children:f(e.lanciano.conclusion.li_results4,r)})]})]}),u.jsx("p",{className:"text-white font-semibold mt-4",children:f(e.lanciano.conclusion.p3_final,r)})]}),u.jsx(Ye,{className:"my-12 bg-gray-800"}),u.jsxs("div",{className:"bg-gray-900/30 border border-gray-800 rounded-lg p-6",children:[u.jsx("h4",{className:"text-white mb-3",children:f(e.critique.h4,r)}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-blue-900/10 border border-blue-800 rounded-lg p-6",children:[u.jsx("h5",{className:"text-white font-semibold mb-2",children:"Abstract & Introduction"}),u.jsx("p",{className:"text-gray-300 mb-4",dangerouslySetInnerHTML:{__html:f(e.critique.abs,r)}}),u.jsx("p",{className:"text-gray-400 text-sm",dangerouslySetInnerHTML:{__html:f(e.critique.p_intro,r)}})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"bg-gray-900/50 border border-gray-800 rounded-lg p-6",children:u.jsx("p",{className:"text-gray-300",dangerouslySetInnerHTML:{__html:f(e.critique.p_hist,r)}})}),u.jsx("div",{className:"bg-gray-900/50 border border-gray-800 rounded-lg p-6",children:u.jsx("p",{className:"text-gray-300",dangerouslySetInnerHTML:{__html:f(e.critique.p_immune,r)}})}),u.jsx("div",{className:"bg-gray-900/50 border border-gray-800 rounded-lg p-6",children:u.jsx("p",{className:"text-gray-300",dangerouslySetInnerHTML:{__html:f(e.critique.p_dna,r)}})}),u.jsx("div",{className:"bg-blue-900/10 border border-blue-800 rounded-lg p-6",children:u.jsx("p",{className:"text-gray-300 font-medium",dangerouslySetInnerHTML:{__html:f(e.critique.p_dna_clarify,r)}})}),u.jsxs("div",{className:"bg-gray-900/50 border border-gray-800 rounded-lg p-6",children:[u.jsx("p",{className:"text-gray-300 mb-4",dangerouslySetInnerHTML:{__html:f(e.critique.p_blood,r)}}),u.jsx("p",{className:"text-gray-300",dangerouslySetInnerHTML:{__html:f(e.critique.p_blood_rebuttal,r)}})]}),u.jsx("div",{className:"bg-red-900/10 border border-red-800 rounded-lg p-6",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx(vs,{className:"text-red-400 flex-shrink-0 mt-1",size:24}),u.jsx("div",{children:u.jsx("p",{className:"text-gray-300",dangerouslySetInnerHTML:{__html:f(e.critique.p_fusion,r)}})})]})}),u.jsx("div",{className:"bg-gray-900/50 border border-gray-800 rounded-lg p-6",children:u.jsx("p",{className:"text-gray-300",dangerouslySetInnerHTML:{__html:f(e.critique.p_stats,r)}})}),u.jsx("div",{className:"bg-gray-900/50 border border-gray-800 rounded-lg p-6",children:u.jsx("p",{className:"text-gray-300",dangerouslySetInnerHTML:{__html:f(e.critique.p_method,r)}})})]}),u.jsxs("div",{className:"bg-green-900/10 border border-green-800 rounded-lg p-8 mt-6",children:[u.jsxs("h3",{className:"text-white mb-4 flex items-center gap-3",children:[u.jsx(Xe,{className:"text-green-400",size:24}),f(e.critique.conclusionTitle,r)]}),u.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",dangerouslySetInnerHTML:{__html:f(e.critique.p_conc,r)}})]})]})]}),u.jsxs("div",{className:"bg-gray-900/30 border border-gray-800 rounded-lg p-6 mt-6",children:[u.jsx("h4",{className:"text-white mb-3",children:f(e.critique.faq.h4,r)}),u.jsx("ul",{className:"list-none space-y-4",children:e.critique.faq.q1&&Array.from({length:10}).map((t,i)=>{const s=`q${i+1}`,n=`a${i+1}`;return!e.critique.faq[s]||!e.critique.faq[n]?null:u.jsxs("li",{children:[u.jsx("p",{className:"text-gray-400 italic",children:f(e.critique.faq[s],r)}),u.jsx("p",{className:"text-gray-300 pl-4 border-l-2 border-blue-700 ml-2 mt-2",dangerouslySetInnerHTML:{__html:f(e.critique.faq[n],r)}})]},i)})})]}),u.jsx("p",{className:"text-gray-300 font-semibold mb-3 mt-8",children:f(e.critique.pdf_semantics_name,r)}),u.jsx(He,{src:f(e.critique.pdf_semantics_url,r),title:f(e.critique.pdf_semantics_name,r)}),u.jsx("h3",{children:f(e.demonic.h3,r)}),u.jsx(Ve,{videoId:"TpY0hIwqtUU",title:f(e.demonic.vid,r)}),u.jsx("h3",{children:f(e.books.h3,r)}),u.jsxs("div",{className:"bg-gray-900/30 border border-gray-800 rounded-lg p-6",children:[u.jsx("h4",{className:"text-white mb-2",children:f(e.books.book1.title,r)}),u.jsx("p",{className:"text-gray-500 text-sm mb-3",children:f(e.books.book1.author,r)}),u.jsx("p",{children:f(e.books.book1.desc,r)})]}),u.jsxs("div",{className:"bg-gray-900/30 border border-gray-800 rounded-lg p-6",children:[u.jsx("h4",{className:"text-white mb-2",children:f(e.books.book2.title,r)}),u.jsx("p",{className:"text-gray-500 text-sm mb-3",children:f(e.books.book2.author,r)}),u.jsx("p",{children:f(e.books.book2.desc,r)}),u.jsx("p",{className:"text-gray-500 text-sm mt-4",children:f(e.books.book2.source,r)})]})]},"eucharistic")};export{Oo as default};
